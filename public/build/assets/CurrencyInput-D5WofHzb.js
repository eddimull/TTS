import{Z as V,al as O,a0 as $,a2 as R,am as A,_ as L,o as P,b as C}from"./app-Dcv1srkc.js";/**
 * Vue Currency Input 2.4.0
 * (c) 2018-2022 Matthias Stiller
 * @license MIT
 */const x=s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),_=s=>s.replace(/^0+(0$|[^0])/,"$1"),E=(s,i)=>(s.match(new RegExp(x(i),"g"))||[]).length,w=(s,i)=>s.substring(0,s.indexOf(i));var F;(function(s){s.symbol="symbol",s.narrowSymbol="narrowSymbol",s.code="code",s.name="name",s.hidden="hidden"})(F||(F={}));var y;(function(s){s.precision="precision",s.thousands="thousands",s.millions="millions",s.billions="billions"})(y||(y={}));const N=[",",".","Ù«"],I="(0|[1-9]\\d*)";class G{constructor(i){var t,e,n,h,o,l;const{currency:r,currencyDisplay:f,locale:c,precision:a,accountingSign:d}=i;this.locale=c,this.options={style:"currency",currency:r,currencySign:d?"accounting":void 0,currencyDisplay:f!==F.hidden?f:void 0};const m=new Intl.NumberFormat(c,this.options),p=m.formatToParts(123456);this.currency=(t=p.find(({type:g})=>g==="currency"))===null||t===void 0?void 0:t.value,this.digits=[0,1,2,3,4,5,6,7,8,9].map(g=>g.toLocaleString(c)),this.decimalSymbol=(e=p.find(({type:g})=>g==="decimal"))===null||e===void 0?void 0:e.value,this.groupingSymbol=(n=p.find(({type:g})=>g==="group"))===null||n===void 0?void 0:n.value,this.minusSign=(h=m.formatToParts(-1).find(({type:g})=>g==="minusSign"))===null||h===void 0?void 0:h.value,this.decimalSymbol===void 0?this.minimumFractionDigits=this.maximumFractionDigits=0:typeof a=="number"?this.minimumFractionDigits=this.maximumFractionDigits=a:(this.minimumFractionDigits=(o=a==null?void 0:a.min)!==null&&o!==void 0?o:m.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=(l=a==null?void 0:a.max)!==null&&l!==void 0?l:m.resolvedOptions().maximumFractionDigits);const v=g=>w(g,this.digits[1]),b=g=>g.substring(g.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[1])+1);this.prefix=v(m.format(1)),this.suffix=b(m.format(1)),this.negativePrefix=v(m.format(-1)),this.negativeSuffix=b(m.format(-1))}parse(i){if(i){const t=this.isNegative(i);i=this.normalizeDigits(i),i=this.stripCurrency(i,t),i=this.stripSignLiterals(i);const e=this.decimalSymbol?`(?:${x(this.decimalSymbol)}(\\d*))?`:"",n=this.stripGroupingSeparator(i).match(new RegExp(`^${I}${e}$`));if(n&&this.isValidIntegerFormat(this.decimalSymbol?i.split(this.decimalSymbol)[0]:i,Number(n[1])))return+`${t?"-":""}${this.onlyDigits(n[1])}.${this.onlyDigits(n[2]||"")}`}return null}isValidIntegerFormat(i,t){const e={...this.options,minimumFractionDigits:0};return[this.stripCurrency(this.normalizeDigits(t.toLocaleString(this.locale,{...e,useGrouping:!0})),!1),this.stripCurrency(this.normalizeDigits(t.toLocaleString(this.locale,{...e,useGrouping:!1})),!1)].includes(i)}format(i,t={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}){return i!=null?i.toLocaleString(this.locale,{...this.options,...t}):""}toFraction(i){return`${this.digits[0]}${this.decimalSymbol}${this.onlyLocaleDigits(i.substr(1)).substr(0,this.maximumFractionDigits)}`}isFractionIncomplete(i){return!!this.normalizeDigits(this.stripGroupingSeparator(i)).match(new RegExp(`^${I}${x(this.decimalSymbol)}$`))}isNegative(i){return i.startsWith(this.negativePrefix)||this.minusSign===void 0&&(i.startsWith("(")||i.startsWith("-"))||this.minusSign!==void 0&&i.replace("-",this.minusSign).startsWith(this.minusSign)}insertCurrency(i,t){return`${t?this.negativePrefix:this.prefix}${i}${t?this.negativeSuffix:this.suffix}`}stripGroupingSeparator(i){return this.groupingSymbol!==void 0?i.replace(new RegExp(x(this.groupingSymbol),"g"),""):i}stripSignLiterals(i){return this.minusSign!==void 0?i.replace("-",this.minusSign).replace(this.minusSign,""):i.replace(/[-()]/g,"")}stripCurrency(i,t){return i.replace(t?this.negativePrefix:this.prefix,"").replace(t?this.negativeSuffix:this.suffix,"")}normalizeDecimalSeparator(i,t){return N.forEach(e=>{i=i.substr(0,t)+i.substr(t).replace(e,this.decimalSymbol)}),i}normalizeDigits(i){return this.digits[0]!=="0"&&this.digits.forEach((t,e)=>{i=i.replace(new RegExp(t,"g"),String(e))}),i}onlyDigits(i){return this.normalizeDigits(i).replace(/\D+/g,"")}onlyLocaleDigits(i){return i.replace(new RegExp(`[^${this.digits.join("")}]*`,"g"),"")}}class M{constructor(i){this.currencyFormat=i}}class T extends M{conformToMask(i,t=""){const e=this.currencyFormat.isNegative(i),n=p=>p===""&&e&&!(this.currencyFormat.minusSign===void 0?t===this.currencyFormat.negativePrefix+this.currencyFormat.negativeSuffix:t===this.currencyFormat.negativePrefix),h=p=>{if(n(p))return"";if(this.currencyFormat.maximumFractionDigits>0){if(this.currencyFormat.isFractionIncomplete(p))return p;if(p.startsWith(this.currencyFormat.decimalSymbol))return this.currencyFormat.toFraction(p)}return null};let o=i;o=this.currencyFormat.stripCurrency(o,e),o=this.currencyFormat.stripSignLiterals(o);const l=h(o);if(l!=null)return this.currencyFormat.insertCurrency(l,e);const[r,...f]=o.split(this.currencyFormat.decimalSymbol),c=_(this.currencyFormat.onlyDigits(r)),a=this.currencyFormat.onlyDigits(f.join("")).substr(0,this.currencyFormat.maximumFractionDigits),d=f.length>0&&a.length===0,m=c===""&&e&&(this.currencyFormat.minusSign===void 0?t===i.slice(0,-2)+this.currencyFormat.negativeSuffix:t===i.slice(0,-1));return d||m||n(c)?t:c.match(/\d+/)?{numberValue:+`${e?"-":""}${c}.${a}`,fractionDigits:a}:""}}class k extends M{conformToMask(i,t=""){if(i===""||this.currencyFormat.parse(t)===0&&this.currencyFormat.stripCurrency(t,!0).slice(0,-1)===this.currencyFormat.stripCurrency(i,!0))return"";const e=this.currencyFormat.isNegative(i),n=this.currencyFormat.stripSignLiterals(i)===""?-0:+`${e?"-":""}${_(this.currencyFormat.onlyDigits(i))}`/Math.pow(10,this.currencyFormat.maximumFractionDigits);return{numberValue:n,fractionDigits:n.toFixed(this.currencyFormat.maximumFractionDigits).slice(-this.currencyFormat.maximumFractionDigits)}}}const z={locale:void 0,currency:void 0,currencyDisplay:void 0,exportValueAsInteger:!1,hideGroupingSeparatorOnFocus:!0,hideCurrencySymbolOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,precision:void 0,autoDecimalDigits:!1,valueRange:void 0,autoSign:!0,useGrouping:!0,valueScaling:void 0};let W=class{constructor(i,t){this.el=i,this.numberValue=null,this.addEventListener(),this.init(t),this.setValue(this.currencyFormat.parse(this.el.value))}setOptions(i){this.init(i),this.applyFixedFractionFormat(this.numberValue,!0)}getValue(){return{number:this.valueScaling&&this.numberValue!=null?this.toInteger(this.numberValue,this.valueScaling):this.numberValue,formatted:this.formattedValue}}setValue(i){const t=this.valueScaling!==void 0&&i!=null?this.toFloat(i,this.valueScaling):i;t!==this.numberValue&&this.applyFixedFractionFormat(t)}dispatchEvent(i){this.el.dispatchEvent(new CustomEvent(i,{detail:this.getValue()}))}init(i){this.options={...z,...i},this.options.autoDecimalDigits?(this.options.hideNegligibleDecimalDigitsOnFocus=!1,this.el.setAttribute("inputmode","numeric")):this.el.setAttribute("inputmode","decimal"),this.currencyFormat=new G(this.options),this.numberMask=this.options.autoDecimalDigits?new k(this.currencyFormat):new T(this.currencyFormat);const t={[y.precision]:this.currencyFormat.maximumFractionDigits,[y.thousands]:3,[y.millions]:6,[y.billions]:9};this.options.exportValueAsInteger?this.valueScaling=t[y.precision]:this.valueScaling=this.options.valueScaling?t[this.options.valueScaling]:void 0,this.valueScalingFractionDigits=this.valueScaling!==void 0&&this.options.valueScaling!==y.precision?this.valueScaling+this.currencyFormat.maximumFractionDigits:this.currencyFormat.maximumFractionDigits,this.minValue=this.getMinValue(),this.maxValue=this.getMaxValue()}getMinValue(){var i,t;let e=this.toFloat(-Number.MAX_SAFE_INTEGER);return((i=this.options.valueRange)===null||i===void 0?void 0:i.min)!==void 0&&(e=Math.max((t=this.options.valueRange)===null||t===void 0?void 0:t.min,this.toFloat(-Number.MAX_SAFE_INTEGER))),!this.options.autoSign&&e<0&&(e=0),e}getMaxValue(){var i,t;let e=this.toFloat(Number.MAX_SAFE_INTEGER);return((i=this.options.valueRange)===null||i===void 0?void 0:i.max)!==void 0&&(e=Math.min((t=this.options.valueRange)===null||t===void 0?void 0:t.max,this.toFloat(Number.MAX_SAFE_INTEGER))),!this.options.autoSign&&e<0&&(e=this.toFloat(Number.MAX_SAFE_INTEGER)),e}toFloat(i,t){return i/Math.pow(10,t??this.valueScalingFractionDigits)}toInteger(i,t){return Number(i.toFixed(t??this.valueScalingFractionDigits).split(".").join(""))}validateValueRange(i){return i!=null?Math.min(Math.max(i,this.minValue),this.maxValue):i}applyFixedFractionFormat(i,t=!1){this.format(this.currencyFormat.format(this.validateValueRange(i))),(i!==this.numberValue||t)&&this.dispatchEvent("change")}format(i,t=!1){if(i!=null){this.decimalSymbolInsertedAt!==void 0&&(i=this.currencyFormat.normalizeDecimalSeparator(i,this.decimalSymbolInsertedAt),this.decimalSymbolInsertedAt=void 0);const e=this.numberMask.conformToMask(i,this.formattedValue);let n;if(typeof e=="object"){const{numberValue:h,fractionDigits:o}=e;let{maximumFractionDigits:l,minimumFractionDigits:r}=this.currencyFormat;this.focus?r=t?o.replace(/0+$/,"").length:Math.min(l,o.length):Number.isInteger(h)&&!this.options.autoDecimalDigits&&(this.options.precision===void 0||r===0)&&(r=l=0),n=this.toInteger(Math.abs(h))>Number.MAX_SAFE_INTEGER?this.formattedValue:this.currencyFormat.format(h,{useGrouping:this.options.useGrouping&&!(this.focus&&this.options.hideGroupingSeparatorOnFocus),minimumFractionDigits:r,maximumFractionDigits:l})}else n=e;this.options.autoSign&&(this.maxValue<=0&&!this.currencyFormat.isNegative(n)&&this.currencyFormat.parse(n)!==0&&(n=n.replace(this.currencyFormat.prefix,this.currencyFormat.negativePrefix)),this.minValue>=0&&(n=n.replace(this.currencyFormat.negativePrefix,this.currencyFormat.prefix))),(this.options.currencyDisplay===F.hidden||this.focus&&this.options.hideCurrencySymbolOnFocus)&&(n=n.replace(this.currencyFormat.negativePrefix,this.currencyFormat.minusSign!==void 0?this.currencyFormat.minusSign:"(").replace(this.currencyFormat.negativeSuffix,this.currencyFormat.minusSign!==void 0?"":")").replace(this.currencyFormat.prefix,"").replace(this.currencyFormat.suffix,"")),this.el.value=n,this.numberValue=this.currencyFormat.parse(n)}else this.el.value="",this.numberValue=null;this.formattedValue=this.el.value,this.dispatchEvent("input")}addEventListener(){this.el.addEventListener("input",i=>{if(!i.detail){const{value:t,selectionStart:e}=this.el,n=i;if(e&&n.data&&N.includes(n.data)&&(this.decimalSymbolInsertedAt=e-1),this.format(t),this.focus&&e!=null){const h=()=>{const{prefix:o,suffix:l,decimalSymbol:r,maximumFractionDigits:f,groupingSymbol:c}=this.currencyFormat;let a=t.length-e;const d=this.formattedValue.length;if(this.currencyFormat.minusSign===void 0&&(t.startsWith("(")||t.startsWith("-"))&&!t.endsWith(")"))return d-this.currencyFormat.negativeSuffix.length>1?this.formattedValue.substring(e).length:1;if(this.formattedValue.substr(e,1)===c&&E(this.formattedValue,c)===E(t,c)+1)return d-a-1;if(d<a)return e;if(r!==void 0&&t.indexOf(r)!==-1){const m=t.indexOf(r)+1;if(Math.abs(d-t.length)>1&&e<=m)return this.formattedValue.indexOf(r)+1;!this.options.autoDecimalDigits&&e>m&&this.currencyFormat.onlyDigits(t.substr(m)).length-1===f&&(a-=1)}return this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===F.hidden?d-a:Math.max(d-Math.max(a,l.length),o.length)};this.setCaretPosition(h())}}},{capture:!0}),this.el.addEventListener("focus",()=>{this.focus=!0,setTimeout(()=>{const{value:i,selectionStart:t,selectionEnd:e}=this.el;if(this.format(i,this.options.hideNegligibleDecimalDigitsOnFocus),t!=null&&e!=null&&Math.abs(t-e)>0)this.setCaretPosition(0,this.el.value.length);else if(t!=null){const n=this.getCaretPositionOnFocus(i,t);this.setCaretPosition(n)}})}),this.el.addEventListener("blur",()=>{this.focus=!1,this.applyFixedFractionFormat(this.numberValue)}),this.el.addEventListener("change",i=>{i.detail||this.dispatchEvent("change")},{capture:!0})}getCaretPositionOnFocus(i,t){if(this.numberValue==null)return t;const{prefix:e,negativePrefix:n,suffix:h,negativeSuffix:o,groupingSymbol:l,currency:r}=this.currencyFormat,f=this.numberValue<0,c=f?n:e,a=c.length;if(this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===F.hidden){if(f){if(t<=1)return 1;if(i.endsWith(")")&&t>i.indexOf(")"))return this.formattedValue.length-1}}else{const m=f?o.length:h.length;if(t>=i.length-m)return this.formattedValue.length-m;if(t<a)return a}let d=t;return this.options.hideCurrencySymbolOnFocus&&this.options.currencyDisplay!==F.hidden&&t>=a&&r!==void 0&&c.includes(r)&&(d-=a,f&&(d+=1)),this.options.hideGroupingSeparatorOnFocus&&l!==void 0&&(d-=E(i.substring(0,t),l)),d}setCaretPosition(i,t=i){this.el.setSelectionRange(i,t)}};const X=s=>s!=null&&s.matches("input")?s:s==null?void 0:s.querySelector("input");var j=(s,i)=>{var t;let e,n;const h=V(null),o=V(null),l=V(null),r=O(),f=(u,S)=>r==null?void 0:r.emit(u,S),c=(t=r==null?void 0:r.attrs.modelModifiers)===null||t===void 0?void 0:t.lazy,a=$(()=>r==null?void 0:r.props.modelValue),d="update:modelValue",m=c?"update:modelValue":"change",p=!c,v=c||!(r!=null&&r.attrs.onChange),b=u=>{u.detail&&(a.value!==u.detail.number&&f(d,u.detail.number),l.value=u.detail.number,o.value=u.detail.formatted)},g=u=>{u.detail&&(f(m,u.detail.number),l.value=u.detail.number,o.value=u.detail.formatted)};return R(h,u=>{var S,D;u?(n=X((D=(S=u)===null||S===void 0?void 0:S.$el)!==null&&D!==void 0?D:u),n?(e=new W(n,s),p&&n.addEventListener("input",b),v&&n.addEventListener("change",g),e.setValue(a.value)):console.error('No input element found. Please make sure that the "inputRef" template ref is properly assigned.')):e=null}),A(()=>{p&&(n==null||n.removeEventListener("input",b)),v&&(n==null||n.removeEventListener("change",g))}),{inputRef:h,numberValue:l,formattedValue:o,setValue:u=>e==null?void 0:e.setValue(u),setOptions:u=>e==null?void 0:e.setOptions(u)}};const B={name:"CurrencyInput",props:{modelValue:Number,options:Object},setup(s){const{formattedValue:i,inputRef:t}=j({locale:void 0,currency:"USD",currencyDisplay:"symbol",valueRange:void 0,precision:2,hideCurrencySymbolOnFocus:!1,hideGroupingSeparatorOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,autoDecimalDigits:!1,exportValueAsInteger:!1,autoSign:!0,useGrouping:!0});return{inputRef:t,formattedValue:i}}},U=["value"];function Z(s,i,t,e,n,h){return P(),C("input",{class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",ref:"inputRef",type:"text",value:e.formattedValue},null,8,U)}const J=L(B,[["render",Z]]);export{J as C};
