var Ci=Object.defineProperty;var jt=e=>{throw TypeError(e)};var Pi=(e,t,i)=>t in e?Ci(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var ke=(e,t,i)=>Pi(e,typeof t!="symbol"?t+"":t,i),gt=(e,t,i)=>t.has(e)||jt("Cannot "+i);var N=(e,t,i)=>(gt(e,t,"read from private field"),i?i.call(e):t.get(e)),pe=(e,t,i)=>t.has(e)?jt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ge=(e,t,i,n)=>(gt(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),ce=(e,t,i)=>(gt(e,t,"access private method"),i);var _t=(e,t,i,n)=>({set _(r){ge(e,t,r,i)},get _(){return N(e,t,n)}});import{x as h,_ as _export_sfc,B as BreezeAuthenticatedLayout,r as resolveComponent,o as openBlock,c as createBlock,w as withCtx,e as createBaseVNode,a as createVNode,f as createTextVNode,t as toDisplayString,b as createElementBlock}from"./app-BMCubQSI.js";import{s as script}from"./fileupload.esm-BcaOjv2_.js";function getAugmentedNamespace$1(e){var t=e.default;if(typeof t=="function"){var i=function(){return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),i}var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch{try{return cachedSetTimeout.call(null,e,0)}catch{return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch{try{return cachedClearTimeout.call(null,e)}catch{return cachedClearTimeout.call(this,e)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];queue.push(new Item(e,t)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding$1(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance$1=global$1.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return new Date().getTime()};function hrtime(e){var t=performanceNow.call(performance$1)*.001,i=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(i=i-e[0],n=n-e[1],n<0&&(i--,n+=1e9)),[i,n]}var startTime=new Date;function uptime(){var e=new Date,t=e-startTime;return t/1e3}var browser$1={nextTick,title,browser,env,argv,version,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding:binding$1,cwd,chdir,umask,hrtime,platform,release,config,uptime},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=e.length;t<i;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup[45]=62,revLookup[95]=63}function toByteArray(e){inited||init();var t,i,n,r,u,f,g=e.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");u=e[g-2]==="="?2:e[g-1]==="="?1:0,f=new Arr(g*3/4-u),n=u>0?g-4:g;var T=0;for(t=0,i=0;t<n;t+=4,i+=3)r=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],f[T++]=r>>16&255,f[T++]=r>>8&255,f[T++]=r&255;return u===2?(r=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,f[T++]=r&255):u===1&&(r=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,f[T++]=r>>8&255,f[T++]=r&255),f}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,i){for(var n,r=[],u=t;u<i;u+=3)n=(e[u]<<16)+(e[u+1]<<8)+e[u+2],r.push(tripletToBase64(n));return r.join("")}function fromByteArray(e){inited||init();for(var t,i=e.length,n=i%3,r="",u=[],f=16383,g=0,T=i-n;g<T;g+=f)u.push(encodeChunk(e,g,g+f>T?T:g+f));return n===1?(t=e[i-1],r+=lookup[t>>2],r+=lookup[t<<4&63],r+="=="):n===2&&(t=(e[i-2]<<8)+e[i-1],r+=lookup[t>>10],r+=lookup[t>>4&63],r+=lookup[t<<2&63],r+="="),u.push(r),u.join("")}function read(e,t,i,n,r){var u,f,g=r*8-n-1,T=(1<<g)-1,o=T>>1,m=-7,M=i?r-1:0,C=i?-1:1,y=e[t+M];for(M+=C,u=y&(1<<-m)-1,y>>=-m,m+=g;m>0;u=u*256+e[t+M],M+=C,m-=8);for(f=u&(1<<-m)-1,u>>=-m,m+=n;m>0;f=f*256+e[t+M],M+=C,m-=8);if(u===0)u=1-o;else{if(u===T)return f?NaN:(y?-1:1)*(1/0);f=f+Math.pow(2,n),u=u-o}return(y?-1:1)*f*Math.pow(2,u-n)}function write(e,t,i,n,r,u){var f,g,T,o=u*8-r-1,m=(1<<o)-1,M=m>>1,C=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:u-1,d=n?1:-1,a=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(g=isNaN(t)?1:0,f=m):(f=Math.floor(Math.log(t)/Math.LN2),t*(T=Math.pow(2,-f))<1&&(f--,T*=2),f+M>=1?t+=C/T:t+=C*Math.pow(2,1-M),t*T>=2&&(f++,T/=2),f+M>=m?(g=0,f=m):f+M>=1?(g=(t*T-1)*Math.pow(2,r),f=f+M):(g=t*Math.pow(2,M-1)*Math.pow(2,r),f=0));r>=8;e[i+y]=g&255,y+=d,g/=256,r-=8);for(f=f<<r|g,o+=r;o>0;e[i+y]=f&255,y+=d,f/=256,o-=8);e[i+y-d]|=a*128}var toString={}.toString,isArray$2=Array.isArray||function(e){return toString.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=Buffer.prototype):(e===null&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,i){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(e,t,i);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,i)}Buffer.poolSize=8192;Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e};function from(e,t,i,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,i,n):typeof t=="string"?fromString(e,t,i):fromObject(e,t)}Buffer.from=function(e,t,i){return from(null,e,t,i)};Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array);function assertSize(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,i,n){return assertSize(t),t<=0?createBuffer(e,t):i!==void 0?typeof n=="string"?createBuffer(e,t).fill(i,n):createBuffer(e,t).fill(i):createBuffer(e,t)}Buffer.alloc=function(e,t,i){return alloc(null,e,t,i)};function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:checked(t)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)};Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)};function fromString(e,t,i){if((typeof i!="string"||i==="")&&(i="utf8"),!Buffer.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=byteLength(t,i)|0;e=createBuffer(e,n);var r=e.write(t,i);return r!==n&&(e=e.slice(0,r)),e}function fromArrayLike(e,t){var i=t.length<0?0:checked(t.length)|0;e=createBuffer(e,i);for(var n=0;n<i;n+=1)e[n]=t[n]&255;return e}function fromArrayBuffer(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return i===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,i):t=new Uint8Array(t,i,n),Buffer.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=Buffer.prototype):e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var i=checked(t.length)|0;return e=createBuffer(e,i),e.length===0||t.copy(e,0,0,i),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if(t.type==="Buffer"&&isArray$2(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return e|0}Buffer.isBuffer=isBuffer;function internalIsBuffer(e){return!!(e!=null&&e._isBuffer)}Buffer.compare=function(t,i){if(!internalIsBuffer(t)||!internalIsBuffer(i))throw new TypeError("Arguments must be Buffers");if(t===i)return 0;for(var n=t.length,r=i.length,u=0,f=Math.min(n,r);u<f;++u)if(t[u]!==i[u]){n=t[u],r=i[u];break}return n<r?-1:r<n?1:0};Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(t,i){if(!isArray$2(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Buffer.alloc(0);var n;if(i===void 0)for(i=0,n=0;n<t.length;++n)i+=t[n].length;var r=Buffer.allocUnsafe(i),u=0;for(n=0;n<t.length;++n){var f=t[n];if(!internalIsBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(r,u),u+=f.length}return r};function byteLength(e,t){if(internalIsBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var i=e.length;if(i===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return base64ToBytes(e).length;default:if(n)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),n=!0}}Buffer.byteLength=byteLength;function slowToString(e,t,i){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,i);case"utf8":case"utf-8":return utf8Slice(this,t,i);case"ascii":return asciiSlice(this,t,i);case"latin1":case"binary":return latin1Slice(this,t,i);case"base64":return base64Slice(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}Buffer.prototype._isBuffer=!0;function swap(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)swap(this,i,i+1);return this};Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this};Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this};Buffer.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?utf8Slice(this,0,t):slowToString.apply(this,arguments)};Buffer.prototype.equals=function(t){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Buffer.compare(this,t)===0};Buffer.prototype.inspect=function(){var t="",i=INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"};Buffer.prototype.compare=function(t,i,n,r,u){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");if(i===void 0&&(i=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),u===void 0&&(u=this.length),i<0||n>t.length||r<0||u>this.length)throw new RangeError("out of range index");if(r>=u&&i>=n)return 0;if(r>=u)return-1;if(i>=n)return 1;if(i>>>=0,n>>>=0,r>>>=0,u>>>=0,this===t)return 0;for(var f=u-r,g=n-i,T=Math.min(f,g),o=this.slice(r,u),m=t.slice(i,n),M=0;M<T;++M)if(o[M]!==m[M]){f=o[M],g=m[M];break}return f<g?-1:g<f?1:0};function bidirectionalIndexOf(e,t,i,n,r){if(e.length===0)return-1;if(typeof i=="string"?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0)if(r)i=0;else return-1;if(typeof t=="string"&&(t=Buffer.from(t,n)),internalIsBuffer(t))return t.length===0?-1:arrayIndexOf(e,t,i,n,r);if(typeof t=="number")return t=t&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):arrayIndexOf(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,i,n,r){var u=1,f=e.length,g=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;u=2,f/=2,g/=2,i/=2}function T(y,d){return u===1?y[d]:y.readUInt16BE(d*u)}var o;if(r){var m=-1;for(o=i;o<f;o++)if(T(e,o)===T(t,m===-1?0:o-m)){if(m===-1&&(m=o),o-m+1===g)return m*u}else m!==-1&&(o-=o-m),m=-1}else for(i+g>f&&(i=f-g),o=i;o>=0;o--){for(var M=!0,C=0;C<g;C++)if(T(e,o+C)!==T(t,C)){M=!1;break}if(M)return o}return-1}Buffer.prototype.includes=function(t,i,n){return this.indexOf(t,i,n)!==-1};Buffer.prototype.indexOf=function(t,i,n){return bidirectionalIndexOf(this,t,i,n,!0)};Buffer.prototype.lastIndexOf=function(t,i,n){return bidirectionalIndexOf(this,t,i,n,!1)};function hexWrite(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var u=t.length;if(u%2!==0)throw new TypeError("Invalid hex string");n>u/2&&(n=u/2);for(var f=0;f<n;++f){var g=parseInt(t.substr(f*2,2),16);if(isNaN(g))return f;e[i+f]=g}return f}function utf8Write(e,t,i,n){return blitBuffer(utf8ToBytes(t,e.length-i),e,i,n)}function asciiWrite(e,t,i,n){return blitBuffer(asciiToBytes(t),e,i,n)}function latin1Write(e,t,i,n){return asciiWrite(e,t,i,n)}function base64Write(e,t,i,n){return blitBuffer(base64ToBytes(t),e,i,n)}function ucs2Write(e,t,i,n){return blitBuffer(utf16leToBytes(t,e.length-i),e,i,n)}Buffer.prototype.write=function(t,i,n,r){if(i===void 0)r="utf8",n=this.length,i=0;else if(n===void 0&&typeof i=="string")r=i,n=this.length,i=0;else if(isFinite(i))i=i|0,isFinite(n)?(n=n|0,r===void 0&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var u=this.length-i;if((n===void 0||n>u)&&(n=u),t.length>0&&(n<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return hexWrite(this,t,i,n);case"utf8":case"utf-8":return utf8Write(this,t,i,n);case"ascii":return asciiWrite(this,t,i,n);case"latin1":case"binary":return latin1Write(this,t,i,n);case"base64":return base64Write(this,t,i,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,i,n);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(e,t,i){return t===0&&i===e.length?fromByteArray(e):fromByteArray(e.slice(t,i))}function utf8Slice(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var u=e[r],f=null,g=u>239?4:u>223?3:u>191?2:1;if(r+g<=i){var T,o,m,M;switch(g){case 1:u<128&&(f=u);break;case 2:T=e[r+1],(T&192)===128&&(M=(u&31)<<6|T&63,M>127&&(f=M));break;case 3:T=e[r+1],o=e[r+2],(T&192)===128&&(o&192)===128&&(M=(u&15)<<12|(T&63)<<6|o&63,M>2047&&(M<55296||M>57343)&&(f=M));break;case 4:T=e[r+1],o=e[r+2],m=e[r+3],(T&192)===128&&(o&192)===128&&(m&192)===128&&(M=(u&15)<<18|(T&63)<<12|(o&63)<<6|m&63,M>65535&&M<1114112&&(f=M))}}f===null?(f=65533,g=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|f&1023),n.push(f),r+=g}return decodeCodePointsArray(n)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return i}function asciiSlice(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]&127);return n}function latin1Slice(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function hexSlice(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",u=t;u<i;++u)r+=toHex(e[u]);return r}function utf16leSlice(e,t,i){for(var n=e.slice(t,i),r="",u=0;u<n.length;u+=2)r+=String.fromCharCode(n[u]+n[u+1]*256);return r}Buffer.prototype.slice=function(t,i){var n=this.length;t=~~t,i=i===void 0?n:~~i,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),i<0?(i+=n,i<0&&(i=0)):i>n&&(i=n),i<t&&(i=t);var r;if(Buffer.TYPED_ARRAY_SUPPORT)r=this.subarray(t,i),r.__proto__=Buffer.prototype;else{var u=i-t;r=new Buffer(u,void 0);for(var f=0;f<u;++f)r[f]=this[f+t]}return r};function checkOffset(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function(t,i,n){t=t|0,i=i|0,n||checkOffset(t,i,this.length);for(var r=this[t],u=1,f=0;++f<i&&(u*=256);)r+=this[t+f]*u;return r};Buffer.prototype.readUIntBE=function(t,i,n){t=t|0,i=i|0,n||checkOffset(t,i,this.length);for(var r=this[t+--i],u=1;i>0&&(u*=256);)r+=this[t+--i]*u;return r};Buffer.prototype.readUInt8=function(t,i){return i||checkOffset(t,1,this.length),this[t]};Buffer.prototype.readUInt16LE=function(t,i){return i||checkOffset(t,2,this.length),this[t]|this[t+1]<<8};Buffer.prototype.readUInt16BE=function(t,i){return i||checkOffset(t,2,this.length),this[t]<<8|this[t+1]};Buffer.prototype.readUInt32LE=function(t,i){return i||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Buffer.prototype.readUInt32BE=function(t,i){return i||checkOffset(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Buffer.prototype.readIntLE=function(t,i,n){t=t|0,i=i|0,n||checkOffset(t,i,this.length);for(var r=this[t],u=1,f=0;++f<i&&(u*=256);)r+=this[t+f]*u;return u*=128,r>=u&&(r-=Math.pow(2,8*i)),r};Buffer.prototype.readIntBE=function(t,i,n){t=t|0,i=i|0,n||checkOffset(t,i,this.length);for(var r=i,u=1,f=this[t+--r];r>0&&(u*=256);)f+=this[t+--r]*u;return u*=128,f>=u&&(f-=Math.pow(2,8*i)),f};Buffer.prototype.readInt8=function(t,i){return i||checkOffset(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Buffer.prototype.readInt16LE=function(t,i){i||checkOffset(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};Buffer.prototype.readInt16BE=function(t,i){i||checkOffset(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};Buffer.prototype.readInt32LE=function(t,i){return i||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Buffer.prototype.readInt32BE=function(t,i){return i||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Buffer.prototype.readFloatLE=function(t,i){return i||checkOffset(t,4,this.length),read(this,t,!0,23,4)};Buffer.prototype.readFloatBE=function(t,i){return i||checkOffset(t,4,this.length),read(this,t,!1,23,4)};Buffer.prototype.readDoubleLE=function(t,i){return i||checkOffset(t,8,this.length),read(this,t,!0,52,8)};Buffer.prototype.readDoubleBE=function(t,i){return i||checkOffset(t,8,this.length),read(this,t,!1,52,8)};function checkInt(e,t,i,n,r,u){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<u)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function(t,i,n,r){if(t=+t,i=i|0,n=n|0,!r){var u=Math.pow(2,8*n)-1;checkInt(this,t,i,n,u,0)}var f=1,g=0;for(this[i]=t&255;++g<n&&(f*=256);)this[i+g]=t/f&255;return i+n};Buffer.prototype.writeUIntBE=function(t,i,n,r){if(t=+t,i=i|0,n=n|0,!r){var u=Math.pow(2,8*n)-1;checkInt(this,t,i,n,u,0)}var f=n-1,g=1;for(this[i+f]=t&255;--f>=0&&(g*=256);)this[i+f]=t/g&255;return i+n};Buffer.prototype.writeUInt8=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=t&255,i+1};function objectWriteUInt16(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,u=Math.min(e.length-i,2);r<u;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>(n?r:1-r)*8}Buffer.prototype.writeUInt16LE=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8):objectWriteUInt16(this,t,i,!0),i+2};Buffer.prototype.writeUInt16BE=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=t&255):objectWriteUInt16(this,t,i,!1),i+2};function objectWriteUInt32(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,u=Math.min(e.length-i,4);r<u;++r)e[i+r]=t>>>(n?r:3-r)*8&255}Buffer.prototype.writeUInt32LE=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=t&255):objectWriteUInt32(this,t,i,!0),i+4};Buffer.prototype.writeUInt32BE=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255):objectWriteUInt32(this,t,i,!1),i+4};Buffer.prototype.writeIntLE=function(t,i,n,r){if(t=+t,i=i|0,!r){var u=Math.pow(2,8*n-1);checkInt(this,t,i,n,u-1,-u)}var f=0,g=1,T=0;for(this[i]=t&255;++f<n&&(g*=256);)t<0&&T===0&&this[i+f-1]!==0&&(T=1),this[i+f]=(t/g>>0)-T&255;return i+n};Buffer.prototype.writeIntBE=function(t,i,n,r){if(t=+t,i=i|0,!r){var u=Math.pow(2,8*n-1);checkInt(this,t,i,n,u-1,-u)}var f=n-1,g=1,T=0;for(this[i+f]=t&255;--f>=0&&(g*=256);)t<0&&T===0&&this[i+f+1]!==0&&(T=1),this[i+f]=(t/g>>0)-T&255;return i+n};Buffer.prototype.writeInt8=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[i]=t&255,i+1};Buffer.prototype.writeInt16LE=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8):objectWriteUInt16(this,t,i,!0),i+2};Buffer.prototype.writeInt16BE=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=t&255):objectWriteUInt16(this,t,i,!1),i+2};Buffer.prototype.writeInt32LE=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24):objectWriteUInt32(this,t,i,!0),i+4};Buffer.prototype.writeInt32BE=function(t,i,n){return t=+t,i=i|0,n||checkInt(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255):objectWriteUInt32(this,t,i,!1),i+4};function checkIEEE754(e,t,i,n,r,u){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function writeFloat(e,t,i,n,r){return r||checkIEEE754(e,t,i,4),write(e,t,i,n,23,4),i+4}Buffer.prototype.writeFloatLE=function(t,i,n){return writeFloat(this,t,i,!0,n)};Buffer.prototype.writeFloatBE=function(t,i,n){return writeFloat(this,t,i,!1,n)};function writeDouble(e,t,i,n,r){return r||checkIEEE754(e,t,i,8),write(e,t,i,n,52,8),i+8}Buffer.prototype.writeDoubleLE=function(t,i,n){return writeDouble(this,t,i,!0,n)};Buffer.prototype.writeDoubleBE=function(t,i,n){return writeDouble(this,t,i,!1,n)};Buffer.prototype.copy=function(t,i,n,r){if(n||(n=0),!r&&r!==0&&(r=this.length),i>=t.length&&(i=t.length),i||(i=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-i<r-n&&(r=t.length-i+n);var u=r-n,f;if(this===t&&n<i&&i<r)for(f=u-1;f>=0;--f)t[f+i]=this[f+n];else if(u<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<u;++f)t[f+i]=this[f+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+u),i);return u};Buffer.prototype.fill=function(t,i,n,r){if(typeof t=="string"){if(typeof i=="string"?(r=i,i=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var u=t.charCodeAt(0);u<256&&(t=u)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t=t&255);if(i<0||this.length<i||this.length<n)throw new RangeError("Out of range index");if(n<=i)return this;i=i>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var f;if(typeof t=="number")for(f=i;f<n;++f)this[f]=t;else{var g=internalIsBuffer(t)?t:utf8ToBytes(new Buffer(t,r).toString()),T=g.length;for(f=0;f<n-i;++f)this[f+i]=g[f%T]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if(e=stringtrim(e).replace(INVALID_BASE64_RE,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var i,n=e.length,r=null,u=[],f=0;f<n;++f){if(i=e.charCodeAt(f),i>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(f+1===n){(t-=3)>-1&&u.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&u.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(t-=3)>-1&&u.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;u.push(i)}else if(i<2048){if((t-=2)<0)break;u.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;u.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;u.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return u}function asciiToBytes(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i)&255);return t}function utf16leToBytes(e,t){for(var i,n,r,u=[],f=0;f<e.length&&!((t-=2)<0);++f)i=e.charCodeAt(f),n=i>>8,r=i%256,u.push(r),u.push(n);return u}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function isnan(e){return e!==e}function isBuffer(e){return e!=null&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isFastBuffer(e.slice(0,0))}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0$1=getAugmentedNamespace$1(_polyfillNode_fs$1),_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$1=getAugmentedNamespace$1(_nodeResolve_empty$1),domain;function EventHandlers(){}EventHandlers.prototype=Object.create(null);function EventEmitter(){EventEmitter.init.call(this)}EventEmitter.EventEmitter=EventEmitter;EventEmitter.usingDomains=!1;EventEmitter.prototype.domain=void 0;EventEmitter.prototype._events=void 0;EventEmitter.prototype._maxListeners=void 0;EventEmitter.defaultMaxListeners=10;EventEmitter.init=function(){this.domain=null,EventEmitter.usingDomains&&domain.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new EventHandlers,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function $getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)};function emitNone(e,t,i){if(t)e.call(i);else for(var n=e.length,r=arrayClone(e,n),u=0;u<n;++u)r[u].call(i)}function emitOne(e,t,i,n){if(t)e.call(i,n);else for(var r=e.length,u=arrayClone(e,r),f=0;f<r;++f)u[f].call(i,n)}function emitTwo(e,t,i,n,r){if(t)e.call(i,n,r);else for(var u=e.length,f=arrayClone(e,u),g=0;g<u;++g)f[g].call(i,n,r)}function emitThree(e,t,i,n,r,u){if(t)e.call(i,n,r,u);else for(var f=e.length,g=arrayClone(e,f),T=0;T<f;++T)g[T].call(i,n,r,u)}function emitMany(e,t,i,n){if(t)e.apply(i,n);else for(var r=e.length,u=arrayClone(e,r),f=0;f<r;++f)u[f].apply(i,n)}EventEmitter.prototype.emit=function(t){var i,n,r,u,f,g,T,o=t==="error";if(g=this._events,g)o=o&&g.error==null;else if(!o)return!1;if(T=this.domain,o){if(i=arguments[1],T)i||(i=new Error('Uncaught, unspecified "error" event')),i.domainEmitter=this,i.domain=T,i.domainThrown=!1,T.emit("error",i);else{if(i instanceof Error)throw i;var m=new Error('Uncaught, unspecified "error" event. ('+i+")");throw m.context=i,m}return!1}if(n=g[t],!n)return!1;var M=typeof n=="function";switch(r=arguments.length,r){case 1:emitNone(n,M,this);break;case 2:emitOne(n,M,this,arguments[1]);break;case 3:emitTwo(n,M,this,arguments[1],arguments[2]);break;case 4:emitThree(n,M,this,arguments[1],arguments[2],arguments[3]);break;default:for(u=new Array(r-1),f=1;f<r;f++)u[f-1]=arguments[f];emitMany(n,M,this,u)}return!0};function _addListener(e,t,i,n){var r,u,f;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(u=e._events,u?(u.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),u=e._events),f=u[t]):(u=e._events=new EventHandlers,e._eventsCount=0),!f)f=u[t]=i,++e._eventsCount;else if(typeof f=="function"?f=u[t]=n?[i,f]:[f,i]:n?f.unshift(i):f.push(i),!f.warned&&(r=$getMaxListeners(e),r&&r>0&&f.length>r)){f.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=e,g.type=t,g.count=f.length,emitWarning(g)}return e}function emitWarning(e){typeof console.warn=="function"?console.warn(e):console.log(e)}EventEmitter.prototype.addListener=function(t,i){return _addListener(this,t,i,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(t,i){return _addListener(this,t,i,!0)};function _onceWrap(e,t,i){var n=!1;function r(){e.removeListener(t,r),n||(n=!0,i.apply(e,arguments))}return r.listener=i,r}EventEmitter.prototype.once=function(t,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,_onceWrap(this,t,i)),this};EventEmitter.prototype.prependOnceListener=function(t,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_onceWrap(this,t,i)),this};EventEmitter.prototype.removeListener=function(t,i){var n,r,u,f,g;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(n=r[t],!n)return this;if(n===i||n.listener&&n.listener===i)--this._eventsCount===0?this._events=new EventHandlers:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||i));else if(typeof n!="function"){for(u=-1,f=n.length;f-- >0;)if(n[f]===i||n[f].listener&&n[f].listener===i){g=n[f].listener,u=f;break}if(u<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new EventHandlers,this;delete r[t]}else spliceOne(n,u);r.removeListener&&this.emit("removeListener",t,g||i)}return this};EventEmitter.prototype.off=function(e,t){return this.removeListener(e,t)};EventEmitter.prototype.removeAllListeners=function(t){var i,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new EventHandlers,this._eventsCount=0):n[t]&&(--this._eventsCount===0?this._events=new EventHandlers:delete n[t]),this;if(arguments.length===0){for(var r=Object.keys(n),u=0,f;u<r.length;++u)f=r[u],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=new EventHandlers,this._eventsCount=0,this}if(i=n[t],typeof i=="function")this.removeListener(t,i);else if(i)do this.removeListener(t,i[i.length-1]);while(i[0]);return this};EventEmitter.prototype.listeners=function(t){var i,n,r=this._events;return r?(i=r[t],i?typeof i=="function"?n=[i.listener||i]:n=unwrapListeners(i):n=[]):n=[],n};EventEmitter.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):listenerCount$1.call(e,t)};EventEmitter.prototype.listenerCount=listenerCount$1;function listenerCount$1(e){var t=this._events;if(t){var i=t[e];if(typeof i=="function")return 1;if(i)return i.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}function arrayClone(e,t){for(var i=new Array(t);t--;)i[t]=e[t];return i}function unwrapListeners(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}var inherits;typeof Object.create=="function"?inherits=function(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:inherits=function(t,i){t.super_=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t};var inherits$1=inherits,formatRegExp=/%[sdj%]/g;function format$1(e){if(!isString(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(inspect(arguments[i]));return t.join(" ")}for(var i=1,n=arguments,r=n.length,u=String(e).replace(formatRegExp,function(g){if(g==="%%")return"%";if(i>=r)return g;switch(g){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}default:return g}}),f=n[i];i<r;f=n[++i])isNull(f)||!isObject(f)?u+=" "+f:u+=" "+inspect(f);return u}function deprecate(e,t){if(isUndefined(global$1.process))return function(){return deprecate(e,t).apply(this,arguments)};if(browser$1.noDeprecation===!0)return e;var i=!1;function n(){if(!i){if(browser$1.throwDeprecation)throw new Error(t);browser$1.traceDeprecation?console.trace(t):console.error(t),i=!0}return e.apply(this,arguments)}return n}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=browser$1.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var t=0;debugs[e]=function(){var i=format$1.apply(null,arguments);console.error("%s %d: %s",e,t,i)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var i={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),isBoolean(t)?i.showHidden=t:t&&_extend(i,t),isUndefined(i.showHidden)&&(i.showHidden=!1),isUndefined(i.depth)&&(i.depth=2),isUndefined(i.colors)&&(i.colors=!1),isUndefined(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=stylizeWithColor),formatValue(i,e,i.depth)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(e,t){var i=inspect.styles[t];return i?"\x1B["+inspect.colors[i][0]+"m"+e+"\x1B["+inspect.colors[i][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(i,n){t[i]=!0}),t}function formatValue(e,t,i){if(e.customInspect&&t&&isFunction$1(t.inspect)&&t.inspect!==inspect&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(i,e);return isString(n)||(n=formatValue(e,n,i)),n}var r=formatPrimitive(e,t);if(r)return r;var u=Object.keys(t),f=arrayToHash(u);if(e.showHidden&&(u=Object.getOwnPropertyNames(t)),isError(t)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return formatError(t);if(u.length===0){if(isFunction$1(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var T="",o=!1,m=["{","}"];if(isArray$1(t)&&(o=!0,m=["[","]"]),isFunction$1(t)){var M=t.name?": "+t.name:"";T=" [Function"+M+"]"}if(isRegExp(t)&&(T=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(T=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(T=" "+formatError(t)),u.length===0&&(!o||t.length==0))return m[0]+T+m[1];if(i<0)return isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var C;return o?C=formatArray(e,t,i,f,u):C=u.map(function(y){return formatProperty(e,t,i,f,y,o)}),e.seen.pop(),reduceToSingleString(C,T,m)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(isNumber(t))return e.stylize(""+t,"number");if(isBoolean(t))return e.stylize(""+t,"boolean");if(isNull(t))return e.stylize("null","null")}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,i,n,r){for(var u=[],f=0,g=t.length;f<g;++f)hasOwnProperty$1(t,String(f))?u.push(formatProperty(e,t,i,n,String(f),!0)):u.push("");return r.forEach(function(T){T.match(/^\d+$/)||u.push(formatProperty(e,t,i,n,T,!0))}),u}function formatProperty(e,t,i,n,r,u){var f,g,T;if(T=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},T.get?T.set?g=e.stylize("[Getter/Setter]","special"):g=e.stylize("[Getter]","special"):T.set&&(g=e.stylize("[Setter]","special")),hasOwnProperty$1(n,r)||(f="["+r+"]"),g||(e.seen.indexOf(T.value)<0?(isNull(i)?g=formatValue(e,T.value,null):g=formatValue(e,T.value,i-1),g.indexOf(`
`)>-1&&(u?g=g.split(`
`).map(function(o){return"  "+o}).join(`
`).substr(2):g=`
`+g.split(`
`).map(function(o){return"   "+o}).join(`
`))):g=e.stylize("[Circular]","special")),isUndefined(f)){if(u&&r.match(/^\d+$/))return g;f=JSON.stringify(""+r),f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=e.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=e.stylize(f,"string"))}return f+": "+g}function reduceToSingleString(e,t,i){var n=e.reduce(function(r,u){return u.indexOf(`
`)>=0,r+u.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?i[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return typeof e=="boolean"}function isNull(e){return e===null}function isNullOrUndefined(e){return e==null}function isNumber(e){return typeof e=="number"}function isString(e){return typeof e=="string"}function isUndefined(e){return e===void 0}function isRegExp(e){return isObject(e)&&objectToString(e)==="[object RegExp]"}function isObject(e){return typeof e=="object"&&e!==null}function isDate(e){return isObject(e)&&objectToString(e)==="[object Date]"}function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}function isFunction$1(e){return typeof e=="function"}function objectToString(e){return Object.prototype.toString.call(e)}function _extend(e,t){if(!t||!isObject(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e}function hasOwnProperty$1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};BufferList.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i};BufferList.prototype.concat=function(e){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;for(var t=Buffer.allocUnsafe(e>>>0),i=this.head,n=0;i;)i.data.copy(t,n),n+=i.data.length,i=i.next;return t};var isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function StringDecoder(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0}StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var i=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";e=e.slice(i,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived),t+=e.toString(this.encoding,0,n);var n=t.length-1,r=t.charCodeAt(n);if(r>=55296&&r<=56319){var u=this.surrogateSize;return this.charLength+=u,this.charReceived+=u,this.charBuffer.copy(this.charBuffer,u,0,u),e.copy(this.charBuffer,0,0,u),t.substring(0,n)}return t};StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var i=e[e.length-t];if(t==1&&i>>5==6){this.charLength=2;break}if(t<=2&&i>>4==14){this.charLength=3;break}if(t<=3&&i>>3==30){this.charLength=4;break}}this.charReceived=t};StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var i=this.charReceived,n=this.charBuffer,r=this.encoding;t+=n.slice(0,i).toString(r)}return t};function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Readable.ReadableState=ReadableState;var debug=debuglog("stream");inherits$1(Readable,EventEmitter);function prependListener(e,t,i){if(typeof e.prependListener=="function")return e.prependListener(t,i);!e._events||!e._events[t]?e.on(t,i):Array.isArray(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]}function listenerCount(e,t){return e.listeners(t).length}function ReadableState(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),EventEmitter.call(this)}Readable.prototype.push=function(e,t){var i=this._readableState;return!i.objectMode&&typeof e=="string"&&(t=t||i.defaultEncoding,t!==i.encoding&&(e=Buffer.from(e,t),t="")),readableAddChunk(this,i,e,t,!1)};Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(e,t,i,n,r){var u=chunkInvalid(t,i);if(u)e.emit("error",u);else if(i===null)t.reading=!1,onEofChunk(e,t);else if(t.objectMode||i&&i.length>0)if(t.ended&&!r){var f=new Error("stream.push() after EOF");e.emit("error",f)}else if(t.endEmitted&&r){var g=new Error("stream.unshift() after end event");e.emit("error",g)}else{var T;t.decoder&&!r&&!n&&(i=t.decoder.write(i),T=!t.objectMode&&i.length===0),r||(t.reading=!1),T||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,r?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&emitReadable(e))),maybeReadMore(e,t)}else r||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}Readable.prototype.setEncoding=function(e){return this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?endReadable(this):emitReadable(this),null;if(e=howMuchToRead(e,t),e===0&&t.ended)return t.length===0&&endReadable(this),null;var n=t.needReadable;debug("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,debug("length less than watermark",n)),t.ended||t.reading?(n=!1,debug("reading or ended",n)):n&&(debug("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(i,t)));var r;return e>0?r=fromList(e,t):r=null,r===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&endReadable(this)),r!==null&&this.emit("data",r),r};function chunkInvalid(e,t){var i=null;return!Buffer.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(e,t){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,debug("pipe count=%d opts=%j",n.pipesCount,t);var r=!t||t.end!==!1,u=r?g:m;n.endEmitted?nextTick(u):i.once("end",u),e.on("unpipe",f);function f(E){debug("onunpipe"),E===i&&m()}function g(){debug("onend"),e.end()}var T=pipeOnDrain(i);e.on("drain",T);var o=!1;function m(){debug("cleanup"),e.removeListener("close",d),e.removeListener("finish",a),e.removeListener("drain",T),e.removeListener("error",y),e.removeListener("unpipe",f),i.removeListener("end",g),i.removeListener("end",m),i.removeListener("data",C),o=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&T()}var M=!1;i.on("data",C);function C(E){debug("ondata"),M=!1;var P=e.write(E);P===!1&&!M&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&indexOf(n.pipes,e)!==-1)&&!o&&(debug("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,M=!0),i.pause())}function y(E){debug("onerror",E),_(),e.removeListener("error",y),listenerCount(e,"error")===0&&e.emit("error",E)}prependListener(e,"error",y);function d(){e.removeListener("finish",a),_()}e.once("close",d);function a(){debug("onfinish"),e.removeListener("close",d),_()}e.once("finish",a);function _(){debug("unpipe"),i.unpipe(e)}return e.emit("pipe",i),n.flowing||(debug("pipe resume"),i.resume()),e};function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,flow(e))}}Readable.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<n;r++)i[r].emit("unpipe",this);return this}var u=indexOf(t.pipes,e);return u===-1?this:(t.pipes.splice(u,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};Readable.prototype.on=function(e,t){var i=EventEmitter.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&emitReadable(this):nextTick(nReadingNextTick,this))}return i};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this};function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&e.read()!==null;);}Readable.prototype.wrap=function(e){var t=this._readableState,i=!1,n=this;e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var f=t.decoder.end();f&&f.length&&n.push(f)}n.push(null)}),e.on("data",function(f){if(debug("wrapped data"),t.decoder&&(f=t.decoder.write(f)),!(t.objectMode&&f==null)&&!(!t.objectMode&&(!f||!f.length))){var g=n.push(f);g||(i=!0,e.pause())}});for(var r in e)this[r]===void 0&&typeof e[r]=="function"&&(this[r]=function(f){return function(){return e[f].apply(e,arguments)}}(r));var u=["error","close","destroy","pause","resume"];return forEach(u,function(f){e.on(f,n.emit.bind(n,f))}),n._read=function(f){debug("wrapped _read",f),i&&(i=!1,e.resume())},n};Readable._fromList=fromList;function fromList(e,t){if(t.length===0)return null;var i;return t.objectMode?i=t.buffer.shift():!e||e>=t.length?(t.decoder?i=t.buffer.join(""):t.buffer.length===1?i=t.buffer.head.data:i=t.buffer.concat(t.length),t.buffer.clear()):i=fromListPartial(e,t.buffer,t.decoder),i}function fromListPartial(e,t,i){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=i?copyFromBufferString(e,t):copyFromBuffer(e,t),n}function copyFromBufferString(e,t){var i=t.head,n=1,r=i.data;for(e-=r.length;i=i.next;){var u=i.data,f=e>u.length?u.length:e;if(f===u.length?r+=u:r+=u.slice(0,e),e-=f,e===0){f===u.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=u.slice(f));break}++n}return t.length-=n,r}function copyFromBuffer(e,t){var i=Buffer.allocUnsafe(e),n=t.head,r=1;for(n.data.copy(i),e-=n.data.length;n=n.next;){var u=n.data,f=e>u.length?u.length:e;if(u.copy(i,i.length-e,0,f),e-=f,e===0){f===u.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=u.slice(f));break}++r}return t.length-=r,i}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,nextTick(endReadableNT,t,e))}function endReadableNT(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function forEach(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)}function indexOf(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}Writable.WritableState=WritableState;inherits$1(Writable,EventEmitter);function nop(){}function WriteReq(e,t,i){this.chunk=e,this.encoding=t,this.callback=i,this.next=null}function WritableState(e,t){Object.defineProperty(this,"buffer",{get:deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){onwrite(t,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var t=this.bufferedRequest,i=[];t;)i.push(t),t=t.next;return i};function Writable(e){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(e,t){var i=new Error("write after end");e.emit("error",i),nextTick(t,i)}function validChunk(e,t,i,n){var r=!0,u=!1;return i===null?u=new TypeError("May not write null values to stream"):!Buffer.isBuffer(i)&&typeof i!="string"&&i!==void 0&&!t.objectMode&&(u=new TypeError("Invalid non-string/buffer chunk")),u&&(e.emit("error",u),nextTick(n,u),r=!1),r}Writable.prototype.write=function(e,t,i){var n=this._writableState,r=!1;return typeof t=="function"&&(i=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),typeof i!="function"&&(i=nop),n.ended?writeAfterEnd(this,i):validChunk(this,n,e,i)&&(n.pendingcb++,r=writeOrBuffer(this,n,e,t,i)),r};Writable.prototype.cork=function(){var e=this._writableState;e.corked++};Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&clearBuffer(this,e))};Writable.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function decodeChunk(e,t,i){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Buffer.from(t,i)),t}function writeOrBuffer(e,t,i,n,r){i=decodeChunk(t,i,n),Buffer.isBuffer(i)&&(n="buffer");var u=t.objectMode?1:i.length;t.length+=u;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var g=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(i,n,r),g?g.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,u,i,n,r);return f}function doWrite(e,t,i,n,r,u,f){t.writelen=n,t.writecb=f,t.writing=!0,t.sync=!0,i?e._writev(r,t.onwrite):e._write(r,u,t.onwrite),t.sync=!1}function onwriteError(e,t,i,n,r){--t.pendingcb,i?nextTick(r,n):r(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var i=e._writableState,n=i.sync,r=i.writecb;if(onwriteStateUpdate(i),t)onwriteError(e,i,n,t,r);else{var u=needFinish(i);!u&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&clearBuffer(e,i),n?nextTick(afterWrite,e,i,u,r):afterWrite(e,i,u,r)}}function afterWrite(e,t,i,n){i||onwriteDrain(e,t),t.pendingcb--,n(),finishMaybe(e,t)}function onwriteDrain(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,r=new Array(n),u=t.corkedRequestsFree;u.entry=i;for(var f=0;i;)r[f]=i,i=i.next,f+=1;doWrite(e,t,!0,t.length,r,"",u.finish),t.pendingcb++,t.lastBufferedRequest=null,u.next?(t.corkedRequestsFree=u.next,u.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;i;){var g=i.chunk,T=i.encoding,o=i.callback,m=t.objectMode?1:g.length;if(doWrite(e,t,!1,m,g,T,o),i=i.next,t.writing)break}i===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=i,t.bufferProcessing=!1}Writable.prototype._write=function(e,t,i){i(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,i){var n=this._writableState;typeof e=="function"?(i=e,e=null,t=null):typeof t=="function"&&(i=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&endWritable(this,n,i)};function needFinish(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var i=needFinish(t);return i&&(t.pendingcb===0?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),i}function endWritable(e,t,i){t.ending=!0,finishMaybe(e,t),i&&(t.finished?nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(i){var n=t.entry;for(t.entry=null;n;){var r=n.callback;e.pendingcb--,r(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}inherits$1(Duplex,Readable);var keys=Object.keys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||nextTick(onEndNT,this)}function onEndNT(e){e.end()}inherits$1(Transform,Duplex);function TransformState(e){this.afterTransform=function(t,i){return afterTransform(e,t,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(e,t,i){var n=e._transformState;n.transforming=!1;var r=n.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,i!=null&&e.push(i),r(t);var u=e._readableState;u.reading=!1,(u.needReadable||u.length<u.highWaterMark)&&e._read(u.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);Duplex.call(this,e),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(i){done(t,i)}):done(t)})}Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,t)};Transform.prototype._transform=function(e,t,i){throw new Error("Not implemented")};Transform.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}};Transform.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function done(e,t){if(t)return e.emit("error",t);var i=e._writableState,n=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}inherits$1(PassThrough,Transform);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform.call(this,e)}PassThrough.prototype._transform=function(e,t,i){i(null,e)};inherits$1(Stream,EventEmitter);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter.call(this)}Stream.prototype.pipe=function(e,t){var i=this;function n(m){e.writable&&e.write(m)===!1&&i.pause&&i.pause()}i.on("data",n);function r(){i.readable&&i.resume&&i.resume()}e.on("drain",r),!e._isStdio&&(!t||t.end!==!1)&&(i.on("end",f),i.on("close",g));var u=!1;function f(){u||(u=!0,e.end())}function g(){u||(u=!0,typeof e.destroy=="function"&&e.destroy())}function T(m){if(o(),EventEmitter.listenerCount(this,"error")===0)throw m}i.on("error",T),e.on("error",T);function o(){i.removeListener("data",n),e.removeListener("drain",r),i.removeListener("end",f),i.removeListener("close",g),i.removeListener("error",T),e.removeListener("error",T),i.removeListener("end",o),i.removeListener("close",o),e.removeListener("close",o)}return i.on("end",o),i.on("close",o),e.on("close",o),e.emit("pipe",i),e};var msg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function arraySet(e,t,i,n,r){if(t.subarray&&e.subarray){e.set(t.subarray(i,i+n),r);return}for(var u=0;u<n;u++)e[r+u]=t[i+u]}var Buf8=Uint8Array,Buf16=Uint16Array,Buf32=Int32Array,Z_FIXED$2=4,Z_BINARY$1=0,Z_TEXT$1=1,Z_UNKNOWN$2=2;function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,i,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,i){e.bi_valid>Buf_size-i?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=i-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function send_code(e,t,i){send_bits(e,i[t*2],i[t*2+1])}function bi_reverse(e,t){var i=0;do i|=e&1,e>>>=1,i<<=1;while(--t>0);return i>>>1}function bi_flush(e){e.bi_valid===16?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var i=t.dyn_tree,n=t.max_code,r=t.stat_desc.static_tree,u=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,T=t.stat_desc.max_length,o,m,M,C,y,d,a=0;for(C=0;C<=MAX_BITS$1;C++)e.bl_count[C]=0;for(i[e.heap[e.heap_max]*2+1]=0,o=e.heap_max+1;o<HEAP_SIZE$1;o++)m=e.heap[o],C=i[i[m*2+1]*2+1]+1,C>T&&(C=T,a++),i[m*2+1]=C,!(m>n)&&(e.bl_count[C]++,y=0,m>=g&&(y=f[m-g]),d=i[m*2],e.opt_len+=d*(C+y),u&&(e.static_len+=d*(r[m*2+1]+y)));if(a!==0){do{for(C=T-1;e.bl_count[C]===0;)C--;e.bl_count[C]--,e.bl_count[C+1]+=2,e.bl_count[T]--,a-=2}while(a>0);for(C=T;C!==0;C--)for(m=e.bl_count[C];m!==0;)M=e.heap[--o],!(M>n)&&(i[M*2+1]!==C&&(e.opt_len+=(C-i[M*2+1])*i[M*2],i[M*2+1]=C),m--)}}function gen_codes(e,t,i){var n=new Array(MAX_BITS$1+1),r=0,u,f;for(u=1;u<=MAX_BITS$1;u++)n[u]=r=r+i[u-1]<<1;for(f=0;f<=t;f++){var g=e[f*2+1];g!==0&&(e[f*2]=bi_reverse(n[g]++,g))}}function tr_static_init(){var e,t,i,n,r,u=new Array(MAX_BITS$1+1);for(i=0,n=0;n<LENGTH_CODES$1-1;n++)for(base_length[n]=i,e=0;e<1<<extra_lbits[n];e++)_length_code[i++]=n;for(_length_code[i-1]=n,r=0,n=0;n<16;n++)for(base_dist[n]=r,e=0;e<1<<extra_dbits[n];e++)_dist_code[r++]=n;for(r>>=7;n<D_CODES$1;n++)for(base_dist[n]=r<<7,e=0;e<1<<extra_dbits[n]-7;e++)_dist_code[256+r++]=n;for(t=0;t<=MAX_BITS$1;t++)u[t]=0;for(e=0;e<=143;)static_ltree[e*2+1]=8,e++,u[8]++;for(;e<=255;)static_ltree[e*2+1]=9,e++,u[9]++;for(;e<=279;)static_ltree[e*2+1]=7,e++,u[7]++;for(;e<=287;)static_ltree[e*2+1]=8,e++,u[8]++;for(gen_codes(static_ltree,L_CODES$1+1,u),e=0;e<D_CODES$1;e++)static_dtree[e*2+1]=5,static_dtree[e*2]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[t*2]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[t*2]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[t*2]=0;e.dyn_ltree[END_BLOCK*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,i,n){bi_windup(e),put_short(e,i),put_short(e,~i),arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function smaller(e,t,i,n){var r=t*2,u=i*2;return e[r]<e[u]||e[r]===e[u]&&n[t]<=n[i]}function pqdownheap(e,t,i){for(var n=e.heap[i],r=i<<1;r<=e.heap_len&&(r<e.heap_len&&smaller(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!smaller(t,n,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=n}function compress_block(e,t,i){var n,r,u=0,f,g;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+u*2]<<8|e.pending_buf[e.d_buf+u*2+1],r=e.pending_buf[e.l_buf+u],u++,n===0?send_code(e,r,t):(f=_length_code[r],send_code(e,f+LITERALS$1+1,t),g=extra_lbits[f],g!==0&&(r-=base_length[f],send_bits(e,r,g)),n--,f=d_code(n),send_code(e,f,i),g=extra_dbits[f],g!==0&&(n-=base_dist[f],send_bits(e,n,g)));while(u<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var i=t.dyn_tree,n=t.stat_desc.static_tree,r=t.stat_desc.has_stree,u=t.stat_desc.elems,f,g,T=-1,o;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,f=0;f<u;f++)i[f*2]!==0?(e.heap[++e.heap_len]=T=f,e.depth[f]=0):i[f*2+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=T<2?++T:0,i[o*2]=1,e.depth[o]=0,e.opt_len--,r&&(e.static_len-=n[o*2+1]);for(t.max_code=T,f=e.heap_len>>1;f>=1;f--)pqdownheap(e,i,f);o=u;do f=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,i,1),g=e.heap[1],e.heap[--e.heap_max]=f,e.heap[--e.heap_max]=g,i[o*2]=i[f*2]+i[g*2],e.depth[o]=(e.depth[f]>=e.depth[g]?e.depth[f]:e.depth[g])+1,i[f*2+1]=i[g*2+1]=o,e.heap[1]=o++,pqdownheap(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(i,T,e.bl_count)}function scan_tree(e,t,i){var n,r=-1,u,f=t[0*2+1],g=0,T=7,o=4;for(f===0&&(T=138,o=3),t[(i+1)*2+1]=65535,n=0;n<=i;n++)u=f,f=t[(n+1)*2+1],!(++g<T&&u===f)&&(g<o?e.bl_tree[u*2]+=g:u!==0?(u!==r&&e.bl_tree[u*2]++,e.bl_tree[REP_3_6*2]++):g<=10?e.bl_tree[REPZ_3_10*2]++:e.bl_tree[REPZ_11_138*2]++,g=0,r=u,f===0?(T=138,o=3):u===f?(T=6,o=3):(T=7,o=4))}function send_tree(e,t,i){var n,r=-1,u,f=t[0*2+1],g=0,T=7,o=4;for(f===0&&(T=138,o=3),n=0;n<=i;n++)if(u=f,f=t[(n+1)*2+1],!(++g<T&&u===f)){if(g<o)do send_code(e,u,e.bl_tree);while(--g!==0);else u!==0?(u!==r&&(send_code(e,u,e.bl_tree),g--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,g-3,2)):g<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,g-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,g-11,7));g=0,r=u,f===0?(T=138,o=3):u===f?(T=6,o=3):(T=7,o=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&e.bl_tree[bl_order[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,i,n){var r;for(send_bits(e,t-257,5),send_bits(e,i-1,5),send_bits(e,n-4,4),r=0;r<n;r++)send_bits(e,e.bl_tree[bl_order[r]*2+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,i-1)}function detect_data_type(e){var t=4093624447,i;for(i=0;i<=31;i++,t>>>=1)if(t&1&&e.dyn_ltree[i*2]!==0)return Z_BINARY$1;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Z_TEXT$1;for(i=32;i<LITERALS$1;i++)if(e.dyn_ltree[i*2]!==0)return Z_TEXT$1;return Z_BINARY$1}var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,i,n){send_bits(e,(STORED_BLOCK<<1)+(n?1:0),3),copy_block(e,t,i)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,i,n){var r,u,f=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$2&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),f=build_bl_tree(e),r=e.opt_len+3+7>>>3,u=e.static_len+3+7>>>3,u<=r&&(r=u)):r=u=i+5,i+4<=r&&t!==-1?_tr_stored_block(e,t,i,n):e.strategy===Z_FIXED$2||u===r?(send_bits(e,(STATIC_TREES<<1)+(n?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(n?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,f+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),n&&bi_windup(e)}function _tr_tally(e,t,i){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=i&255,e.last_lit++,t===0?e.dyn_ltree[i*2]++:(e.matches++,t--,e.dyn_ltree[(_length_code[i]+LITERALS$1+1)*2]++,e.dyn_dtree[d_code(t)*2]++),e.last_lit===e.lit_bufsize-1}function adler32(e,t,i,n){for(var r=e&65535|0,u=e>>>16&65535|0,f=0;i!==0;){f=i>2e3?2e3:i,i-=f;do r=r+t[n++]|0,u=u+r|0;while(--f);r%=65521,u%=65521}return r|u<<16|0}function makeTable(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[i]=e}return t}var crcTable=makeTable();function crc32(e,t,i,n){var r=crcTable,u=n+i;e^=-1;for(var f=n;f<u;f++)e=e>>>8^r[(e^t[f])&255];return e^-1}var Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH$1=1,Z_FULL_FLUSH$1=3,Z_FINISH$2=4,Z_BLOCK$2=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$2=-2,Z_DATA_ERROR$2=-3,Z_BUF_ERROR$2=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED$1=1,Z_HUFFMAN_ONLY$1=2,Z_RLE$1=3,Z_FIXED$1=4,Z_UNKNOWN$1=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(e,t){return e.msg=msg[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),i!==0&&(arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,t.pending===0&&(t.pending_out=0))}function flush_block_only(e,t){_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function read_buf(e,t,i,n){var r=e.avail_in;return r>n&&(r=n),r===0?0:(e.avail_in-=r,arraySet(t,e.input,e.next_in,r,i),e.state.wrap===1?e.adler=adler32(e.adler,t,r,i):e.state.wrap===2&&(e.adler=crc32(e.adler,t,r,i)),e.next_in+=r,e.total_in+=r,r)}function longest_match(e,t){var i=e.max_chain_length,n=e.strstart,r,u,f=e.prev_length,g=e.nice_match,T=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,o=e.window,m=e.w_mask,M=e.prev,C=e.strstart+MAX_MATCH,y=o[n+f-1],d=o[n+f];e.prev_length>=e.good_match&&(i>>=2),g>e.lookahead&&(g=e.lookahead);do if(r=t,!(o[r+f]!==d||o[r+f-1]!==y||o[r]!==o[n]||o[++r]!==o[n+1])){n+=2,r++;do;while(o[++n]===o[++r]&&o[++n]===o[++r]&&o[++n]===o[++r]&&o[++n]===o[++r]&&o[++n]===o[++r]&&o[++n]===o[++r]&&o[++n]===o[++r]&&o[++n]===o[++r]&&n<C);if(u=MAX_MATCH-(C-n),n=C-MAX_MATCH,u>f){if(e.match_start=t,f=u,u>=g)break;y=o[n+f-1],d=o[n+f]}}while((t=M[t&m])>T&&--i!==0);return f<=e.lookahead?f:e.lookahead}function fill_window(e){var t=e.w_size,i,n,r,u,f;do{if(u=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)){arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,i=n;do r=e.head[--i],e.head[i]=r>=t?r-t:0;while(--n);n=t,i=n;do r=e.prev[--i],e.prev[i]=r>=t?r-t:0;while(--n);u+=t}if(e.strm.avail_in===0)break;if(n=read_buf(e.strm,e.window,e.strstart+e.lookahead,u),e.lookahead+=n,e.lookahead+e.insert>=MIN_MATCH)for(f=e.strstart-e.insert,e.ins_h=e.window[f],e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+MIN_MATCH-1])&e.hash_mask,e.prev[f&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=f,f++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)}function deflate_stored(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),e.lookahead===0&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,flush_block_only(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(e,t){for(var i,n;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(i=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),i!==0&&e.strstart-i<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,i)),e.match_length>=MIN_MATCH)if(n=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var i,n,r;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(i=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,i!==0&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,i),e.match_length<=5&&(e.strategy===Z_FILTERED$1||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-MIN_MATCH,n=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}else if(e.match_available){if(n=_tr_tally(e,0,e.window[e.strstart-1]),n&&flush_block_only(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var i,n,r,u,f=e.window;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(r=e.strstart-1,n=f[r],n===f[++r]&&n===f[++r]&&n===f[++r])){u=e.strstart+MAX_MATCH;do;while(n===f[++r]&&n===f[++r]&&n===f[++r]&&n===f[++r]&&n===f[++r]&&n===f[++r]&&n===f[++r]&&n===f[++r]&&r<u);e.match_length=MAX_MATCH-(u-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(i=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var i;;){if(e.lookahead===0&&(fill_window(e),e.lookahead===0)){if(t===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(e.match_length=0,i=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,i,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=r}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(e){e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Buf16(HEAP_SIZE*2),this.dyn_dtree=new Buf16((2*D_CODES+1)*2),this.bl_tree=new Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Buf16(MAX_BITS+1),this.heap=new Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return!e||!e.state?err(e,Z_STREAM_ERROR$2):(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=t.wrap===2?0:1,t.last_flush=Z_NO_FLUSH$1,_tr_init(t),Z_OK$2)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK$2&&lm_init(e.state),t}function deflateInit2(e,t,i,n,r,u){if(!e)return Z_STREAM_ERROR$2;var f=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),n<0?(f=0,n=-n):n>15&&(f=2,n-=16),r<1||r>MAX_MEM_LEVEL||i!==Z_DEFLATED$2||n<8||n>15||t<0||t>9||u<0||u>Z_FIXED$1)return err(e,Z_STREAM_ERROR$2);n===8&&(n=9);var g=new DeflateState;return e.state=g,g.strm=e,g.wrap=f,g.gzhead=null,g.w_bits=n,g.w_size=1<<g.w_bits,g.w_mask=g.w_size-1,g.hash_bits=r+7,g.hash_size=1<<g.hash_bits,g.hash_mask=g.hash_size-1,g.hash_shift=~~((g.hash_bits+MIN_MATCH-1)/MIN_MATCH),g.window=new Buf8(g.w_size*2),g.head=new Buf16(g.hash_size),g.prev=new Buf16(g.w_size),g.lit_bufsize=1<<r+6,g.pending_buf_size=g.lit_bufsize*4,g.pending_buf=new Buf8(g.pending_buf_size),g.d_buf=1*g.lit_bufsize,g.l_buf=3*g.lit_bufsize,g.level=t,g.strategy=u,g.method=i,deflateReset(e)}function deflate$1(e,t){var i,n,r,u;if(!e||!e.state||t>Z_BLOCK$2||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===FINISH_STATE&&t!==Z_FINISH$2)return err(e,e.avail_out===0?Z_BUF_ERROR$2:Z_STREAM_ERROR$2);if(n.strm=e,i=n.last_flush,n.last_flush=t,n.status===INIT_STATE)if(n.wrap===2)e.adler=0,put_byte(n,31),put_byte(n,139),put_byte(n,8),n.gzhead?(put_byte(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),put_byte(n,n.gzhead.time&255),put_byte(n,n.gzhead.time>>8&255),put_byte(n,n.gzhead.time>>16&255),put_byte(n,n.gzhead.time>>24&255),put_byte(n,n.level===9?2:n.strategy>=Z_HUFFMAN_ONLY$1||n.level<2?4:0),put_byte(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(put_byte(n,n.gzhead.extra.length&255),put_byte(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=crc32(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=EXTRA_STATE):(put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,n.level===9?2:n.strategy>=Z_HUFFMAN_ONLY$1||n.level<2?4:0),put_byte(n,OS_CODE),n.status=BUSY_STATE);else{var f=Z_DEFLATED$2+(n.w_bits-8<<4)<<8,g=-1;n.strategy>=Z_HUFFMAN_ONLY$1||n.level<2?g=0:n.level<6?g=1:n.level===6?g=2:g=3,f|=g<<6,n.strstart!==0&&(f|=PRESET_DICT),f+=31-f%31,n.status=BUSY_STATE,putShortMSB(n,f),n.strstart!==0&&(putShortMSB(n,e.adler>>>16),putShortMSB(n,e.adler&65535)),e.adler=1}if(n.status===EXTRA_STATE)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=crc32(e.adler,n.pending_buf,n.pending-r,r)),flush_pending(e),r=n.pending,n.pending===n.pending_buf_size));)put_byte(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(e.adler=crc32(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=NAME_STATE)}else n.status=NAME_STATE;if(n.status===NAME_STATE)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=crc32(e.adler,n.pending_buf,n.pending-r,r)),flush_pending(e),r=n.pending,n.pending===n.pending_buf_size)){u=1;break}n.gzindex<n.gzhead.name.length?u=n.gzhead.name.charCodeAt(n.gzindex++)&255:u=0,put_byte(n,u)}while(u!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=crc32(e.adler,n.pending_buf,n.pending-r,r)),u===0&&(n.gzindex=0,n.status=COMMENT_STATE)}else n.status=COMMENT_STATE;if(n.status===COMMENT_STATE)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=crc32(e.adler,n.pending_buf,n.pending-r,r)),flush_pending(e),r=n.pending,n.pending===n.pending_buf_size)){u=1;break}n.gzindex<n.gzhead.comment.length?u=n.gzhead.comment.charCodeAt(n.gzindex++)&255:u=0,put_byte(n,u)}while(u!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=crc32(e.adler,n.pending_buf,n.pending-r,r)),u===0&&(n.status=HCRC_STATE)}else n.status=HCRC_STATE;if(n.status===HCRC_STATE&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&flush_pending(e),n.pending+2<=n.pending_buf_size&&(put_byte(n,e.adler&255),put_byte(n,e.adler>>8&255),e.adler=0,n.status=BUSY_STATE)):n.status=BUSY_STATE),n.pending!==0){if(flush_pending(e),e.avail_out===0)return n.last_flush=-1,Z_OK$2}else if(e.avail_in===0&&rank(t)<=rank(i)&&t!==Z_FINISH$2)return err(e,Z_BUF_ERROR$2);if(n.status===FINISH_STATE&&e.avail_in!==0)return err(e,Z_BUF_ERROR$2);if(e.avail_in!==0||n.lookahead!==0||t!==Z_NO_FLUSH$1&&n.status!==FINISH_STATE){var T=n.strategy===Z_HUFFMAN_ONLY$1?deflate_huff(n,t):n.strategy===Z_RLE$1?deflate_rle(n,t):configuration_table[n.level].func(n,t);if((T===BS_FINISH_STARTED||T===BS_FINISH_DONE)&&(n.status=FINISH_STATE),T===BS_NEED_MORE||T===BS_FINISH_STARTED)return e.avail_out===0&&(n.last_flush=-1),Z_OK$2;if(T===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH$1?_tr_align(n):t!==Z_BLOCK$2&&(_tr_stored_block(n,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),flush_pending(e),e.avail_out===0))return n.last_flush=-1,Z_OK$2}return t!==Z_FINISH$2?Z_OK$2:n.wrap<=0?Z_STREAM_END$2:(n.wrap===2?(put_byte(n,e.adler&255),put_byte(n,e.adler>>8&255),put_byte(n,e.adler>>16&255),put_byte(n,e.adler>>24&255),put_byte(n,e.total_in&255),put_byte(n,e.total_in>>8&255),put_byte(n,e.total_in>>16&255),put_byte(n,e.total_in>>24&255)):(putShortMSB(n,e.adler>>>16),putShortMSB(n,e.adler&65535)),flush_pending(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(e){var t;return!e||!e.state?Z_STREAM_ERROR$2:(t=e.state.status,t!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR$2):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$2))}var BAD$1=30,TYPE$1=12;function inflate_fast(e,t){var i,n,r,u,f,g,T,o,m,M,C,y,d,a,_,E,P,b,p,c,l,s,x,R,O;i=e.state,n=e.next_in,R=e.input,r=n+(e.avail_in-5),u=e.next_out,O=e.output,f=u-(t-e.avail_out),g=u+(e.avail_out-257),T=i.dmax,o=i.wsize,m=i.whave,M=i.wnext,C=i.window,y=i.hold,d=i.bits,a=i.lencode,_=i.distcode,E=(1<<i.lenbits)-1,P=(1<<i.distbits)-1;e:do{d<15&&(y+=R[n++]<<d,d+=8,y+=R[n++]<<d,d+=8),b=a[y&E];t:for(;;){if(p=b>>>24,y>>>=p,d-=p,p=b>>>16&255,p===0)O[u++]=b&65535;else if(p&16){c=b&65535,p&=15,p&&(d<p&&(y+=R[n++]<<d,d+=8),c+=y&(1<<p)-1,y>>>=p,d-=p),d<15&&(y+=R[n++]<<d,d+=8,y+=R[n++]<<d,d+=8),b=_[y&P];i:for(;;){if(p=b>>>24,y>>>=p,d-=p,p=b>>>16&255,p&16){if(l=b&65535,p&=15,d<p&&(y+=R[n++]<<d,d+=8,d<p&&(y+=R[n++]<<d,d+=8)),l+=y&(1<<p)-1,l>T){e.msg="invalid distance too far back",i.mode=BAD$1;break e}if(y>>>=p,d-=p,p=u-f,l>p){if(p=l-p,p>m&&i.sane){e.msg="invalid distance too far back",i.mode=BAD$1;break e}if(s=0,x=C,M===0){if(s+=o-p,p<c){c-=p;do O[u++]=C[s++];while(--p);s=u-l,x=O}}else if(M<p){if(s+=o+M-p,p-=M,p<c){c-=p;do O[u++]=C[s++];while(--p);if(s=0,M<c){p=M,c-=p;do O[u++]=C[s++];while(--p);s=u-l,x=O}}}else if(s+=M-p,p<c){c-=p;do O[u++]=C[s++];while(--p);s=u-l,x=O}for(;c>2;)O[u++]=x[s++],O[u++]=x[s++],O[u++]=x[s++],c-=3;c&&(O[u++]=x[s++],c>1&&(O[u++]=x[s++]))}else{s=u-l;do O[u++]=O[s++],O[u++]=O[s++],O[u++]=O[s++],c-=3;while(c>2);c&&(O[u++]=O[s++],c>1&&(O[u++]=O[s++]))}}else if(p&64){e.msg="invalid distance code",i.mode=BAD$1;break e}else{b=_[(b&65535)+(y&(1<<p)-1)];continue i}break}}else if(p&64)if(p&32){i.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",i.mode=BAD$1;break e}else{b=a[(b&65535)+(y&(1<<p)-1)];continue t}break}}while(n<r&&u<g);c=d>>3,n-=c,d-=c<<3,y&=(1<<d)-1,e.next_in=n,e.next_out=u,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=u<g?257+(g-u):257-(u-g),i.hold=y,i.bits=d}var MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function inflate_table(e,t,i,n,r,u,f,g){var T=g.bits,o=0,m=0,M=0,C=0,y=0,d=0,a=0,_=0,E=0,P=0,b,p,c,l,s,x=null,R=0,O,B=new Buf16(MAXBITS+1),ne=new Buf16(MAXBITS+1),he=null,ae=0,U,G,q;for(o=0;o<=MAXBITS;o++)B[o]=0;for(m=0;m<n;m++)B[t[i+m]]++;for(y=T,C=MAXBITS;C>=1&&B[C]===0;C--);if(y>C&&(y=C),C===0)return r[u++]=1<<24|64<<16|0,r[u++]=1<<24|64<<16|0,g.bits=1,0;for(M=1;M<C&&B[M]===0;M++);for(y<M&&(y=M),_=1,o=1;o<=MAXBITS;o++)if(_<<=1,_-=B[o],_<0)return-1;if(_>0&&(e===CODES$1||C!==1))return-1;for(ne[1]=0,o=1;o<MAXBITS;o++)ne[o+1]=ne[o]+B[o];for(m=0;m<n;m++)t[i+m]!==0&&(f[ne[t[i+m]]++]=m);if(e===CODES$1?(x=he=f,O=19):e===LENS$1?(x=lbase,R-=257,he=lext,ae-=257,O=256):(x=dbase,he=dext,O=-1),P=0,m=0,o=M,s=u,d=y,a=0,c=-1,E=1<<y,l=E-1,e===LENS$1&&E>ENOUGH_LENS$1||e===DISTS$1&&E>ENOUGH_DISTS$1)return 1;for(;;){U=o-a,f[m]<O?(G=0,q=f[m]):f[m]>O?(G=he[ae+f[m]],q=x[R+f[m]]):(G=96,q=0),b=1<<o-a,p=1<<d,M=p;do p-=b,r[s+(P>>a)+p]=U<<24|G<<16|q|0;while(p!==0);for(b=1<<o-1;P&b;)b>>=1;if(b!==0?(P&=b-1,P+=b):P=0,m++,--B[o]===0){if(o===C)break;o=t[i+f[m]]}if(o>y&&(P&l)!==c){for(a===0&&(a=y),s+=M,d=o-a,_=1<<d;d+a<C&&(_-=B[d+a],!(_<=0));)d++,_<<=1;if(E+=1<<d,e===LENS$1&&E>ENOUGH_LENS$1||e===DISTS$1&&E>ENOUGH_DISTS$1)return 1;c=P&l,r[c]=y<<24|d<<16|s-u|0}}return P!==0&&(r[s+P]=o-a<<24|64<<16|0),g.bits=y,0}var CODES=0,LENS=1,DISTS=2,Z_FINISH$1=4,Z_BLOCK$1=5,Z_TREES$1=6,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$1=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Buf16(320),this.work=new Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1)}function inflateReset(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e))}function inflateReset2(e,t){var i,n;return!e||!e.state||(n=e.state,t<0?(i=0,t=-t):(i=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Z_STREAM_ERROR$1:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,inflateReset(e))}function inflateInit2(e,t){var i,n;return e?(n=new InflateState,e.state=n,n.window=null,i=inflateReset2(e,t),i!==Z_OK$1&&(e.state=null),i):Z_STREAM_ERROR$1}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new Buf32(512),distfix=new Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,i,n){var r,u=e.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Buf8(u.wsize)),n>=u.wsize?(arraySet(u.window,t,i-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(r=u.wsize-u.wnext,r>n&&(r=n),arraySet(u.window,t,i-n,r,u.wnext),n-=r,n?(arraySet(u.window,t,i-n,n,0),u.wnext=n,u.whave=u.wsize):(u.wnext+=r,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=r))),0}function inflate$1(e,t){var i,n,r,u,f,g,T,o,m,M,C,y,d,a,_=0,E,P,b,p,c,l,s,x,R=new Buf8(4),O,B,ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;i=e.state,i.mode===TYPE&&(i.mode=TYPEDO),f=e.next_out,r=e.output,T=e.avail_out,u=e.next_in,n=e.input,g=e.avail_in,o=i.hold,m=i.bits,M=g,C=T,x=Z_OK$1;e:for(;;)switch(i.mode){case HEAD:if(i.wrap===0){i.mode=TYPEDO;break}for(;m<16;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(i.wrap&2&&o===35615){i.check=0,R[0]=o&255,R[1]=o>>>8&255,i.check=crc32(i.check,R,2,0),o=0,m=0,i.mode=FLAGS;break}if(i.flags=0,i.head&&(i.head.done=!1),!(i.wrap&1)||(((o&255)<<8)+(o>>8))%31){e.msg="incorrect header check",i.mode=BAD;break}if((o&15)!==Z_DEFLATED$1){e.msg="unknown compression method",i.mode=BAD;break}if(o>>>=4,m-=4,s=(o&15)+8,i.wbits===0)i.wbits=s;else if(s>i.wbits){e.msg="invalid window size",i.mode=BAD;break}i.dmax=1<<s,e.adler=i.check=1,i.mode=o&512?DICTID:TYPE,o=0,m=0;break;case FLAGS:for(;m<16;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(i.flags=o,(i.flags&255)!==Z_DEFLATED$1){e.msg="unknown compression method",i.mode=BAD;break}if(i.flags&57344){e.msg="unknown header flags set",i.mode=BAD;break}i.head&&(i.head.text=o>>8&1),i.flags&512&&(R[0]=o&255,R[1]=o>>>8&255,i.check=crc32(i.check,R,2,0)),o=0,m=0,i.mode=TIME;case TIME:for(;m<32;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}i.head&&(i.head.time=o),i.flags&512&&(R[0]=o&255,R[1]=o>>>8&255,R[2]=o>>>16&255,R[3]=o>>>24&255,i.check=crc32(i.check,R,4,0)),o=0,m=0,i.mode=OS;case OS:for(;m<16;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}i.head&&(i.head.xflags=o&255,i.head.os=o>>8),i.flags&512&&(R[0]=o&255,R[1]=o>>>8&255,i.check=crc32(i.check,R,2,0)),o=0,m=0,i.mode=EXLEN;case EXLEN:if(i.flags&1024){for(;m<16;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}i.length=o,i.head&&(i.head.extra_len=o),i.flags&512&&(R[0]=o&255,R[1]=o>>>8&255,i.check=crc32(i.check,R,2,0)),o=0,m=0}else i.head&&(i.head.extra=null);i.mode=EXTRA;case EXTRA:if(i.flags&1024&&(y=i.length,y>g&&(y=g),y&&(i.head&&(s=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),arraySet(i.head.extra,n,u,y,s)),i.flags&512&&(i.check=crc32(i.check,n,y,u)),g-=y,u+=y,i.length-=y),i.length))break e;i.length=0,i.mode=NAME;case NAME:if(i.flags&2048){if(g===0)break e;y=0;do s=n[u+y++],i.head&&s&&i.length<65536&&(i.head.name+=String.fromCharCode(s));while(s&&y<g);if(i.flags&512&&(i.check=crc32(i.check,n,y,u)),g-=y,u+=y,s)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=COMMENT;case COMMENT:if(i.flags&4096){if(g===0)break e;y=0;do s=n[u+y++],i.head&&s&&i.length<65536&&(i.head.comment+=String.fromCharCode(s));while(s&&y<g);if(i.flags&512&&(i.check=crc32(i.check,n,y,u)),g-=y,u+=y,s)break e}else i.head&&(i.head.comment=null);i.mode=HCRC;case HCRC:if(i.flags&512){for(;m<16;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(o!==(i.check&65535)){e.msg="header crc mismatch",i.mode=BAD;break}o=0,m=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=TYPE;break;case DICTID:for(;m<32;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}e.adler=i.check=zswap32(o),o=0,m=0,i.mode=DICT;case DICT:if(i.havedict===0)return e.next_out=f,e.avail_out=T,e.next_in=u,e.avail_in=g,i.hold=o,i.bits=m,Z_NEED_DICT$1;e.adler=i.check=1,i.mode=TYPE;case TYPE:if(t===Z_BLOCK$1||t===Z_TREES$1)break e;case TYPEDO:if(i.last){o>>>=m&7,m-=m&7,i.mode=CHECK;break}for(;m<3;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}switch(i.last=o&1,o>>>=1,m-=1,o&3){case 0:i.mode=STORED;break;case 1:if(fixedtables(i),i.mode=LEN_,t===Z_TREES$1){o>>>=2,m-=2;break e}break;case 2:i.mode=TABLE;break;case 3:e.msg="invalid block type",i.mode=BAD}o>>>=2,m-=2;break;case STORED:for(o>>>=m&7,m-=m&7;m<32;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if((o&65535)!==(o>>>16^65535)){e.msg="invalid stored block lengths",i.mode=BAD;break}if(i.length=o&65535,o=0,m=0,i.mode=COPY_,t===Z_TREES$1)break e;case COPY_:i.mode=COPY;case COPY:if(y=i.length,y){if(y>g&&(y=g),y>T&&(y=T),y===0)break e;arraySet(r,n,u,y,f),g-=y,u+=y,T-=y,f+=y,i.length-=y;break}i.mode=TYPE;break;case TABLE:for(;m<14;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(i.nlen=(o&31)+257,o>>>=5,m-=5,i.ndist=(o&31)+1,o>>>=5,m-=5,i.ncode=(o&15)+4,o>>>=4,m-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=BAD;break}i.have=0,i.mode=LENLENS;case LENLENS:for(;i.have<i.ncode;){for(;m<3;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}i.lens[ne[i.have++]]=o&7,o>>>=3,m-=3}for(;i.have<19;)i.lens[ne[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,O={bits:i.lenbits},x=inflate_table(CODES,i.lens,0,19,i.lencode,0,i.work,O),i.lenbits=O.bits,x){e.msg="invalid code lengths set",i.mode=BAD;break}i.have=0,i.mode=CODELENS;case CODELENS:for(;i.have<i.nlen+i.ndist;){for(;_=i.lencode[o&(1<<i.lenbits)-1],E=_>>>24,P=_>>>16&255,b=_&65535,!(E<=m);){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(b<16)o>>>=E,m-=E,i.lens[i.have++]=b;else{if(b===16){for(B=E+2;m<B;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(o>>>=E,m-=E,i.have===0){e.msg="invalid bit length repeat",i.mode=BAD;break}s=i.lens[i.have-1],y=3+(o&3),o>>>=2,m-=2}else if(b===17){for(B=E+3;m<B;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}o>>>=E,m-=E,s=0,y=3+(o&7),o>>>=3,m-=3}else{for(B=E+7;m<B;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}o>>>=E,m-=E,s=0,y=11+(o&127),o>>>=7,m-=7}if(i.have+y>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=BAD;break}for(;y--;)i.lens[i.have++]=s}}if(i.mode===BAD)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=BAD;break}if(i.lenbits=9,O={bits:i.lenbits},x=inflate_table(LENS,i.lens,0,i.nlen,i.lencode,0,i.work,O),i.lenbits=O.bits,x){e.msg="invalid literal/lengths set",i.mode=BAD;break}if(i.distbits=6,i.distcode=i.distdyn,O={bits:i.distbits},x=inflate_table(DISTS,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,O),i.distbits=O.bits,x){e.msg="invalid distances set",i.mode=BAD;break}if(i.mode=LEN_,t===Z_TREES$1)break e;case LEN_:i.mode=LEN;case LEN:if(g>=6&&T>=258){e.next_out=f,e.avail_out=T,e.next_in=u,e.avail_in=g,i.hold=o,i.bits=m,inflate_fast(e,C),f=e.next_out,r=e.output,T=e.avail_out,u=e.next_in,n=e.input,g=e.avail_in,o=i.hold,m=i.bits,i.mode===TYPE&&(i.back=-1);break}for(i.back=0;_=i.lencode[o&(1<<i.lenbits)-1],E=_>>>24,P=_>>>16&255,b=_&65535,!(E<=m);){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(P&&!(P&240)){for(p=E,c=P,l=b;_=i.lencode[l+((o&(1<<p+c)-1)>>p)],E=_>>>24,P=_>>>16&255,b=_&65535,!(p+E<=m);){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}o>>>=p,m-=p,i.back+=p}if(o>>>=E,m-=E,i.back+=E,i.length=b,P===0){i.mode=LIT;break}if(P&32){i.back=-1,i.mode=TYPE;break}if(P&64){e.msg="invalid literal/length code",i.mode=BAD;break}i.extra=P&15,i.mode=LENEXT;case LENEXT:if(i.extra){for(B=i.extra;m<B;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}i.length+=o&(1<<i.extra)-1,o>>>=i.extra,m-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=DIST;case DIST:for(;_=i.distcode[o&(1<<i.distbits)-1],E=_>>>24,P=_>>>16&255,b=_&65535,!(E<=m);){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(!(P&240)){for(p=E,c=P,l=b;_=i.distcode[l+((o&(1<<p+c)-1)>>p)],E=_>>>24,P=_>>>16&255,b=_&65535,!(p+E<=m);){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}o>>>=p,m-=p,i.back+=p}if(o>>>=E,m-=E,i.back+=E,P&64){e.msg="invalid distance code",i.mode=BAD;break}i.offset=b,i.extra=P&15,i.mode=DISTEXT;case DISTEXT:if(i.extra){for(B=i.extra;m<B;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}i.offset+=o&(1<<i.extra)-1,o>>>=i.extra,m-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=BAD;break}i.mode=MATCH;case MATCH:if(T===0)break e;if(y=C-T,i.offset>y){if(y=i.offset-y,y>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=BAD;break}y>i.wnext?(y-=i.wnext,d=i.wsize-y):d=i.wnext-y,y>i.length&&(y=i.length),a=i.window}else a=r,d=f-i.offset,y=i.length;y>T&&(y=T),T-=y,i.length-=y;do r[f++]=a[d++];while(--y);i.length===0&&(i.mode=LEN);break;case LIT:if(T===0)break e;r[f++]=i.length,T--,i.mode=LEN;break;case CHECK:if(i.wrap){for(;m<32;){if(g===0)break e;g--,o|=n[u++]<<m,m+=8}if(C-=T,e.total_out+=C,i.total+=C,C&&(e.adler=i.check=i.flags?crc32(i.check,r,C,f-C):adler32(i.check,r,C,f-C)),C=T,(i.flags?o:zswap32(o))!==i.check){e.msg="incorrect data check",i.mode=BAD;break}o=0,m=0}i.mode=LENGTH;case LENGTH:if(i.wrap&&i.flags){for(;m<32;){if(g===0)break e;g--,o+=n[u++]<<m,m+=8}if(o!==(i.total&4294967295)){e.msg="incorrect length check",i.mode=BAD;break}o=0,m=0}i.mode=DONE;case DONE:x=Z_STREAM_END$1;break e;case BAD:x=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=f,e.avail_out=T,e.next_in=u,e.avail_in=g,i.hold=o,i.bits=m,(i.wsize||C!==e.avail_out&&i.mode<BAD&&(i.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,C-e.avail_out),M-=e.avail_in,C-=e.avail_out,e.total_in+=M,e.total_out+=C,i.total+=C,i.wrap&&C&&(e.adler=i.check=i.flags?crc32(i.check,r,C,e.next_out-C):adler32(i.check,r,C,e.next_out-C)),e.data_type=i.bits+(i.last?64:0)+(i.mode===TYPE?128:0)+(i.mode===LEN_||i.mode===COPY_?256:0),(M===0&&C===0||t===Z_FINISH$1)&&x===Z_OK$1&&(x=Z_BUF_ERROR$1),x}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1}var NONE=0,DEFLATE=1,INFLATE=2,GZIP=3,GUNZIP=4,DEFLATERAW=5,INFLATERAW=6,UNZIP=7,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_SYNC_FLUSH=2,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_ERRNO=-1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_NO_COMPRESSION=0,Z_BEST_SPEED=1,Z_BEST_COMPRESSION=9,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,Z_DEFLATED=8;function Zlib$1(e){if(e<DEFLATE||e>UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Zlib$1.prototype.init=function(e,t,i,n,r){this.windowBits=e,this.level=t,this.memLevel=i,this.strategy=n,(this.mode===GZIP||this.mode===GUNZIP)&&(this.windowBits+=16),this.mode===UNZIP&&(this.windowBits+=32),(this.mode===DEFLATERAW||this.mode===INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new ZStream;var u;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:u=deflateInit2(this.strm,this.level,Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case INFLATE:case GUNZIP:case INFLATERAW:case UNZIP:u=inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(u!==Z_OK){this._error(u);return}this.write_in_progress=!1,this.init_done=!0};Zlib$1.prototype.params=function(){throw new Error("deflateParams Not supported")};Zlib$1.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Zlib$1.prototype.write=function(e,t,i,n,r,u,f){this._writeCheck(),this.write_in_progress=!0;var g=this;return browser$1.nextTick(function(){g.write_in_progress=!1;var T=g._write(e,t,i,n,r,u,f);g.callback(T[0],T[1]),g.pending_close&&g.close()}),this};function bufferSet(e,t){for(var i=0;i<e.length;i++)this[t+i]=e[i]}Zlib$1.prototype.writeSync=function(e,t,i,n,r,u,f){return this._writeCheck(),this._write(e,t,i,n,r,u,f)};Zlib$1.prototype._write=function(e,t,i,n,r,u,f){if(this.write_in_progress=!0,e!==Z_NO_FLUSH&&e!==Z_PARTIAL_FLUSH&&e!==Z_SYNC_FLUSH&&e!==Z_FULL_FLUSH&&e!==Z_FINISH&&e!==Z_BLOCK)throw new Error("Invalid flush value");t==null&&(t=new Buffer(0),n=0,i=0),r._set?r.set=r._set:r.set=bufferSet;var g=this.strm;g.avail_in=n,g.input=t,g.next_in=i,g.avail_out=f,g.output=r,g.next_out=u;var T;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:T=deflate$1(g,e);break;case UNZIP:case INFLATE:case GUNZIP:case INFLATERAW:T=inflate$1(g,e);break;default:throw new Error("Unknown mode "+this.mode)}return T!==Z_STREAM_END&&T!==Z_OK&&this._error(T),this.write_in_progress=!1,[g.avail_in,g.avail_out]};Zlib$1.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===DEFLATE||this.mode===GZIP||this.mode===DEFLATERAW?deflateEnd(this.strm):inflateEnd(this.strm),this.mode=NONE};var status;Zlib$1.prototype.reset=function(){switch(this.mode){case DEFLATE:case DEFLATERAW:status=deflateReset(this.strm);break;case INFLATE:case INFLATERAW:status=inflateReset(this.strm);break}status!==Z_OK&&this._error(status)};Zlib$1.prototype._error=function(e){this.onerror(msg[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var _binding=Object.freeze({__proto__:null,NONE,DEFLATE,INFLATE,GZIP,GUNZIP,DEFLATERAW,INFLATERAW,UNZIP,Z_NO_FLUSH,Z_PARTIAL_FLUSH,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH,Z_BLOCK,Z_TREES,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_ERRNO,Z_STREAM_ERROR,Z_DATA_ERROR,Z_BUF_ERROR,Z_NO_COMPRESSION,Z_BEST_SPEED,Z_BEST_COMPRESSION,Z_DEFAULT_COMPRESSION,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY,Z_BINARY,Z_TEXT,Z_UNKNOWN,Z_DEFLATED,Zlib:Zlib$1});function assert(e,t){if(!e)throw new Error(t)}var binding={};Object.keys(_binding).forEach(function(e){binding[e]=_binding[e]});binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=1/0;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};Object.keys(codes).forEach(function(e){codes[codes[e]]=e});function createDeflate(e){return new Deflate(e)}function createInflate(e){return new Inflate(e)}function createDeflateRaw(e){return new DeflateRaw(e)}function createInflateRaw(e){return new InflateRaw(e)}function createGzip(e){return new Gzip(e)}function createGunzip(e){return new Gunzip(e)}function createUnzip(e){return new Unzip(e)}function deflate(e,t,i){return typeof t=="function"&&(i=t,t={}),zlibBuffer(new Deflate(t),e,i)}function deflateSync(e,t){return zlibBufferSync(new Deflate(t),e)}function gzip(e,t,i){return typeof t=="function"&&(i=t,t={}),zlibBuffer(new Gzip(t),e,i)}function gzipSync(e,t){return zlibBufferSync(new Gzip(t),e)}function deflateRaw(e,t,i){return typeof t=="function"&&(i=t,t={}),zlibBuffer(new DeflateRaw(t),e,i)}function deflateRawSync(e,t){return zlibBufferSync(new DeflateRaw(t),e)}function unzip(e,t,i){return typeof t=="function"&&(i=t,t={}),zlibBuffer(new Unzip(t),e,i)}function unzipSync(e,t){return zlibBufferSync(new Unzip(t),e)}function inflate(e,t,i){return typeof t=="function"&&(i=t,t={}),zlibBuffer(new Inflate(t),e,i)}function inflateSync(e,t){return zlibBufferSync(new Inflate(t),e)}function gunzip(e,t,i){return typeof t=="function"&&(i=t,t={}),zlibBuffer(new Gunzip(t),e,i)}function gunzipSync(e,t){return zlibBufferSync(new Gunzip(t),e)}function inflateRaw(e,t,i){return typeof t=="function"&&(i=t,t={}),zlibBuffer(new InflateRaw(t),e,i)}function inflateRawSync(e,t){return zlibBufferSync(new InflateRaw(t),e)}function zlibBuffer(e,t,i){var n=[],r=0;e.on("error",f),e.on("end",g),e.end(t),u();function u(){for(var T;(T=e.read())!==null;)n.push(T),r+=T.length;e.once("readable",u)}function f(T){e.removeListener("end",g),e.removeListener("readable",u),i(T)}function g(){var T=Buffer.concat(n,r);n=[],i(null,T),e.close()}}function zlibBufferSync(e,t){if(typeof t=="string"&&(t=new Buffer(t)),!Buffer.isBuffer(t))throw new TypeError("Not a string or buffer");var i=binding.Z_FINISH;return e._processChunk(t,i)}function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);Zlib.call(this,e,binding.DEFLATE)}function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);Zlib.call(this,e,binding.INFLATE)}function Gzip(e){if(!(this instanceof Gzip))return new Gzip(e);Zlib.call(this,e,binding.GZIP)}function Gunzip(e){if(!(this instanceof Gunzip))return new Gunzip(e);Zlib.call(this,e,binding.GUNZIP)}function DeflateRaw(e){if(!(this instanceof DeflateRaw))return new DeflateRaw(e);Zlib.call(this,e,binding.DEFLATERAW)}function InflateRaw(e){if(!(this instanceof InflateRaw))return new InflateRaw(e);Zlib.call(this,e,binding.INFLATERAW)}function Unzip(e){if(!(this instanceof Unzip))return new Unzip(e);Zlib.call(this,e,binding.UNZIP)}function Zlib(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||binding.Z_DEFAULT_CHUNK,Transform.call(this,e),e.flush&&e.flush!==binding.Z_NO_FLUSH&&e.flush!==binding.Z_PARTIAL_FLUSH&&e.flush!==binding.Z_SYNC_FLUSH&&e.flush!==binding.Z_FULL_FLUSH&&e.flush!==binding.Z_FINISH&&e.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<binding.Z_MIN_CHUNK||e.chunkSize>binding.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<binding.Z_MIN_WINDOWBITS||e.windowBits>binding.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<binding.Z_MIN_LEVEL||e.level>binding.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<binding.Z_MIN_MEMLEVEL||e.memLevel>binding.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=binding.Z_FILTERED&&e.strategy!=binding.Z_HUFFMAN_ONLY&&e.strategy!=binding.Z_RLE&&e.strategy!=binding.Z_FIXED&&e.strategy!=binding.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(t);var i=this;this._hadError=!1,this._binding.onerror=function(u,f){i._binding=null,i._hadError=!0;var g=new Error(u);g.errno=f,g.code=binding.codes[f],i.emit("error",g)};var n=binding.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(n=e.level);var r=binding.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(r=e.strategy),this._binding.init(e.windowBits||binding.Z_DEFAULT_WINDOWBITS,n,e.memLevel||binding.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=r,this.once("end",this.close)}inherits$1(Zlib,Transform);Zlib.prototype.params=function(e,t,i){if(e<binding.Z_MIN_LEVEL||e>binding.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=binding.Z_FILTERED&&t!=binding.Z_HUFFMAN_ONLY&&t!=binding.Z_RLE&&t!=binding.Z_FIXED&&t!=binding.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(binding.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,i&&i())})}else browser$1.nextTick(i)};Zlib.prototype.reset=function(){return this._binding.reset()};Zlib.prototype._flush=function(e){this._transform(new Buffer(0),"",e)};Zlib.prototype.flush=function(e,t){var i=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=binding.Z_FULL_FLUSH),i.ended)t&&browser$1.nextTick(t);else if(i.ending)t&&this.once("end",t);else if(i.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new Buffer(0),"",t)};Zlib.prototype.close=function(e){if(e&&browser$1.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;browser$1.nextTick(function(){t.emit("close")})}};Zlib.prototype._transform=function(e,t,i){var n,r=this._writableState,u=r.ending||r.ended,f=u&&(!e||r.length===e.length);if(!e===null&&!Buffer.isBuffer(e))return i(new Error("invalid input"));f?n=binding.Z_FINISH:(n=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH)),this._processChunk(e,n,i)};Zlib.prototype._processChunk=function(e,t,i){var n=e&&e.length,r=this._chunkSize-this._offset,u=0,f=this,g=typeof i=="function";if(!g){var T=[],o=0,m;this.on("error",function(a){m=a});do var M=this._binding.writeSync(t,e,u,n,this._buffer,this._offset,r);while(!this._hadError&&d(M[0],M[1]));if(this._hadError)throw m;var C=Buffer.concat(T,o);return this.close(),C}var y=this._binding.write(t,e,u,n,this._buffer,this._offset,r);y.buffer=e,y.callback=d;function d(a,_){if(!f._hadError){var E=r-_;if(assert(E>=0,"have should not go down"),E>0){var P=f._buffer.slice(f._offset,f._offset+E);f._offset+=E,g?f.push(P):(T.push(P),o+=P.length)}if((_===0||f._offset>=f._chunkSize)&&(r=f._chunkSize,f._offset=0,f._buffer=new Buffer(f._chunkSize)),_===0){if(u+=n-a,n=a,!g)return!0;var b=f._binding.write(t,e,u,n,f._buffer,f._offset,f._chunkSize);b.callback=d,b.buffer=e;return}if(!g)return!1;i()}}};inherits$1(Deflate,Zlib);inherits$1(Inflate,Zlib);inherits$1(Gzip,Zlib);inherits$1(Gunzip,Zlib);inherits$1(DeflateRaw,Zlib);inherits$1(InflateRaw,Zlib);inherits$1(Unzip,Zlib);var _polyfillNode_zlib={codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib},_polyfillNode_zlib$1=Object.freeze({__proto__:null,codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib,default:_polyfillNode_zlib}),require$$2=getAugmentedNamespace$1(_polyfillNode_zlib$1),hasFetch=isFunction(global$1.fetch)&&isFunction(global$1.ReadableStream),_blobConstructor;function blobConstructor(){if(typeof _blobConstructor<"u")return _blobConstructor;try{new global$1.Blob([new ArrayBuffer(1)]),_blobConstructor=!0}catch{_blobConstructor=!1}return _blobConstructor}var xhr;function checkTypeSupport(e){xhr||(xhr=new global$1.XMLHttpRequest,xhr.open("GET",global$1.location.host?"/":"https://example.com"));try{return xhr.responseType=e,xhr.responseType===e}catch{return!1}}var haveArrayBuffer=typeof global$1.ArrayBuffer<"u",haveSlice=haveArrayBuffer&&isFunction(global$1.ArrayBuffer.prototype.slice),arraybuffer=haveArrayBuffer&&checkTypeSupport("arraybuffer"),msstream=!hasFetch&&haveSlice&&checkTypeSupport("ms-stream"),mozchunkedarraybuffer=!hasFetch&&haveArrayBuffer&&checkTypeSupport("moz-chunked-arraybuffer"),overrideMimeType=isFunction(xhr.overrideMimeType),vbArray=isFunction(global$1.VBArray);function isFunction(e){return typeof e=="function"}xhr=null;var rStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function IncomingMessage(e,t,i){var n=this;Readable.call(n),n._mode=i,n.headers={},n.rawHeaders=[],n.trailers={},n.rawTrailers=[],n.on("end",function(){browser$1.nextTick(function(){n.emit("close")})});var r;if(i==="fetch"){n._fetchResponse=t,n.url=t.url,n.statusCode=t.status,n.statusMessage=t.statusText;for(var u,f,g=t.headers[Symbol.iterator]();u=(f=g.next()).value,!f.done;)n.headers[u[0].toLowerCase()]=u[1],n.rawHeaders.push(u[0],u[1]);var T=t.body.getReader();r=function(){T.read().then(function(C){if(!n._destroyed){if(C.done){n.push(null);return}n.push(new Buffer(C.value)),r()}})},r()}else{n._xhr=e,n._pos=0,n.url=e.responseURL,n.statusCode=e.status,n.statusMessage=e.statusText;var o=e.getAllResponseHeaders().split(/\r?\n/);if(o.forEach(function(C){var y=C.match(/^([^:]+):\s*(.*)/);if(y){var d=y[1].toLowerCase();d==="set-cookie"?(n.headers[d]===void 0&&(n.headers[d]=[]),n.headers[d].push(y[2])):n.headers[d]!==void 0?n.headers[d]+=", "+y[2]:n.headers[d]=y[2],n.rawHeaders.push(y[1],y[2])}}),n._charset="x-user-defined",!overrideMimeType){var m=n.rawHeaders["mime-type"];if(m){var M=m.match(/;\s*charset=([^;])(;|$)/);M&&(n._charset=M[1].toLowerCase())}n._charset||(n._charset="utf-8")}}}inherits$1(IncomingMessage,Readable);IncomingMessage.prototype._read=function(){};IncomingMessage.prototype._onXHRProgress=function(){var e=this,t=e._xhr,i=null;switch(e._mode){case"text:vbarray":if(t.readyState!==rStates.DONE)break;try{i=new global$1.VBArray(t.responseBody).toArray()}catch{}if(i!==null){e.push(new Buffer(i));break}case"text":try{i=t.responseText}catch{e._mode="text:vbarray";break}if(i.length>e._pos){var n=i.substr(e._pos);if(e._charset==="x-user-defined"){for(var r=new Buffer(n.length),u=0;u<n.length;u++)r[u]=n.charCodeAt(u)&255;e.push(r)}else e.push(n,e._charset);e._pos=i.length}break;case"arraybuffer":if(t.readyState!==rStates.DONE||!t.response)break;i=t.response,e.push(new Buffer(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=t.response,t.readyState!==rStates.LOADING||!i)break;e.push(new Buffer(new Uint8Array(i)));break;case"ms-stream":if(i=t.response,t.readyState!==rStates.LOADING)break;var f=new global$1.MSStreamReader;f.onprogress=function(){f.result.byteLength>e._pos&&(e.push(new Buffer(new Uint8Array(f.result.slice(e._pos)))),e._pos=f.result.byteLength)},f.onload=function(){e.push(null)},f.readAsArrayBuffer(i);break}e._xhr.readyState===rStates.DONE&&e._mode!=="ms-stream"&&e.push(null)};function toArrayBuffer(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(isBuffer(e)){for(var t=new Uint8Array(e.length),i=e.length,n=0;n<i;n++)t[n]=e[n];return t.buffer}else throw new Error("Argument must be a Buffer")}function decideMode(e,t){return hasFetch&&t?"fetch":mozchunkedarraybuffer?"moz-chunked-arraybuffer":msstream?"ms-stream":arraybuffer&&e?"arraybuffer":vbArray&&e?"text:vbarray":"text"}function ClientRequest(e){var t=this;Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new Buffer(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var i,n=!0;if(e.mode==="disable-fetch")n=!1,i=!0;else if(e.mode==="prefer-streaming")i=!1;else if(e.mode==="allow-wrong-content-type")i=!overrideMimeType;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")i=!0;else throw new Error("Invalid value for opts.mode");t._mode=decideMode(i,n),t.on("finish",function(){t._onFinish()})}inherits$1(ClientRequest,Writable);var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];ClientRequest.prototype.setHeader=function(e,t){var i=this,n=e.toLowerCase();unsafeHeaders.indexOf(n)===-1&&(i._headers[n]={name:e,value:t})};ClientRequest.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value};ClientRequest.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]};ClientRequest.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,i=e._headers,n;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(blobConstructor()?n=new global$1.Blob(e._body.map(function(f){return toArrayBuffer(f)}),{type:(i["content-type"]||{}).value||""}):n=Buffer.concat(e._body).toString()),e._mode==="fetch"){var r=Object.keys(i).map(function(f){return[i[f].name,i[f].value]});global$1.fetch(e._opts.url,{method:e._opts.method,headers:r,body:n,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(f){e._fetchResponse=f,e._connect()},function(f){e.emit("error",f)})}else{var u=e._xhr=new global$1.XMLHttpRequest;try{u.open(e._opts.method,e._opts.url,!0)}catch(f){browser$1.nextTick(function(){e.emit("error",f)});return}"responseType"in u&&(u.responseType=e._mode.split(":")[0]),"withCredentials"in u&&(u.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in u&&u.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(i).forEach(function(f){u.setRequestHeader(i[f].name,i[f].value)}),e._response=null,u.onreadystatechange=function(){switch(u.readyState){case rStates.LOADING:case rStates.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(u.onprogress=function(){e._onXHRProgress()}),u.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{u.send(n)}catch(f){browser$1.nextTick(function(){e.emit("error",f)});return}}}};function statusValid(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}ClientRequest.prototype._onXHRProgress=function(){var e=this;!statusValid(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())};ClientRequest.prototype._connect=function(){var e=this;e._destroyed||(e._response=new IncomingMessage(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))};ClientRequest.prototype._write=function(e,t,i){var n=this;n._body.push(e),i()};ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()};ClientRequest.prototype.end=function(e,t,i){var n=this;typeof e=="function"&&(i=e,e=void 0),Writable.prototype.end.call(n,e,t,i)};ClientRequest.prototype.flushHeaders=function(){};ClientRequest.prototype.setTimeout=function(){};ClientRequest.prototype.setNoDelay=function(){};ClientRequest.prototype.setSocketKeepAlive=function(){};/*! https://mths.be/punycode v1.4.1 by @mathias */var maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map$1(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function mapDomain(e,t){var i=e.split("@"),n="";i.length>1&&(n=i[0]+"@",e=i[1]),e=e.replace(regexSeparators,".");var r=e.split("."),u=map$1(r,t).join(".");return n+u}function ucs2decode(e){for(var t=[],i=0,n=e.length,r,u;i<n;)r=e.charCodeAt(i++),r>=55296&&r<=56319&&i<n?(u=e.charCodeAt(i++),(u&64512)==56320?t.push(((r&1023)<<10)+(u&1023)+65536):(t.push(r),i--)):t.push(r);return t}function digitToBasic(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function adapt(e,t,i){var n=0;for(e=i?floor(e/damp):e>>1,e+=floor(e/t);e>baseMinusTMin*tMax>>1;n+=base)e=floor(e/baseMinusTMin);return floor(n+(baseMinusTMin+1)*e/(e+skew))}function encode(e){var t,i,n,r,u,f,g,T,o,m,M,C=[],y,d,a,_;for(e=ucs2decode(e),y=e.length,t=initialN,i=0,u=initialBias,f=0;f<y;++f)M=e[f],M<128&&C.push(stringFromCharCode(M));for(n=r=C.length,r&&C.push(delimiter);n<y;){for(g=maxInt,f=0;f<y;++f)M=e[f],M>=t&&M<g&&(g=M);for(d=n+1,g-t>floor((maxInt-i)/d)&&error("overflow"),i+=(g-t)*d,t=g,f=0;f<y;++f)if(M=e[f],M<t&&++i>maxInt&&error("overflow"),M==t){for(T=i,o=base;m=o<=u?tMin:o>=u+tMax?tMax:o-u,!(T<m);o+=base)_=T-m,a=base-m,C.push(stringFromCharCode(digitToBasic(m+_%a,0))),T=floor(_/a);C.push(stringFromCharCode(digitToBasic(T,0))),u=adapt(i,d,n==r),i=0,++n}++i,++t}return C.join("")}function toASCII(e){return mapDomain(e,function(t){return regexNonASCII.test(t)?"xn--"+encode(t):t})}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function stringifyPrimitive(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function stringify(e,t,i,n){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?map(objectKeys(e),function(r){var u=encodeURIComponent(stringifyPrimitive(r))+i;return isArray(e[r])?map(e[r],function(f){return u+encodeURIComponent(stringifyPrimitive(f))}).join(t):u+encodeURIComponent(stringifyPrimitive(e[r]))}).join(t):""}function map(e,t){if(e.map)return e.map(t);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n],n));return i}var objectKeys=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t};function parse$1(e,t,i,n){t=t||"&",i=i||"=";var r={};if(typeof e!="string"||e.length===0)return r;var u=/\+/g;e=e.split(t);var f=1e3,g=e.length;g>f&&(g=f);for(var T=0;T<g;++T){var o=e[T].replace(u,"%20"),m=o.indexOf(i),M,C,y,d;m>=0?(M=o.substr(0,m),C=o.substr(m+1)):(M=o,C=""),y=decodeURIComponent(M),d=decodeURIComponent(C),hasOwnProperty(r,y)?isArray(r[y])?r[y].push(d):r[y]=[r[y],d]:r[y]=d}return r}var _polyfillNode_url={parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,fileURLToPath:urlFileURLToPath,format:urlFormat,Url};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t,i){if(e&&isObject(e)&&e instanceof Url)return e;var n=new Url;return n.parse(e,t,i),n}Url.prototype.parse=function(e,t,i){return parse(this,e,t,i)};function parse(e,t,i,n){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),u=r!==-1&&r<t.indexOf("#")?"?":"#",f=t.split(u),g=/\\/g;f[0]=f[0].replace(g,"/"),t=f.join(u);var T=t;if(T=T.trim(),!n&&t.split("#").length===1){var o=simplePathPattern.exec(T);if(o)return e.path=T,e.href=T,e.pathname=o[1],o[2]?(e.search=o[2],i?e.query=parse$1(e.search.substr(1)):e.query=e.search.substr(1)):i&&(e.search="",e.query={}),e}var m=protocolPattern.exec(T);if(m){m=m[0];var M=m.toLowerCase();e.protocol=M,T=T.substr(m.length)}if(n||m||T.match(/^\/\/[^@\/]+@[^@\/]+/)){var C=T.substr(0,2)==="//";C&&!(m&&hostlessProtocol[m])&&(T=T.substr(2),e.slashes=!0)}var y,d,a,_;if(!hostlessProtocol[m]&&(C||m&&!slashedProtocol[m])){var E=-1;for(y=0;y<hostEndingChars.length;y++)d=T.indexOf(hostEndingChars[y]),d!==-1&&(E===-1||d<E)&&(E=d);var P,b;for(E===-1?b=T.lastIndexOf("@"):b=T.lastIndexOf("@",E),b!==-1&&(P=T.slice(0,b),T=T.slice(b+1),e.auth=decodeURIComponent(P)),E=-1,y=0;y<nonHostChars.length;y++)d=T.indexOf(nonHostChars[y]),d!==-1&&(E===-1||d<E)&&(E=d);E===-1&&(E=T.length),e.host=T.slice(0,E),T=T.slice(E),parseHost(e),e.hostname=e.hostname||"";var p=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!p){var c=e.hostname.split(/\./);for(y=0,a=c.length;y<a;y++){var l=c[y];if(l&&!l.match(hostnamePartPattern)){for(var s="",x=0,R=l.length;x<R;x++)l.charCodeAt(x)>127?s+="x":s+=l[x];if(!s.match(hostnamePartPattern)){var O=c.slice(0,y),B=c.slice(y+1),ne=l.match(hostnamePartStart);ne&&(O.push(ne[1]),B.unshift(ne[2])),B.length&&(T="/"+B.join(".")+T),e.hostname=O.join(".");break}}}}e.hostname.length>hostnameMaxLen?e.hostname="":e.hostname=e.hostname.toLowerCase(),p||(e.hostname=toASCII(e.hostname)),_=e.port?":"+e.port:"";var he=e.hostname||"";e.host=he+_,e.href+=e.host,p&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),T[0]!=="/"&&(T="/"+T))}if(!unsafeProtocol[M])for(y=0,a=autoEscape.length;y<a;y++){var ae=autoEscape[y];if(T.indexOf(ae)!==-1){var U=encodeURIComponent(ae);U===ae&&(U=escape(ae)),T=T.split(ae).join(U)}}var G=T.indexOf("#");G!==-1&&(e.hash=T.substr(G),T=T.slice(0,G));var q=T.indexOf("?");if(q!==-1?(e.search=T.substr(q),e.query=T.substr(q+1),i&&(e.query=parse$1(e.query)),T=T.slice(0,q)):i&&(e.search="",e.query={}),T&&(e.pathname=T),slashedProtocol[M]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){_=e.pathname||"";var W=e.search||"";e.path=_+W}return e.href=format(e),e}function urlFileURLToPath(e){if(typeof e=="string")e=new Url().parse(e);else if(!(e instanceof Url))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+String(e));if(e.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(e)}function getPathFromURLPosix(e){const t=e.pathname;for(let i=0;i<t.length;i++)if(t[i]==="%"){const n=t.codePointAt(i+2)|32;if(t[i+1]==="2"&&n===102)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(t)}function urlFormat(e){return isString(e)&&(e=parse({},e)),format(e)}function format(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var i=e.protocol||"",n=e.pathname||"",r=e.hash||"",u=!1,f="";e.host?u=t+e.host:e.hostname&&(u=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(u+=":"+e.port)),e.query&&isObject(e.query)&&Object.keys(e.query).length&&(f=stringify(e.query));var g=e.search||f&&"?"+f||"";return i&&i.substr(-1)!==":"&&(i+=":"),e.slashes||(!i||slashedProtocol[i])&&u!==!1?(u="//"+(u||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):u||(u=""),r&&r.charAt(0)!=="#"&&(r="#"+r),g&&g.charAt(0)!=="?"&&(g="?"+g),n=n.replace(/[?#]/g,function(T){return encodeURIComponent(T)}),g=g.replace("#","%23"),i+u+n+g+r}Url.prototype.format=function(){return format(this)};function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()};function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}Url.prototype.resolveObject=function(e){if(isString(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var i=new Url,n=Object.keys(this),r=0;r<n.length;r++){var u=n[r];i[u]=this[u]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var f=Object.keys(e),g=0;g<f.length;g++){var T=f[g];T!=="protocol"&&(i[T]=e[T])}return slashedProtocol[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}var o;if(e.protocol&&e.protocol!==i.protocol){if(!slashedProtocol[e.protocol]){for(var m=Object.keys(e),M=0;M<m.length;M++){var C=m[M];i[C]=e[C]}return i.href=i.format(),i}if(i.protocol=e.protocol,!e.host&&!hostlessProtocol[e.protocol]){for(o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),o[0]!==""&&o.unshift(""),o.length<2&&o.unshift(""),i.pathname=o.join("/")}else i.pathname=e.pathname;if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var y=i.pathname||"",d=i.search||"";i.path=y+d}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var a=i.pathname&&i.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",E=_||a||i.host&&e.pathname,P=E,b=i.pathname&&i.pathname.split("/")||[],p=i.protocol&&!slashedProtocol[i.protocol];o=e.pathname&&e.pathname.split("/")||[],p&&(i.hostname="",i.port=null,i.host&&(b[0]===""?b[0]=i.host:b.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(o[0]===""?o[0]=e.host:o.unshift(e.host)),e.host=null),E=E&&(o[0]===""||b[0]===""));var c;if(_)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,b=o;else if(o.length)b||(b=[]),b.pop(),b=b.concat(o),i.search=e.search,i.query=e.query;else if(!isNullOrUndefined(e.search))return p&&(i.hostname=i.host=b.shift(),c=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1,c&&(i.auth=c.shift(),i.host=i.hostname=c.shift())),i.search=e.search,i.query=e.query,(!isNull(i.pathname)||!isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!b.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var l=b.slice(-1)[0],s=(i.host||e.host||b.length>1)&&(l==="."||l==="..")||l==="",x=0,R=b.length;R>=0;R--)l=b[R],l==="."?b.splice(R,1):l===".."?(b.splice(R,1),x++):x&&(b.splice(R,1),x--);if(!E&&!P)for(;x--;x)b.unshift("..");E&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),s&&b.join("/").substr(-1)!=="/"&&b.push("");var O=b[0]===""||b[0]&&b[0].charAt(0)==="/";return p&&(i.hostname=i.host=O?"":b.length?b.shift():"",c=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1,c&&(i.auth=c.shift(),i.host=i.hostname=c.shift())),E=E||i.host&&b.length,E&&!O&&b.unshift(""),b.length?i.pathname=b.join("/"):(i.pathname=null,i.path=null),(!isNull(i.pathname)||!isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i};Url.prototype.parseHost=function(){return parseHost(this)};function parseHost(e){var t=e.host,i=portPattern.exec(t);i&&(i=i[0],i!==":"&&(e.port=i.substr(1)),t=t.substr(0,t.length-i.length)),t&&(e.hostname=t)}var _polyfillNode_url$1=Object.freeze({__proto__:null,parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,fileURLToPath:urlFileURLToPath,format:urlFormat,default:_polyfillNode_url,Url});function request$1(e,t){typeof e=="string"&&(e=urlParse(e));var i=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",n=e.protocol||i,r=e.hostname||e.host,u=e.port,f=e.path||"/";r&&r.indexOf(":")!==-1&&(r="["+r+"]"),e.url=(r?n+"//"+r:"")+(u?":"+u:"")+f,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var g=new ClientRequest(e);return t&&g.on("response",t),g}function get$1(e,t){var i=request$1(e,t);return i.end(),i}function Agent$1(){}Agent$1.defaultMaxSockets=4;var METHODS$1=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES$1={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_http={request:request$1,get:get$1,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1},_polyfillNode_http$1=Object.freeze({__proto__:null,request:request$1,get:get$1,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1,default:_polyfillNode_http}),require$$3=getAugmentedNamespace$1(_polyfillNode_http$1);function request(e,t){typeof e=="string"&&(e=urlParse(e));var i=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",n=e.protocol||i,r=e.hostname||e.host,u=e.port,f=e.path||"/";r&&r.indexOf(":")!==-1&&(r="["+r+"]"),e.url=(r?n+"//"+r:"")+(u?":"+u:"")+f,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var g=new ClientRequest(e);return t&&g.on("response",t),g}function get(e,t){var i=request(e,t);return i.end(),i}function Agent(){}Agent.defaultMaxSockets=4;var METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_https={request,get,Agent,METHODS,STATUS_CODES},_polyfillNode_https$1=Object.freeze({__proto__:null,request,get,Agent,METHODS,STATUS_CODES,default:_polyfillNode_https}),require$$4=getAugmentedNamespace$1(_polyfillNode_https$1),require$$5=getAugmentedNamespace$1(_polyfillNode_url$1);(function(module,exports){(function(t,i){module.exports=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.arrayByteLength=D,t.arraysToBytes=j,t.assert=I,t.bytesToString=S,t.createPromiseCapability=Me,t.createValidAbsoluteUrl=X,t.escapeString=Ee,t.getModificationDate=Fe,t.getVerbosityLevel=oe,t.info=ue,t.isArrayBuffer=Se,t.isArrayEqual=Pe,t.isAscii=Ae,t.objectFromMap=Z,t.objectSize=V,t.setVerbosityLevel=W,t.shadow=J,t.string32=k,t.stringToBytes=A,t.stringToPDFString=ye,t.stringToUTF16BEString=we,t.stringToUTF8String=Ce,t.unreachable=Y,t.utf8StringToString=xe,t.warn=ie,i(2);const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const r=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=r;const u=1.35;t.LINE_FACTOR=u;const f=.35;t.LINE_DESCENT_FACTOR=f;const g={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=g;const T={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=T;const o="pdfjs_internal_editor_";t.AnnotationEditorPrefix=o;const m={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=m;const M={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=M;const C={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=C;const y={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=y;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=d;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=a;const _={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=_;const E={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=E;const P={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=P;const b={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=b;const p={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=p;const c={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=c;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=l;const s={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=s;const x={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=x;const R={O:"PageOpen",C:"PageClose"};t.PageActionEventType=R;const O={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.StreamType=O;const B={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};t.FontType=B;const ne={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=ne;const he={NONE:0,BINARY:1,STREAM:2};t.CMapCompressionType=he;const ae={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=ae;const U={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.UNSUPPORTED_FEATURES=U;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=G;let q=ne.WARNINGS;function W(fe){Number.isInteger(fe)&&(q=fe)}function oe(){return q}function ue(fe){q>=ne.INFOS&&console.log(`Info: ${fe}`)}function ie(fe){q>=ne.WARNINGS&&console.log(`Warning: ${fe}`)}function Y(fe){throw new Error(fe)}function I(fe,re){fe||Y(re)}function L(fe){if(!fe)return!1;switch(fe.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function X(fe,re=null,le=null){if(!fe)return null;try{if(le&&typeof fe=="string"){if(le.addDefaultProtocol&&fe.startsWith("www.")){const Te=fe.match(/\./g);Te&&Te.length>=2&&(fe=`http://${fe}`)}if(le.tryConvertEncoding)try{fe=Ce(fe)}catch{}}const ve=re?new URL(fe,re):new URL(fe);if(L(ve))return ve}catch{}return null}function J(fe,re,le){return Object.defineProperty(fe,re,{value:le,enumerable:!0,configurable:!0,writable:!1}),le}const ee=function(){function re(le,ve){this.constructor===re&&Y("Cannot initialize BaseException."),this.message=le,this.name=ve}return re.prototype=new Error,re.constructor=re,re}();t.BaseException=ee;class te extends ee{constructor(re,le){super(re,"PasswordException"),this.code=le}}t.PasswordException=te;class w extends ee{constructor(re,le){super(re,"UnknownErrorException"),this.details=le}}t.UnknownErrorException=w;class F extends ee{constructor(re){super(re,"InvalidPDFException")}}t.InvalidPDFException=F;class z extends ee{constructor(re){super(re,"MissingPDFException")}}t.MissingPDFException=z;class H extends ee{constructor(re,le){super(re,"UnexpectedResponseException"),this.status=le}}t.UnexpectedResponseException=H;class $ extends ee{constructor(re){super(re,"FormatError")}}t.FormatError=$;class Q extends ee{constructor(re){super(re,"AbortException")}}t.AbortException=Q;function S(fe){(typeof fe!="object"||fe===null||fe.length===void 0)&&Y("Invalid argument for bytesToString");const re=fe.length,le=8192;if(re<le)return String.fromCharCode.apply(null,fe);const ve=[];for(let Te=0;Te<re;Te+=le){const Re=Math.min(Te+le,re),Le=fe.subarray(Te,Re);ve.push(String.fromCharCode.apply(null,Le))}return ve.join("")}function A(fe){typeof fe!="string"&&Y("Invalid argument for stringToBytes");const re=fe.length,le=new Uint8Array(re);for(let ve=0;ve<re;++ve)le[ve]=fe.charCodeAt(ve)&255;return le}function D(fe){if(fe.length!==void 0)return fe.length;if(fe.byteLength!==void 0)return fe.byteLength;Y("Invalid argument for arrayByteLength")}function j(fe){const re=fe.length;if(re===1&&fe[0]instanceof Uint8Array)return fe[0];let le=0;for(let Re=0;Re<re;Re++)le+=D(fe[Re]);let ve=0;const Te=new Uint8Array(le);for(let Re=0;Re<re;Re++){let Le=fe[Re];Le instanceof Uint8Array||(typeof Le=="string"?Le=A(Le):Le=new Uint8Array(Le));const Oe=Le.byteLength;Te.set(Le,ve),ve+=Oe}return Te}function k(fe){return String.fromCharCode(fe>>24&255,fe>>16&255,fe>>8&255,fe&255)}function V(fe){return Object.keys(fe).length}function Z(fe){const re=Object.create(null);for(const[le,ve]of fe)re[le]=ve;return re}function K(){const fe=new Uint8Array(4);return fe[0]=1,new Uint32Array(fe.buffer,0,1)[0]===1}function de(){try{return new Function(""),!0}catch{return!1}}class se{static get isLittleEndian(){return J(this,"isLittleEndian",K())}static get isEvalSupported(){return J(this,"isEvalSupported",de())}static get isOffscreenCanvasSupported(){return J(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}t.FeatureTest=se;const _e=[...Array(256).keys()].map(fe=>fe.toString(16).padStart(2,"0"));class be{static makeHexColor(re,le,ve){return`#${_e[re]}${_e[le]}${_e[ve]}`}static scaleMinMax(re,le){let ve;re[0]?(re[0]<0&&(ve=le[0],le[0]=le[1],le[1]=ve),le[0]*=re[0],le[1]*=re[0],re[3]<0&&(ve=le[2],le[2]=le[3],le[3]=ve),le[2]*=re[3],le[3]*=re[3]):(ve=le[0],le[0]=le[2],le[2]=ve,ve=le[1],le[1]=le[3],le[3]=ve,re[1]<0&&(ve=le[2],le[2]=le[3],le[3]=ve),le[2]*=re[1],le[3]*=re[1],re[2]<0&&(ve=le[0],le[0]=le[1],le[1]=ve),le[0]*=re[2],le[1]*=re[2]),le[0]+=re[4],le[1]+=re[4],le[2]+=re[5],le[3]+=re[5]}static transform(re,le){return[re[0]*le[0]+re[2]*le[1],re[1]*le[0]+re[3]*le[1],re[0]*le[2]+re[2]*le[3],re[1]*le[2]+re[3]*le[3],re[0]*le[4]+re[2]*le[5]+re[4],re[1]*le[4]+re[3]*le[5]+re[5]]}static applyTransform(re,le){const ve=re[0]*le[0]+re[1]*le[2]+le[4],Te=re[0]*le[1]+re[1]*le[3]+le[5];return[ve,Te]}static applyInverseTransform(re,le){const ve=le[0]*le[3]-le[1]*le[2],Te=(re[0]*le[3]-re[1]*le[2]+le[2]*le[5]-le[4]*le[3])/ve,Re=(-re[0]*le[1]+re[1]*le[0]+le[4]*le[1]-le[5]*le[0])/ve;return[Te,Re]}static getAxialAlignedBoundingBox(re,le){const ve=be.applyTransform(re,le),Te=be.applyTransform(re.slice(2,4),le),Re=be.applyTransform([re[0],re[3]],le),Le=be.applyTransform([re[2],re[1]],le);return[Math.min(ve[0],Te[0],Re[0],Le[0]),Math.min(ve[1],Te[1],Re[1],Le[1]),Math.max(ve[0],Te[0],Re[0],Le[0]),Math.max(ve[1],Te[1],Re[1],Le[1])]}static inverseTransform(re){const le=re[0]*re[3]-re[1]*re[2];return[re[3]/le,-re[1]/le,-re[2]/le,re[0]/le,(re[2]*re[5]-re[4]*re[3])/le,(re[4]*re[1]-re[5]*re[0])/le]}static apply3dTransform(re,le){return[re[0]*le[0]+re[1]*le[1]+re[2]*le[2],re[3]*le[0]+re[4]*le[1]+re[5]*le[2],re[6]*le[0]+re[7]*le[1]+re[8]*le[2]]}static singularValueDecompose2dScale(re){const le=[re[0],re[2],re[1],re[3]],ve=re[0]*le[0]+re[1]*le[2],Te=re[0]*le[1]+re[1]*le[3],Re=re[2]*le[0]+re[3]*le[2],Le=re[2]*le[1]+re[3]*le[3],Oe=(ve+Le)/2,$e=Math.sqrt((ve+Le)**2-4*(ve*Le-Re*Te))/2,Ve=Oe+$e||1,De=Oe-$e||1;return[Math.sqrt(Ve),Math.sqrt(De)]}static normalizeRect(re){const le=re.slice(0);return re[0]>re[2]&&(le[0]=re[2],le[2]=re[0]),re[1]>re[3]&&(le[1]=re[3],le[3]=re[1]),le}static intersect(re,le){const ve=Math.max(Math.min(re[0],re[2]),Math.min(le[0],le[2])),Te=Math.min(Math.max(re[0],re[2]),Math.max(le[0],le[2]));if(ve>Te)return null;const Re=Math.max(Math.min(re[1],re[3]),Math.min(le[1],le[3])),Le=Math.min(Math.max(re[1],re[3]),Math.max(le[1],le[3]));return Re>Le?null:[ve,Re,Te,Le]}static bezierBoundingBox(re,le,ve,Te,Re,Le,Oe,$e){const Ve=[],De=[[],[]];let ze,Ue,et,Ie,tt,it,dt,ft;for(let pt=0;pt<2;++pt){if(pt===0?(Ue=6*re-12*ve+6*Re,ze=-3*re+9*ve-9*Re+3*Oe,et=3*ve-3*re):(Ue=6*le-12*Te+6*Le,ze=-3*le+9*Te-9*Le+3*$e,et=3*Te-3*le),Math.abs(ze)<1e-12){if(Math.abs(Ue)<1e-12)continue;Ie=-et/Ue,0<Ie&&Ie<1&&Ve.push(Ie);continue}dt=Ue*Ue-4*et*ze,ft=Math.sqrt(dt),!(dt<0)&&(tt=(-Ue+ft)/(2*ze),0<tt&&tt<1&&Ve.push(tt),it=(-Ue-ft)/(2*ze),0<it&&it<1&&Ve.push(it))}let qe=Ve.length,Ne;const Ze=qe;for(;qe--;)Ie=Ve[qe],Ne=1-Ie,De[0][qe]=Ne*Ne*Ne*re+3*Ne*Ne*Ie*ve+3*Ne*Ie*Ie*Re+Ie*Ie*Ie*Oe,De[1][qe]=Ne*Ne*Ne*le+3*Ne*Ne*Ie*Te+3*Ne*Ie*Ie*Le+Ie*Ie*Ie*$e;return De[0][Ze]=re,De[1][Ze]=le,De[0][Ze+1]=Oe,De[1][Ze+1]=$e,De[0].length=De[1].length=Ze+2,[Math.min(...De[0]),Math.min(...De[1]),Math.max(...De[0]),Math.max(...De[1])]}}t.Util=be;const me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ye(fe){if(fe[0]>=""){let le;if(fe[0]===""&&fe[1]===""?le="utf-16be":fe[0]===""&&fe[1]===""?le="utf-16le":fe[0]===""&&fe[1]===""&&fe[2]===""&&(le="utf-8"),le)try{const ve=new TextDecoder(le,{fatal:!0}),Te=A(fe);return ve.decode(Te)}catch(ve){ie(`stringToPDFString: "${ve}".`)}}const re=[];for(let le=0,ve=fe.length;le<ve;le++){const Te=me[fe.charCodeAt(le)];re.push(Te?String.fromCharCode(Te):fe.charAt(le))}return re.join("")}function Ee(fe){return fe.replace(/([()\\\n\r])/g,re=>re===`
`?"\\n":re==="\r"?"\\r":`\\${re}`)}function Ae(fe){return/^[\x00-\x7F]*$/.test(fe)}function we(fe){const re=[""];for(let le=0,ve=fe.length;le<ve;le++){const Te=fe.charCodeAt(le);re.push(String.fromCharCode(Te>>8&255),String.fromCharCode(Te&255))}return re.join("")}function Ce(fe){return decodeURIComponent(escape(fe))}function xe(fe){return unescape(encodeURIComponent(fe))}function Se(fe){return typeof fe=="object"&&fe!==null&&fe.byteLength!==void 0}function Pe(fe,re){if(fe.length!==re.length)return!1;for(let le=0,ve=fe.length;le<ve;le++)if(fe[le]!==re[le])return!1;return!0}function Fe(fe=new Date){return[fe.getUTCFullYear().toString(),(fe.getUTCMonth()+1).toString().padStart(2,"0"),fe.getUTCDate().toString().padStart(2,"0"),fe.getUTCHours().toString().padStart(2,"0"),fe.getUTCMinutes().toString().padStart(2,"0"),fe.getUTCSeconds().toString().padStart(2,"0")].join("")}function Me(){const fe=Object.create(null);let re=!1;return Object.defineProperty(fe,"settled",{get(){return re}}),fe.promise=new Promise(function(le,ve){fe.resolve=function(Te){re=!0,le(Te)},fe.reject=function(Te){re=!0,ve(Te)}}),fe}},(e,t,i)=>{i(3)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const i=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");t.isNodeJS=i},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,i,n,r,u,f,g,T,o,mt,M,C;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:d,NodeCMapReaderFactory:a,NodeStandardFontDataFactory:_}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=d,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=a,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=_}let createPDFNetworkStream;function setPDFNetworkStreamFactory(d){createPDFNetworkStream=d}function getDocument(d){const a=new PDFDocumentLoadingTask;let _;if(typeof d=="string"||d instanceof URL)_={url:d};else if((0,_util.isArrayBuffer)(d))_={data:d};else if(d instanceof PDFDataRangeTransport)_={range:d};else{if(typeof d!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!d.url&&!d.data&&!d.range)throw new Error("Invalid parameter object: need either .data, .range or .url");_=d}const E=Object.create(null);let P=null,b=null;for(const c in _){const l=_[c];switch(c){case"url":if(typeof window<"u")try{E[c]=new URL(l,window.location).href;continue}catch(s){(0,_util.warn)(`Cannot create valid URL: "${s}".`)}else if(typeof l=="string"||l instanceof URL){E[c]=l.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":P=l;continue;case"worker":b=l;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&l instanceof Buffer)E[c]=new Uint8Array(l);else{if(l instanceof Uint8Array)break;if(typeof l=="string")E[c]=(0,_util.stringToBytes)(l);else if(typeof l=="object"&&l!==null&&!isNaN(l.length))E[c]=new Uint8Array(l);else if((0,_util.isArrayBuffer)(l))E[c]=new Uint8Array(l);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}E[c]=l}if(E.CMapReaderFactory=E.CMapReaderFactory||DefaultCMapReaderFactory,E.StandardFontDataFactory=E.StandardFontDataFactory||DefaultStandardFontDataFactory,E.ignoreErrors=E.stopAtErrors!==!0,E.fontExtraProperties=E.fontExtraProperties===!0,E.pdfBug=E.pdfBug===!0,E.enableXfa=E.enableXfa===!0,(!Number.isInteger(E.rangeChunkSize)||E.rangeChunkSize<1)&&(E.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof E.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(E.docBaseUrl))&&(E.docBaseUrl=null),(!Number.isInteger(E.maxImageSize)||E.maxImageSize<-1)&&(E.maxImageSize=-1),typeof E.cMapUrl!="string"&&(E.cMapUrl=null),typeof E.standardFontDataUrl!="string"&&(E.standardFontDataUrl=null),typeof E.useWorkerFetch!="boolean"&&(E.useWorkerFetch=E.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&E.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof E.isEvalSupported!="boolean"&&(E.isEvalSupported=!0),typeof E.disableFontFace!="boolean"&&(E.disableFontFace=_is_node.isNodeJS),typeof E.useSystemFonts!="boolean"&&(E.useSystemFonts=!_is_node.isNodeJS&&!E.disableFontFace),(typeof E.ownerDocument!="object"||E.ownerDocument===null)&&(E.ownerDocument=globalThis.document),typeof E.disableRange!="boolean"&&(E.disableRange=!1),typeof E.disableStream!="boolean"&&(E.disableStream=!1),typeof E.disableAutoFetch!="boolean"&&(E.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(E.verbosity),!b){const c={verbosity:E.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};b=c.port?PDFWorker.fromPort(c):new PDFWorker(c),a._worker=b}const p=a.docId;return b.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const c=_fetchDocument(b,E,P,p),l=new Promise(function(s){let x;P?x=new _transport_stream.PDFDataTransportStream({length:E.length,initialData:E.initialData,progressiveDone:E.progressiveDone,contentDispositionFilename:E.contentDispositionFilename,disableRange:E.disableRange,disableStream:E.disableStream},P):E.data||(x=createPDFNetworkStream({url:E.url,length:E.length,httpHeaders:E.httpHeaders,withCredentials:E.withCredentials,rangeChunkSize:E.rangeChunkSize,disableRange:E.disableRange,disableStream:E.disableStream})),s(x)});return Promise.all([c,l]).then(function([s,x]){if(a.destroyed)throw new Error("Loading aborted");const R=new _message_handler.MessageHandler(p,s,b.port),O=new WorkerTransport(R,a,x,E);a._transport=O,R.send("Ready",null)})}).catch(a._capability.reject),a}async function _fetchDocument(d,a,_,E){if(d.destroyed)throw new Error("Worker was destroyed");_&&(a.length=_.length,a.initialData=_.initialData,a.progressiveDone=_.progressiveDone,a.contentDispositionFilename=_.contentDispositionFilename);const P=await d.messageHandler.sendWithPromise("GetDocRequest",{docId:E,apiVersion:"2.16.105",source:{data:a.data,url:a.url,password:a.password,disableAutoFetch:a.disableAutoFetch,rangeChunkSize:a.rangeChunkSize,length:a.length},maxImageSize:a.maxImageSize,disableFontFace:a.disableFontFace,docBaseUrl:a.docBaseUrl,ignoreErrors:a.ignoreErrors,isEvalSupported:a.isEvalSupported,fontExtraProperties:a.fontExtraProperties,enableXfa:a.enableXfa,useSystemFonts:a.useSystemFonts,cMapUrl:a.useWorkerFetch?a.cMapUrl:null,standardFontDataUrl:a.useWorkerFetch?a.standardFontDataUrl:null});if(a.data&&(a.data=null),d.destroyed)throw new Error("Worker was destroyed");return P}const t=class t{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_t(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var a;this.destroyed=!0,await((a=this._transport)==null?void 0:a.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,pe(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,_,E=!1,P=null){this.length=a,this.initialData=_,this.progressiveDone=E,this.contentDispositionFilename=P,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,_){for(const E of this._rangeListeners)E(a,_)}onDataProgress(a,_){this._readyCapability.promise.then(()=>{for(const E of this._progressListeners)E(a,_)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const _ of this._progressiveReadListeners)_(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,_){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,_){this._pdfInfo=a,this._transport=_,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(a,_,E,P,b=!1){this._pageIndex=a,this._pageInfo=_,this._ownerDocument=P,this._transport=E,this._stats=b?new _display_utils.StatTimer:null,this._pdfBug=b,this.commonObjs=E.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:_=this.rotate,offsetX:E=0,offsetY:P=0,dontFlip:b=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:_,offsetX:E,offsetY:P,dontFlip:b})}getAnnotations({intent:a="display"}={}){const _=this._transport.getRenderingIntent(a);let E=this._annotationPromises.get(_.cacheKey);return E||(E=this._transport.getAnnotations(this._pageIndex,_.renderingIntent),this._annotationPromises.set(_.cacheKey,E),E=E.then(P=>{for(const b of P)b.titleObj!==void 0&&Object.defineProperty(b,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),b.titleObj.str}}),b.contentsObj!==void 0&&Object.defineProperty(b,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),b.contentsObj.str}});return P})),E}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var a;return((a=this._transport._htmlForXfa)==null?void 0:a.children[this._pageIndex])||null}render({canvasContext:a,viewport:_,intent:E="display",annotationMode:P=_util.AnnotationMode.ENABLE,transform:b=null,imageLayer:p=null,canvasFactory:c=null,background:l=null,optionalContentConfigPromise:s=null,annotationCanvasMap:x=null,pageColors:R=null,printAnnotationStorage:O=null}){var W,oe;((W=arguments[0])==null?void 0:W.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&P===_util.AnnotationMode.ENABLE&&(P=_util.AnnotationMode.ENABLE_FORMS)),((oe=arguments[0])==null?void 0:oe.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&P===_util.AnnotationMode.ENABLE&&(P=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const B=this._transport.getRenderingIntent(E,P,O);this.pendingCleanup=!1,s||(s=this._transport.getOptionalContentConfig());let ne=this._intentStates.get(B.cacheKey);ne||(ne=Object.create(null),this._intentStates.set(B.cacheKey,ne)),ne.streamReaderCancelTimeout&&(clearTimeout(ne.streamReaderCancelTimeout),ne.streamReaderCancelTimeout=null);const he=c||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ae=!!(B.renderingIntent&_util.RenderingIntentFlag.PRINT);ne.displayReadyCapability||(ne.displayReadyCapability=(0,_util.createPromiseCapability)(),ne.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(B));const U=ue=>{ne.renderTasks.delete(G),(this.cleanupAfterRender||ae)&&(this.pendingCleanup=!0),this._tryCleanup(),ue?(G.capability.reject(ue),this._abortOperatorList({intentState:ne,reason:ue instanceof Error?ue:new Error(ue)})):G.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},G=new InternalRenderTask({callback:U,params:{canvasContext:a,viewport:_,transform:b,imageLayer:p,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:x,operatorList:ne.operatorList,pageIndex:this._pageIndex,canvasFactory:he,useRequestAnimationFrame:!ae,pdfBug:this._pdfBug,pageColors:R});(ne.renderTasks||(ne.renderTasks=new Set)).add(G);const q=G.task;return Promise.all([ne.displayReadyCapability.promise,s]).then(([ue,ie])=>{if(this.pendingCleanup){U();return}this._stats&&this._stats.time("Rendering"),G.initializeGraphics({transparency:ue,optionalContentConfig:ie}),G.operatorListChanged()}).catch(U),q}getOperatorList({intent:a="display",annotationMode:_=_util.AnnotationMode.ENABLE,printAnnotationStorage:E=null}={}){function P(){p.operatorList.lastChunk&&(p.opListReadCapability.resolve(p.operatorList),p.renderTasks.delete(c))}const b=this._transport.getRenderingIntent(a,_,E,!0);let p=this._intentStates.get(b.cacheKey);p||(p=Object.create(null),this._intentStates.set(b.cacheKey,p));let c;return p.opListReadCapability||(c=Object.create(null),c.operatorListChanged=P,p.opListReadCapability=(0,_util.createPromiseCapability)(),(p.renderTasks||(p.renderTasks=new Set)).add(c),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(b)),p.opListReadCapability.promise}streamTextContent({disableCombineTextItems:a=!1,includeMarkedContent:_=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:a!==!0,includeMarkedContent:_===!0},{highWaterMark:100,size(P){return P.items.length}})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(E=>_xfa_text.XfaText.textContent(E));const _=this.streamTextContent(a);return new Promise(function(E,P){function b(){p.read().then(function({value:l,done:s}){if(s){E(c);return}Object.assign(c.styles,l.styles),c.items.push(...l.items),b()},P)}const p=_.getReader(),c={items:[],styles:Object.create(null)};b()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const a=[];for(const _ of this._intentStates.values())if(this._abortOperatorList({intentState:_,reason:new Error("Page was destroyed."),force:!0}),!_.opListReadCapability)for(const E of _.renderTasks)a.push(E.completed),E.cancel();this.objs.clear();for(const _ of this._bitmaps)_.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(a)}cleanup(a=!1){return this.pendingCleanup=!0,this._tryCleanup(a)}_tryCleanup(a=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:_,operatorList:E}of this._intentStates.values())if(_.size>0||!E.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,a&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const _ of this._bitmaps)_.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(a,_){const E=this._intentStates.get(_);E&&(this._stats&&this._stats.timeEnd("Page Request"),E.displayReadyCapability&&E.displayReadyCapability.resolve(a))}_renderPageChunk(a,_){for(let E=0,P=a.length;E<P;E++)_.operatorList.fnArray.push(a.fnArray[E]),_.operatorList.argsArray.push(a.argsArray[E]);_.operatorList.lastChunk=a.lastChunk,_.operatorList.separateAnnots=a.separateAnnots;for(const E of _.renderTasks)E.operatorListChanged();a.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:a,cacheKey:_,annotationStorageMap:E}){const b=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:_,annotationStorage:E}).getReader(),p=this._intentStates.get(_);p.streamReader=b;const c=()=>{b.read().then(({value:l,done:s})=>{if(s){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(l,p),c())},l=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const s of p.renderTasks)s.operatorListChanged();this._tryCleanup()}if(p.displayReadyCapability)p.displayReadyCapability.reject(l);else if(p.opListReadCapability)p.opListReadCapability.reject(l);else throw l}})};c()}_abortOperatorList({intentState:a,reason:_,force:E=!1}){if(a.streamReader){if(!E){if(a.renderTasks.size>0)return;if(_ instanceof _display_utils.RenderingCancelledException){a.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:a,reason:_,force:!0}),a.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(a.streamReader.cancel(new _util.AbortException(_.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[P,b]of this._intentStates)if(b===a){this._intentStates.delete(P);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(a,_){const E={data:structuredClone(a,_)};this._deferred.then(()=>{for(const P of this._listeners)P.call(this,E)})}addEventListener(a,_){this._listeners.push(_)}removeEventListener(a,_){const E=this._listeners.indexOf(_);this._listeners.splice(E,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const d=(i=document==null?void 0:document.currentScript)==null?void 0:i.src;d&&(PDFWorkerUtil.fallbackWorkerSrc=d.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(d,a){let _;try{if(_=new URL(d),!_.origin||_.origin==="null")return!1}catch{return!1}const E=new URL(a,_);return _.origin===E.origin},PDFWorkerUtil.createCDNWrapper=function(d){const a=`importScripts("${d}");`;return URL.createObjectURL(new Blob([a]))}}const _PDFWorker=class _PDFWorker{constructor({name:d=null,port:a=null,verbosity:_=(0,_util.getVerbosityLevel)()}={}){if(a&&N(_PDFWorker,n).has(a))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=d,this.destroyed=!1,this.verbosity=_,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a){N(_PDFWorker,n).set(a,this),this._initializeFromPort(a);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(d){this._port=d,this._messageHandler=new _message_handler.MessageHandler("main","worker",d),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:d}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,d)||(d=PDFWorkerUtil.createCDNWrapper(new URL(d,window.location).href));const a=new Worker(d),_=new _message_handler.MessageHandler("main","worker",a),E=()=>{a.removeEventListener("error",P),_.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},P=()=>{this._webWorker||E()};a.addEventListener("error",P),_.on("test",p=>{if(a.removeEventListener("error",P),this.destroyed){E();return}p?(this._messageHandler=_,this._port=a,this._webWorker=a,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),_.destroy(),a.terminate())}),_.on("ready",p=>{if(a.removeEventListener("error",P),this.destroyed){E();return}try{b()}catch{this._setupFakeWorker()}});const b=()=>{const p=new Uint8Array;_.send("test",p,[p.buffer])};b();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(d=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;this._port=a;const _=`fake${PDFWorkerUtil.fakeWorkerId++}`,E=new _message_handler.MessageHandler(_+"_worker",_,a);d.setup(E,a);const P=new _message_handler.MessageHandler(_,_+"_worker",a);this._messageHandler=P,this._readyCapability.resolve(),P.send("configure",{verbosity:this.verbosity})}).catch(d=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${d.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),N(_PDFWorker,n).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(d){if(!(d!=null&&d.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return N(this,n).has(d.port)?N(this,n).get(d.port):new _PDFWorker(d)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var d;try{return((d=globalThis.pdfjsWorker)==null?void 0:d.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};n=new WeakMap,pe(_PDFWorker,n,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(a,_,E,P){pe(this,r,null);pe(this,u,new Map);pe(this,f,new Map);pe(this,g,null);this.messageHandler=a,this.loadingTask=_,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:_.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:P.ownerDocument,styleElement:P.styleElement}),this._params=P,P.useWorkerFetch||(this.CMapReaderFactory=new P.CMapReaderFactory({baseUrl:P.cMapUrl,isCompressed:P.cMapPacked}),this.StandardFontDataFactory=new P.StandardFontDataFactory({baseUrl:P.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=E,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return N(this,r)}getRenderingIntent(a,_=_util.AnnotationMode.ENABLE,E=null,P=!1){let b=_util.RenderingIntentFlag.DISPLAY,p=null;switch(a){case"any":b=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":b=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(_){case _util.AnnotationMode.DISABLE:b+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:b+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:b+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,p=(b&_util.RenderingIntentFlag.PRINT&&E instanceof _annotation_storage.PrintAnnotationStorage?E:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${_}`)}return P&&(b+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:b,cacheKey:`${b}_${_annotation_storage.AnnotationStorage.getHash(p)}`,annotationStorageMap:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const E of N(this,u).values())a.push(E._destroy());N(this,u).clear(),N(this,f).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const _=this.messageHandler.sendWithPromise("Terminate",null);return a.push(_),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),ge(this,g,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:_}=this;a.on("GetReader",(E,P)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=b=>{this._lastProgress={loaded:b.loaded,total:b.total}},P.onPull=()=>{this._fullReader.read().then(function({value:b,done:p}){if(p){P.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(b),"GetReader - expected an ArrayBuffer."),P.enqueue(new Uint8Array(b),1,[b])}).catch(b=>{P.error(b)})},P.onCancel=b=>{this._fullReader.cancel(b),P.ready.catch(p=>{if(!this.destroyed)throw p})}}),a.on("ReaderHeadersReady",E=>{const P=(0,_util.createPromiseCapability)(),b=this._fullReader;return b.headersReady.then(()=>{var p;(!b.isStreamingSupported||!b.isRangeSupported)&&(this._lastProgress&&((p=_.onProgress)==null||p.call(_,this._lastProgress)),b.onProgress=c=>{var l;(l=_.onProgress)==null||l.call(_,{loaded:c.loaded,total:c.total})}),P.resolve({isStreamingSupported:b.isStreamingSupported,isRangeSupported:b.isRangeSupported,contentLength:b.contentLength})},P.reject),P.promise}),a.on("GetRangeReader",(E,P)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const b=this._networkStream.getRangeReader(E.begin,E.end);if(!b){P.close();return}P.onPull=()=>{b.read().then(function({value:p,done:c}){if(c){P.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(p),"GetRangeReader - expected an ArrayBuffer."),P.enqueue(new Uint8Array(p),1,[p])}).catch(p=>{P.error(p)})},P.onCancel=p=>{b.cancel(p),P.ready.catch(c=>{if(!this.destroyed)throw c})}}),a.on("GetDoc",({pdfInfo:E})=>{this._numPages=E.numPages,this._htmlForXfa=E.htmlForXfa,delete E.htmlForXfa,_._capability.resolve(new PDFDocumentProxy(E,this))}),a.on("DocException",function(E){let P;switch(E.name){case"PasswordException":P=new _util.PasswordException(E.message,E.code);break;case"InvalidPDFException":P=new _util.InvalidPDFException(E.message);break;case"MissingPDFException":P=new _util.MissingPDFException(E.message);break;case"UnexpectedResponseException":P=new _util.UnexpectedResponseException(E.message,E.status);break;case"UnknownErrorException":P=new _util.UnknownErrorException(E.message,E.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}_._capability.reject(P)}),a.on("PasswordRequest",E=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),_.onPassword){const P=b=>{b instanceof Error?this._passwordCapability.reject(b):this._passwordCapability.resolve({password:b})};try{_.onPassword(P,E.code)}catch(b){this._passwordCapability.reject(b)}}else this._passwordCapability.reject(new _util.PasswordException(E.message,E.code));return this._passwordCapability.promise}),a.on("DataLoaded",E=>{var P;(P=_.onProgress)==null||P.call(_,{loaded:E.length,total:E.length}),this.downloadInfoCapability.resolve(E)}),a.on("StartRenderPage",E=>{if(this.destroyed)return;N(this,u).get(E.pageIndex)._startRenderPage(E.transparency,E.cacheKey)}),a.on("commonobj",([E,P,b])=>{var p;if(!this.destroyed&&!this.commonObjs.has(E))switch(P){case"Font":const c=this._params;if("error"in b){const x=b.error;(0,_util.warn)(`Error during font loading: ${x}`),this.commonObjs.resolve(E,x);break}let l=null;c.pdfBug&&((p=globalThis.FontInspector)!=null&&p.enabled)&&(l={registerFont(x,R){globalThis.FontInspector.fontAdded(x,R)}});const s=new _font_loader.FontFaceObject(b,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:l});this.fontLoader.bind(s).catch(x=>a.sendWithPromise("FontFallback",{id:E})).finally(()=>{!c.fontExtraProperties&&s.data&&(s.data=null),this.commonObjs.resolve(E,s)});break;case"FontPath":case"Image":this.commonObjs.resolve(E,b);break;default:throw new Error(`Got unknown common object type ${P}`)}}),a.on("obj",([E,P,b,p])=>{var l;if(this.destroyed)return;const c=N(this,u).get(P);if(!c.objs.has(E))switch(b){case"Image":c.objs.resolve(E,p);const s=8e6;if(p){let x;if(p.bitmap){const{bitmap:R,width:O,height:B}=p;x=O*B*4,c._bitmaps.add(R)}else x=((l=p.data)==null?void 0:l.length)||0;x>s&&(c.cleanupAfterRender=!0)}break;case"Pattern":c.objs.resolve(E,p);break;default:throw new Error(`Got unknown object type ${b}`)}}),a.on("DocProgress",E=>{var P;this.destroyed||(P=_.onProgress)==null||P.call(_,{loaded:E.loaded,total:E.total})}),a.on("DocStats",E=>{this.destroyed||ge(this,r,Object.freeze({streamTypes:Object.freeze(E.streamTypes),fontTypes:Object.freeze(E.fontTypes)}))}),a.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),a.on("FetchBuiltInCMap",E=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(E):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",E=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(E):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:a}){var _,E;this.destroyed||(E=(_=this.loadingTask).onUnsupportedFeature)==null||E.call(_,a)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const _=a-1,E=N(this,f).get(_);if(E)return E;const P=this.messageHandler.sendWithPromise("GetPage",{pageIndex:_}).then(b=>{if(this.destroyed)throw new Error("Transport destroyed");const p=new PDFPageProxy(_,b,this,this._params.ownerDocument,this._params.pdfBug);return N(this,u).set(_,p),p});return N(this,f).set(_,P),P}getPageIndex(a){return typeof a!="object"||a===null||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,_){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:_})}saveDocument(){var a;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((a=this._fullReader)==null?void 0:a.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return typeof a!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return N(this,g)||ge(this,g,this.messageHandler.sendWithPromise("GetMetadata",null).then(a=>{var _,E;return{info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:((_=this._fullReader)==null?void 0:_.filename)??null,contentLength:((E=this._fullReader)==null?void 0:E.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const _ of N(this,u).values())if(!_.cleanup())throw new Error(`startCleanup: Page ${_.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),ge(this,g,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const a=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a.disableAutoFetch,enableXfa:a.enableXfa})}}r=new WeakMap,u=new WeakMap,f=new WeakMap,g=new WeakMap;class PDFObjects{constructor(){pe(this,o);pe(this,T,Object.create(null))}get(a,_=null){if(_){const P=ce(this,o,mt).call(this,a);return P.capability.promise.then(()=>_(P.data)),null}const E=N(this,T)[a];if(!(E!=null&&E.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${a}.`);return E.data}has(a){const _=N(this,T)[a];return(_==null?void 0:_.capability.settled)||!1}resolve(a,_=null){const E=ce(this,o,mt).call(this,a);E.data=_,E.capability.resolve()}clear(){ge(this,T,Object.create(null))}}T=new WeakMap,o=new WeakSet,mt=function(a){const _=N(this,T)[a];return _||(N(this,T)[a]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(a){pe(this,M,null);ge(this,M,a),this.onContinue=null}get promise(){return N(this,M).capability.promise}cancel(){N(this,M).cancel()}get separateAnnots(){const{separateAnnots:a}=N(this,M).operatorList;if(!a)return!1;const{annotationCanvasMap:_}=N(this,M);return a.form||a.canvas&&(_==null?void 0:_.size)>0}}M=new WeakMap,exports.RenderTask=RenderTask;const y=class y{constructor({callback:a,params:_,objs:E,commonObjs:P,annotationCanvasMap:b,operatorList:p,pageIndex:c,canvasFactory:l,useRequestAnimationFrame:s=!1,pdfBug:x=!1,pageColors:R=null}){this.callback=a,this.params=_,this.objs=E,this.commonObjs=P,this.annotationCanvasMap=b,this.operatorListIdx=null,this.operatorList=p,this._pageIndex=c,this.canvasFactory=l,this._pdfBug=x,this.pageColors=R,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=s===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=_.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:_}){var l;if(this.cancelled)return;if(this._canvas){if(N(y,C).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");N(y,C).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:E,viewport:P,transform:b,imageLayer:p,background:c}=this.params;this.gfx=new _canvas.CanvasGraphics(E,this.commonObjs,this.objs,this.canvasFactory,p,_,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:b,viewport:P,transparency:a,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(a=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&N(y,C).delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&N(y,C).delete(this._canvas),this.callback())))}};C=new WeakMap,pe(y,C,new WeakSet);let InternalRenderTask=y;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(e,t,i)=>{var T,Wt,m;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=i(1),r=i(6),u=i(10);class f{constructor(){pe(this,T);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(C,y){const d=this._storage.get(C);return d===void 0?y:Object.assign(y,d)}getRawValue(C){return this._storage.get(C)}remove(C){if(this._storage.delete(C),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const y of this._storage.values())if(y instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(C,y){const d=this._storage.get(C);let a=!1;if(d!==void 0)for(const[_,E]of Object.entries(y))d[_]!==E&&(a=!0,d[_]=E);else a=!0,this._storage.set(C,y);a&&ce(this,T,Wt).call(this),y instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(y.constructor._type)}has(C){return this._storage.has(C)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new g(this)}get serializable(){if(this._storage.size===0)return null;const C=new Map;for(const[y,d]of this._storage){const a=d instanceof r.AnnotationEditor?d.serialize():d;a&&C.set(y,a)}return C}static getHash(C){if(!C)return"";const y=new u.MurmurHash3_64;for(const[d,a]of C)y.update(`${d}:${JSON.stringify(a)}`);return y.hexdigest()}}T=new WeakSet,Wt=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=f;class g extends f{constructor(y){super();pe(this,m,null);ge(this,m,structuredClone(y.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return N(this,m)}}m=new WeakMap,t.PrintAnnotationStorage=g},(e,t,i)=>{var f,g,T,o,m,M;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=i(7),r=i(1);const C=class C{constructor(d){pe(this,f,this.focusin.bind(this));pe(this,g,this.focusout.bind(this));pe(this,T,!1);pe(this,o,!1);pe(this,m,!1);pe(this,M,C._zIndex++);this.constructor===C&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null;const[a,_]=this.parent.viewportBaseDimensions;this.x=d.x/a,this.y=d.y/_,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=N(this,M)}focusin(d){N(this,T)?ge(this,T,!1):this.parent.setSelected(this)}focusout(d){if(!this.isAttachedToDOM)return;const a=d.relatedTarget;a!=null&&a.closest(`#${this.id}`)||(d.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(d){const a=this.parent.div.getBoundingClientRect();this.startX=d.clientX-a.x,this.startY=d.clientY-a.y,d.dataTransfer.setData("text/plain",this.id),d.dataTransfer.effectAllowed="move"}setAt(d,a,_,E){const[P,b]=this.parent.viewportBaseDimensions;[_,E]=this.screenToPageTranslation(_,E),this.x=(d+_)/P,this.y=(a+E)/b,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(d,a){const[_,E]=this.parent.viewportBaseDimensions;[d,a]=this.screenToPageTranslation(d,a),this.x+=d/_,this.y+=a/E,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(d,a){const{rotation:_}=this.parent.viewport;switch(_){case 90:return[a,-d];case 180:return[-d,-a];case 270:return[-a,d];default:return[d,a]}}setDims(d,a){const[_,E]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*d/_}%`,this.div.style.height=`${100*a/E}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",N(this,f)),this.div.addEventListener("focusout",N(this,g));const[d,a]=this.getInitialTranslation();return this.translate(d,a),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(d){const a=n.KeyboardManager.platform.isMac;if(d.button!==0||d.ctrlKey&&a){d.preventDefault();return}d.ctrlKey&&!a||d.shiftKey||d.metaKey&&a?this.parent.toggleSelected(this):this.parent.setSelected(this),ge(this,T,!0)}getRect(d,a){const[_,E]=this.parent.viewportBaseDimensions,[P,b]=this.parent.pageDimensions,p=P*d/_,c=b*a/E,l=this.x*P,s=this.y*b,x=this.width*P,R=this.height*b;switch(this.rotation){case 0:return[l+p,b-s-c-R,l+p+x,b-s-c];case 90:return[l+c,b-s+p,l+c+R,b-s+p+x];case 180:return[l-p-x,b-s+c,l-p,b-s+c+R];case 270:return[l-c-R,b-s-p-x,l-c,b-s-p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,a){const[_,E,P,b]=d,p=P-_,c=b-E;switch(this.rotation){case 0:return[_,a-b,p,c];case 90:return[_,a-E,c,p];case 180:return[P,a-E,p,c];case 270:return[P,a-b,c,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ge(this,m,!0)}disableEditMode(){ge(this,m,!1)}isInEditMode(){return N(this,m)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var d;(d=this.div)==null||d.addEventListener("focusin",N(this,f))}serialize(){(0,r.unreachable)("An editor must be serializable")}static deserialize(d,a){const _=new this.prototype.constructor({parent:a,id:a.getNextId()});_.rotation=d.rotation;const[E,P]=a.pageDimensions,[b,p,c,l]=_.getRectInCurrentCoords(d.rect,P);return _.x=b/E,_.y=p/P,_.width=c/E,_.height=l/P,_}remove(){this.div.removeEventListener("focusin",N(this,f)),this.div.removeEventListener("focusout",N(this,g)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var d;(d=this.div)==null||d.classList.add("selectedEditor")}unselect(){var d;(d=this.div)==null||d.classList.remove("selectedEditor")}updateParams(d,a){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return N(this,o)}set isEditing(d){ge(this,o,d),d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};f=new WeakMap,g=new WeakMap,T=new WeakMap,o=new WeakMap,m=new WeakMap,M=new WeakMap,ke(C,"_colorManager",new n.ColorManager),ke(C,"_zIndex",1);let u=C;t.AnnotationEditor=u},(e,t,i)=>{var y,d,a,_,E,P,Gt,c,s,x,R,O,B,ne,he,ae,U,G,q,W,oe,ue,ie,Y,I,L,qt,bt,Be,Xe,Zt,Xt,vt,Ye,nt;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=u,t.opacityToHex=f;var n=i(1),r=i(8);function u(S,A,D){for(const j of D)A.addEventListener(j,S[j].bind(S))}function f(S){return Math.round(Math.min(255,Math.max(1,255*S))).toString(16).padStart(2,"0")}class g{constructor(){pe(this,y,0)}getId(){return`${n.AnnotationEditorPrefix}${_t(this,y)._++}`}}y=new WeakMap;class T{constructor(A=128){pe(this,d,[]);pe(this,a,!1);pe(this,_);pe(this,E,-1);ge(this,_,A)}add({cmd:A,undo:D,mustExec:j,type:k=NaN,overwriteIfSameType:V=!1,keepUndo:Z=!1}){if(j&&A(),N(this,a))return;const K={cmd:A,undo:D,type:k};if(N(this,E)===-1){N(this,d).length>0&&(N(this,d).length=0),ge(this,E,0),N(this,d).push(K);return}if(V&&N(this,d)[N(this,E)].type===k){Z&&(K.undo=N(this,d)[N(this,E)].undo),N(this,d)[N(this,E)]=K;return}const de=N(this,E)+1;de===N(this,_)?N(this,d).splice(0,1):(ge(this,E,de),de<N(this,d).length&&N(this,d).splice(de)),N(this,d).push(K)}undo(){N(this,E)!==-1&&(ge(this,a,!0),N(this,d)[N(this,E)].undo(),ge(this,a,!1),ge(this,E,N(this,E)-1))}redo(){N(this,E)<N(this,d).length-1&&(ge(this,E,N(this,E)+1),ge(this,a,!0),N(this,d)[N(this,E)].cmd(),ge(this,a,!1))}hasSomethingToUndo(){return N(this,E)!==-1}hasSomethingToRedo(){return N(this,E)<N(this,d).length-1}destroy(){ge(this,d,null)}}d=new WeakMap,a=new WeakMap,_=new WeakMap,E=new WeakMap,t.CommandManager=T;const p=class p{constructor(A){pe(this,P);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const D=p.platform.isMac;for(const[j,k]of A)for(const V of j){const Z=V.startsWith("mac+");D&&Z?(this.callbacks.set(V.slice(4),k),this.allKeys.add(V.split("+").at(-1))):!D&&!Z&&(this.callbacks.set(V,k),this.allKeys.add(V.split("+").at(-1)))}}static get platform(){const A=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:A.includes("Win"),isMac:A.includes("Mac")})}exec(A,D){if(!this.allKeys.has(D.key))return;const j=this.callbacks.get(ce(this,P,Gt).call(this,D));j&&(j.bind(A)(),D.stopPropagation(),D.preventDefault())}};P=new WeakSet,Gt=function(A){A.altKey&&this.buffer.push("alt"),A.ctrlKey&&this.buffer.push("ctrl"),A.metaKey&&this.buffer.push("meta"),A.shiftKey&&this.buffer.push("shift"),this.buffer.push(A.key);const D=this.buffer.join("+");return this.buffer.length=0,D};let o=p;t.KeyboardManager=o;class m{constructor(){pe(this,c,null)}copy(A){A&&(Array.isArray(A)?ge(this,c,A.map(D=>D.serialize())):ge(this,c,[A.serialize()]),ge(this,c,N(this,c).filter(D=>!!D)),N(this,c).length===0&&ge(this,c,null))}paste(){return N(this,c)}isEmpty(){return N(this,c)===null}destroy(){ge(this,c,null)}}c=new WeakMap;const l=class l{get _colors(){const A=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(A),(0,n.shadow)(this,"_colors",A)}convert(A){const D=(0,r.getRGB)(A);if(!window.matchMedia("(forced-colors: active)").matches)return D;for(const[j,k]of this._colors)if(k.every((V,Z)=>V===D[Z]))return l._colorsMapping.get(j);return D}getHexCode(A){const D=this._colors.get(A);return D?n.Util.makeHexColor(...D):A}};ke(l,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let M=l;t.ColorManager=M;const Q=class Q{constructor(A,D){pe(this,L);pe(this,s,null);pe(this,x,new Map);pe(this,R,new Map);pe(this,O,new m);pe(this,B,new T);pe(this,ne,0);pe(this,he,null);pe(this,ae,null);pe(this,U,new g);pe(this,G,!1);pe(this,q,n.AnnotationEditorType.NONE);pe(this,W,new Set);pe(this,oe,this.keydown.bind(this));pe(this,ue,this.onEditingAction.bind(this));pe(this,ie,this.onPageChanging.bind(this));pe(this,Y,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});pe(this,I,null);ge(this,I,A),ge(this,ae,D),N(this,ae)._on("editingaction",N(this,ue)),N(this,ae)._on("pagechanging",N(this,ie))}destroy(){ce(this,L,bt).call(this),N(this,ae)._off("editingaction",N(this,ue)),N(this,ae)._off("pagechanging",N(this,ie));for(const A of N(this,R).values())A.destroy();N(this,R).clear(),N(this,x).clear(),ge(this,s,null),N(this,W).clear(),N(this,O).destroy(),N(this,B).destroy()}onPageChanging({pageNumber:A}){ge(this,ne,A-1)}focusMainContainer(){N(this,I).focus()}keydown(A){var D;(D=this.getActive())!=null&&D.shouldGetKeyboardEvents()||Q._keyboardManager.exec(this,A)}onEditingAction(A){["undo","redo","cut","copy","paste","delete","selectAll"].includes(A.name)&&this[A.name]()}setEditingState(A){A?(ce(this,L,qt).call(this),ce(this,L,Be).call(this,{isEditing:N(this,q)!==n.AnnotationEditorType.NONE,isEmpty:ce(this,L,Ye).call(this),hasSomethingToUndo:N(this,B).hasSomethingToUndo(),hasSomethingToRedo:N(this,B).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:N(this,O).isEmpty()})):(ce(this,L,bt).call(this),ce(this,L,Be).call(this,{isEditing:!1}))}registerEditorTypes(A){ge(this,he,A);for(const D of N(this,he))ce(this,L,Xe).call(this,D.defaultPropertiesToUpdate)}getId(){return N(this,U).getId()}addLayer(A){N(this,R).set(A.pageIndex,A),N(this,G)?A.enable():A.disable()}removeLayer(A){N(this,R).delete(A.pageIndex)}updateMode(A){if(ge(this,q,A),A===n.AnnotationEditorType.NONE)this.setEditingState(!1),ce(this,L,Xt).call(this);else{this.setEditingState(!0),ce(this,L,Zt).call(this);for(const D of N(this,R).values())D.updateMode(A)}}updateToolbar(A){A!==N(this,q)&&N(this,ae).dispatch("switchannotationeditormode",{source:this,mode:A})}updateParams(A,D){for(const j of N(this,W))j.updateParams(A,D);for(const j of N(this,he))j.updateDefaultParams(A,D)}getEditors(A){const D=[];for(const j of N(this,x).values())j.pageIndex===A&&D.push(j);return D}getEditor(A){return N(this,x).get(A)}addEditor(A){N(this,x).set(A.id,A)}removeEditor(A){N(this,x).delete(A.id),this.unselect(A)}setActiveEditor(A){N(this,s)!==A&&(ge(this,s,A),A&&ce(this,L,Xe).call(this,A.propertiesToUpdate))}toggleSelected(A){if(N(this,W).has(A)){N(this,W).delete(A),A.unselect(),ce(this,L,Be).call(this,{hasSelectedEditor:this.hasSelection});return}N(this,W).add(A),A.select(),ce(this,L,Xe).call(this,A.propertiesToUpdate),ce(this,L,Be).call(this,{hasSelectedEditor:!0})}setSelected(A){for(const D of N(this,W))D!==A&&D.unselect();N(this,W).clear(),N(this,W).add(A),A.select(),ce(this,L,Xe).call(this,A.propertiesToUpdate),ce(this,L,Be).call(this,{hasSelectedEditor:!0})}isSelected(A){return N(this,W).has(A)}unselect(A){A.unselect(),N(this,W).delete(A),ce(this,L,Be).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return N(this,W).size!==0}undo(){N(this,B).undo(),ce(this,L,Be).call(this,{hasSomethingToUndo:N(this,B).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ce(this,L,Ye).call(this)})}redo(){N(this,B).redo(),ce(this,L,Be).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:N(this,B).hasSomethingToRedo(),isEmpty:ce(this,L,Ye).call(this)})}addCommands(A){N(this,B).add(A),ce(this,L,Be).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ce(this,L,Ye).call(this)})}delete(){if(N(this,s)&&N(this,s).commitOrRemove(),!this.hasSelection)return;const A=[...N(this,W)],D=()=>{for(const k of A)k.remove()},j=()=>{for(const k of A)ce(this,L,vt).call(this,k)};this.addCommands({cmd:D,undo:j,mustExec:!0})}copy(){if(N(this,s)&&N(this,s).commitOrRemove(),this.hasSelection){const A=[];for(const D of N(this,W))D.isEmpty()||A.push(D);if(A.length===0)return;N(this,O).copy(A),ce(this,L,Be).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(N(this,O).isEmpty())return;this.unselectAll();const A=N(this,R).get(N(this,ne)),D=N(this,O).paste().map(V=>A.deserialize(V)),j=()=>{for(const V of D)ce(this,L,vt).call(this,V);ce(this,L,nt).call(this,D)},k=()=>{for(const V of D)V.remove()};this.addCommands({cmd:j,undo:k,mustExec:!0})}selectAll(){for(const A of N(this,W))A.commit();ce(this,L,nt).call(this,N(this,x).values())}unselectAll(){if(N(this,s)){N(this,s).commitOrRemove();return}if(ce(this,L,nt).size!==0){for(const A of N(this,W))A.unselect();N(this,W).clear(),ce(this,L,Be).call(this,{hasSelectedEditor:!1})}}isActive(A){return N(this,s)===A}getActive(){return N(this,s)}getMode(){return N(this,q)}};s=new WeakMap,x=new WeakMap,R=new WeakMap,O=new WeakMap,B=new WeakMap,ne=new WeakMap,he=new WeakMap,ae=new WeakMap,U=new WeakMap,G=new WeakMap,q=new WeakMap,W=new WeakMap,oe=new WeakMap,ue=new WeakMap,ie=new WeakMap,Y=new WeakMap,I=new WeakMap,L=new WeakSet,qt=function(){N(this,I).addEventListener("keydown",N(this,oe))},bt=function(){N(this,I).removeEventListener("keydown",N(this,oe))},Be=function(A){Object.entries(A).some(([j,k])=>N(this,Y)[j]!==k)&&N(this,ae).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(N(this,Y),A)})},Xe=function(A){N(this,ae).dispatch("annotationeditorparamschanged",{source:this,details:A})},Zt=function(){if(!N(this,G)){ge(this,G,!0);for(const A of N(this,R).values())A.enable()}},Xt=function(){if(this.unselectAll(),N(this,G)){ge(this,G,!1);for(const A of N(this,R).values())A.disable()}},vt=function(A){const D=N(this,R).get(A.pageIndex);D?D.addOrRebuild(A):this.addEditor(A)},Ye=function(){if(N(this,x).size===0)return!0;if(N(this,x).size===1)for(const A of N(this,x).values())return A.isEmpty();return!1},nt=function(A){N(this,W).clear();for(const D of A)D.isEmpty()||(N(this,W).add(D),D.select());ce(this,L,Be).call(this,{hasSelectedEditor:!0})},ke(Q,"_keyboardManager",new o([[["ctrl+a","mac+meta+a"],Q.prototype.selectAll],[["ctrl+c","mac+meta+c"],Q.prototype.copy],[["ctrl+v","mac+meta+v"],Q.prototype.paste],[["ctrl+x","mac+meta+x"],Q.prototype.cut],[["ctrl+z","mac+meta+z"],Q.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Q.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Q.prototype.delete],[["Escape","mac+Escape"],Q.prototype.unselectAll]]));let C=Q;t.AnnotationEditorUIManager=C},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=l,t.getColorValues=B,t.getCurrentTransform=ne,t.getCurrentTransformInverse=he,t.getFilenameFromUrl=E,t.getPdfFilenameFromUrl=P,t.getRGB=O,t.getXfaPageViewport=R,t.isDataScheme=a,t.isPdfFile=_,t.isValidFetchUrl=p,t.loadScript=c;var n=i(9),r=i(1);const u="http://www.w3.org/2000/svg",f="pdfjs_internal_id_";t.AnnotationPrefix=f;const ae=class ae{};ke(ae,"CSS",96),ke(ae,"PDF",72),ke(ae,"PDF_TO_CSS_UNITS",ae.CSS/ae.PDF);let g=ae;t.PixelsPerInch=g;class T extends n.BaseCanvasFactory{constructor({ownerDocument:G=globalThis.document}={}){super(),this._document=G}_createCanvas(G,q){const W=this._document.createElement("canvas");return W.width=G,W.height=q,W}}t.DOMCanvasFactory=T;async function o(U,G=!1){if(p(U,document.baseURI)){const q=await fetch(U);if(!q.ok)throw new Error(q.statusText);return G?new Uint8Array(await q.arrayBuffer()):(0,r.stringToBytes)(await q.text())}return new Promise((q,W)=>{const oe=new XMLHttpRequest;oe.open("GET",U,!0),G&&(oe.responseType="arraybuffer"),oe.onreadystatechange=()=>{if(oe.readyState===XMLHttpRequest.DONE){if(oe.status===200||oe.status===0){let ue;if(G&&oe.response?ue=new Uint8Array(oe.response):!G&&oe.responseText&&(ue=(0,r.stringToBytes)(oe.responseText)),ue){q(ue);return}}W(new Error(oe.statusText))}},oe.send(null)})}class m extends n.BaseCMapReaderFactory{_fetchData(G,q){return o(G,this.isCompressed).then(W=>({cMapData:W,compressionType:q}))}}t.DOMCMapReaderFactory=m;class M extends n.BaseStandardFontDataFactory{_fetchData(G){return o(G,!0)}}t.DOMStandardFontDataFactory=M;class C extends n.BaseSVGFactory{_createSVG(G){return document.createElementNS(u,G)}}t.DOMSVGFactory=C;class y{constructor({viewBox:G,scale:q,rotation:W,offsetX:oe=0,offsetY:ue=0,dontFlip:ie=!1}){this.viewBox=G,this.scale=q,this.rotation=W,this.offsetX=oe,this.offsetY=ue;const Y=(G[2]+G[0])/2,I=(G[3]+G[1])/2;let L,X,J,ee;switch(W%=360,W<0&&(W+=360),W){case 180:L=-1,X=0,J=0,ee=1;break;case 90:L=0,X=1,J=1,ee=0;break;case 270:L=0,X=-1,J=-1,ee=0;break;case 0:L=1,X=0,J=0,ee=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ie&&(J=-J,ee=-ee);let te,w,F,z;L===0?(te=Math.abs(I-G[1])*q+oe,w=Math.abs(Y-G[0])*q+ue,F=Math.abs(G[3]-G[1])*q,z=Math.abs(G[2]-G[0])*q):(te=Math.abs(Y-G[0])*q+oe,w=Math.abs(I-G[1])*q+ue,F=Math.abs(G[2]-G[0])*q,z=Math.abs(G[3]-G[1])*q),this.transform=[L*q,X*q,J*q,ee*q,te-L*q*Y-J*q*I,w-X*q*Y-ee*q*I],this.width=F,this.height=z}clone({scale:G=this.scale,rotation:q=this.rotation,offsetX:W=this.offsetX,offsetY:oe=this.offsetY,dontFlip:ue=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:G,rotation:q,offsetX:W,offsetY:oe,dontFlip:ue})}convertToViewportPoint(G,q){return r.Util.applyTransform([G,q],this.transform)}convertToViewportRectangle(G){const q=r.Util.applyTransform([G[0],G[1]],this.transform),W=r.Util.applyTransform([G[2],G[3]],this.transform);return[q[0],q[1],W[0],W[1]]}convertToPdfPoint(G,q){return r.Util.applyInverseTransform([G,q],this.transform)}}t.PageViewport=y;class d extends r.BaseException{constructor(G,q){super(G,"RenderingCancelledException"),this.type=q}}t.RenderingCancelledException=d;function a(U){const G=U.length;let q=0;for(;q<G&&U[q].trim()==="";)q++;return U.substring(q,q+5).toLowerCase()==="data:"}function _(U){return typeof U=="string"&&/\.pdf$/i.test(U)}function E(U){const G=U.indexOf("#"),q=U.indexOf("?"),W=Math.min(G>0?G:U.length,q>0?q:U.length);return U.substring(U.lastIndexOf("/",W)+1,W)}function P(U,G="document.pdf"){if(typeof U!="string")return G;if(a(U))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),G;const q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,W=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,oe=q.exec(U);let ue=W.exec(oe[1])||W.exec(oe[2])||W.exec(oe[3]);if(ue&&(ue=ue[0],ue.includes("%")))try{ue=W.exec(decodeURIComponent(ue))[0]}catch{}return ue||G}class b{constructor(){this.started=Object.create(null),this.times=[]}time(G){G in this.started&&(0,r.warn)(`Timer is already running for ${G}`),this.started[G]=Date.now()}timeEnd(G){G in this.started||(0,r.warn)(`Timer has not been started for ${G}`),this.times.push({name:G,start:this.started[G],end:Date.now()}),delete this.started[G]}toString(){const G=[];let q=0;for(const W of this.times){const oe=W.name;oe.length>q&&(q=oe.length)}for(const W of this.times){const oe=W.end-W.start;G.push(`${W.name.padEnd(q)} ${oe}ms
`)}return G.join("")}}t.StatTimer=b;function p(U,G){try{const{protocol:q}=G?new URL(U,G):new URL(U);return q==="http:"||q==="https:"}catch{return!1}}function c(U,G=!1){return new Promise((q,W)=>{const oe=document.createElement("script");oe.src=U,oe.onload=function(ue){G&&oe.remove(),q(ue)},oe.onerror=function(){W(new Error(`Cannot load script at: ${oe.src}`))},(document.head||document.documentElement).append(oe)})}function l(U){console.log("Deprecated API usage: "+U)}let s;class x{static toDateObject(G){if(!G||typeof G!="string")return null;s||(s=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=s.exec(G);if(!q)return null;const W=parseInt(q[1],10);let oe=parseInt(q[2],10);oe=oe>=1&&oe<=12?oe-1:0;let ue=parseInt(q[3],10);ue=ue>=1&&ue<=31?ue:1;let ie=parseInt(q[4],10);ie=ie>=0&&ie<=23?ie:0;let Y=parseInt(q[5],10);Y=Y>=0&&Y<=59?Y:0;let I=parseInt(q[6],10);I=I>=0&&I<=59?I:0;const L=q[7]||"Z";let X=parseInt(q[8],10);X=X>=0&&X<=23?X:0;let J=parseInt(q[9],10)||0;return J=J>=0&&J<=59?J:0,L==="-"?(ie+=X,Y+=J):L==="+"&&(ie-=X,Y-=J),new Date(Date.UTC(W,oe,ue,ie,Y,I))}}t.PDFDateString=x;function R(U,{scale:G=1,rotation:q=0}){const{width:W,height:oe}=U.attributes.style,ue=[0,0,parseInt(W),parseInt(oe)];return new y({viewBox:ue,scale:G,rotation:q})}function O(U){if(U.startsWith("#")){const G=parseInt(U.slice(1),16);return[(G&16711680)>>16,(G&65280)>>8,G&255]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(G=>parseInt(G)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(G=>parseInt(G)).slice(0,3):((0,r.warn)(`Not a valid color format: "${U}"`),[0,0,0])}function B(U){const G=document.createElement("span");G.style.visibility="hidden",document.body.append(G);for(const q of U.keys()){G.style.color=q;const W=window.getComputedStyle(G).color;U.set(q,O(W))}G.remove()}function ne(U){const{a:G,b:q,c:W,d:oe,e:ue,f:ie}=U.getTransform();return[G,q,W,oe,ue,ie]}function he(U){const{a:G,b:q,c:W,d:oe,e:ue,f:ie}=U.getTransform().invertSelf();return[G,q,W,oe,ue,ie]}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=i(1);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(o,m){if(o<=0||m<=0)throw new Error("Invalid canvas size");const M=this._createCanvas(o,m);return{canvas:M,context:M.getContext("2d")}}reset(o,m,M){if(!o.canvas)throw new Error("Canvas is not specified");if(m<=0||M<=0)throw new Error("Invalid canvas size");o.canvas.width=m,o.canvas.height=M}destroy(o){if(!o.canvas)throw new Error("Canvas is not specified");o.canvas.width=0,o.canvas.height=0,o.canvas=null,o.context=null}_createCanvas(o,m){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=r;class u{constructor({baseUrl:o=null,isCompressed:m=!1}){this.constructor===u&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=o,this.isCompressed=m}async fetch({name:o}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!o)throw new Error("CMap name must be specified.");const m=this.baseUrl+o+(this.isCompressed?".bcmap":""),M=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(m,M).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${m}`)})}_fetchData(o,m){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=u;class f{constructor({baseUrl:o=null}){this.constructor===f&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=o}async fetch({filename:o}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!o)throw new Error("Font filename must be specified.");const m=`${this.baseUrl}${o}`;return this._fetchData(m).catch(M=>{throw new Error(`Unable to load font data at: ${m}`)})}_fetchData(o){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=f;class g{constructor(){this.constructor===g&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(o,m,M=!1){if(o<=0||m<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),M||(C.setAttribute("width",`${o}px`),C.setAttribute("height",`${m}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${o} ${m}`),C}createElement(o){if(typeof o!="string")throw new Error("Invalid SVG element type");return this._createSVG(o)}_createSVG(o){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=g},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=i(1);const r=3285377520,u=4294901760,f=65535;class g{constructor(o){this.h1=o?o&4294967295:r,this.h2=o?o&4294967295:r}update(o){let m,M;if(typeof o=="string"){m=new Uint8Array(o.length*2),M=0;for(let s=0,x=o.length;s<x;s++){const R=o.charCodeAt(s);R<=255?m[M++]=R:(m[M++]=R>>>8,m[M++]=R&255)}}else if((0,n.isArrayBuffer)(o))m=o.slice(),M=m.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const C=M>>2,y=M-C*4,d=new Uint32Array(m.buffer,0,C);let a=0,_=0,E=this.h1,P=this.h2;const b=3432918353,p=461845907,c=b&f,l=p&f;for(let s=0;s<C;s++)s&1?(a=d[s],a=a*b&u|a*c&f,a=a<<15|a>>>17,a=a*p&u|a*l&f,E^=a,E=E<<13|E>>>19,E=E*5+3864292196):(_=d[s],_=_*b&u|_*c&f,_=_<<15|_>>>17,_=_*p&u|_*l&f,P^=_,P=P<<13|P>>>19,P=P*5+3864292196);switch(a=0,y){case 3:a^=m[C*4+2]<<16;case 2:a^=m[C*4+1]<<8;case 1:a^=m[C*4],a=a*b&u|a*c&f,a=a<<15|a>>>17,a=a*p&u|a*l&f,C&1?E^=a:P^=a}this.h1=E,this.h2=P}hexdigest(){let o=this.h1,m=this.h2;o^=m>>>1,o=o*3981806797&u|o*36045&f,m=m*4283543511&u|((m<<16|o>>>16)*2950163797&u)>>>16,o^=m>>>1,o=o*444984403&u|o*60499&f,m=m*3301882366&u|((m<<16|o>>>16)*3120437893&u)>>>16,o^=m>>>1;const M=(o>>>0).toString(16),C=(m>>>0).toString(16);return M.padStart(8,"0")+C.padStart(8,"0")}}t.MurmurHash3_64=g},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=i(1);class r{constructor({docId:T,onUnsupportedFeature:o,ownerDocument:m=globalThis.document,styleElement:M=null}){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=T,this._onUnsupportedFeature=o,this._document=m,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(T){this.nativeFontFaces.push(T),this._document.fonts.add(T)}insertRule(T){let o=this.styleElement;o||(o=this.styleElement=this._document.createElement("style"),o.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(o));const m=o.sheet;m.insertRule(T,m.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(T){if(T.attached||T.missingFile)return;if(T.attached=!0,this.isFontLoadingAPISupported){const m=T.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(M){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${m.family}': '${M}'.`),T.disableFontFace=!0,M}}return}const o=T.createFontFaceRule();if(o){if(this.insertRule(o),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const M=this._queueLoadingCallback(m);this._prepareFontLoadEvent([o],[T],M)})}}_queueLoadingCallback(T){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var o;const T=!!((o=this._document)!=null&&o.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(T,o,m){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let u;t.FontLoader=u,t.FontLoader=u=class extends r{constructor(T){super(T),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let T=!1;if(typeof navigator>"u")T=!0;else{const o=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(o==null?void 0:o[1])>=14&&(T=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){function o(){for((0,n.assert)(!M.done,"completeRequest() cannot be called twice."),M.done=!0;m.requests.length>0&&m.requests[0].done;){const C=m.requests.shift();setTimeout(C.callback,0)}}const m=this.loadingContext,M={id:`pdfjs-font-loading-${m.nextRequestId++}`,done:!1,complete:o,callback:T};return m.requests.push(M),M}get _loadTestFont(){const T=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",T())}_prepareFontLoadEvent(T,o,m){function M(he,ae){return he.charCodeAt(ae)<<24|he.charCodeAt(ae+1)<<16|he.charCodeAt(ae+2)<<8|he.charCodeAt(ae+3)&255}function C(he,ae,U,G){const q=he.substring(0,ae),W=he.substring(ae+U);return q+G+W}let y,d;const a=this._document.createElement("canvas");a.width=1,a.height=1;const _=a.getContext("2d");let E=0;function P(he,ae){if(E++,E>30){(0,n.warn)("Load test font never loaded."),ae();return}if(_.font="30px "+he,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0){ae();return}setTimeout(P.bind(null,he,ae))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=C(p,976,b.length,b);const l=16,s=1482184792;let x=M(p,l);for(y=0,d=b.length-3;y<d;y+=4)x=x-s+M(b,y)|0;y<b.length&&(x=x-s+M(b+"XXX",y)|0),p=C(p,l,4,(0,n.string32)(x));const R=`url(data:font/opentype;base64,${btoa(p)});`,O=`@font-face {font-family:"${b}";src:${R}}`;this.insertRule(O);const B=[];for(const he of o)B.push(he.loadedName);B.push(b);const ne=this._document.createElement("div");ne.style.visibility="hidden",ne.style.width=ne.style.height="10px",ne.style.position="absolute",ne.style.top=ne.style.left="0px";for(const he of B){const ae=this._document.createElement("span");ae.textContent="Hi",ae.style.fontFamily=he,ne.append(ae)}this._document.body.append(ne),P(b,()=>{ne.remove(),m.complete()})}};class f{constructor(T,{isEvalSupported:o=!0,disableFontFace:m=!1,ignoreErrors:M=!1,onUnsupportedFeature:C,fontRegistry:y=null}){this.compiledGlyphs=Object.create(null);for(const d in T)this[d]=T[d];this.isEvalSupported=o!==!1,this.disableFontFace=m===!0,this.ignoreErrors=M===!0,this._onUnsupportedFeature=C,this.fontRegistry=y}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let T;if(!this.cssFontInfo)T=new FontFace(this.loadedName,this.data,{});else{const o={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(o.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,o)}return this.fontRegistry&&this.fontRegistry.registerFont(this),T}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const T=(0,n.bytesToString)(this.data),o=`url(data:${this.mimetype};base64,${btoa(T)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${o}}`;else{let M=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(M+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${M}src:${o}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,o),m}getPathGenerator(T,o){if(this.compiledGlyphs[o]!==void 0)return this.compiledGlyphs[o];let m;try{m=T.get(this.loadedName+"_path_"+o)}catch(M){if(!this.ignoreErrors)throw M;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${M}".`),this.compiledGlyphs[o]=function(C,y){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const M=[];for(const C of m){const y=C.args!==void 0?C.args.join(","):"";M.push("c.",C.cmd,"(",y,`);
`)}return this.compiledGlyphs[o]=new Function("c","size",M.join(""))}return this.compiledGlyphs[o]=function(M,C){for(const y of m)y.cmd==="scale"&&(y.args=[C,-C]),M[y.cmd].apply(M,y.args)}}}t.FontFaceObject=f},(e,t,i)=>{var oe,yt;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=i(8),r=i(1),u=i(13),f=i(14),g=i(3);const T=16,o=100,m=4096,M=15,C=10,y=g.isNodeJS&&typeof Path2D>"u"?-1:1e3,d=16;function a(Y,I){if(Y._removeMirroring)throw new Error("Context is already forwarding operations.");Y.__originalSave=Y.save,Y.__originalRestore=Y.restore,Y.__originalRotate=Y.rotate,Y.__originalScale=Y.scale,Y.__originalTranslate=Y.translate,Y.__originalTransform=Y.transform,Y.__originalSetTransform=Y.setTransform,Y.__originalResetTransform=Y.resetTransform,Y.__originalClip=Y.clip,Y.__originalMoveTo=Y.moveTo,Y.__originalLineTo=Y.lineTo,Y.__originalBezierCurveTo=Y.bezierCurveTo,Y.__originalRect=Y.rect,Y.__originalClosePath=Y.closePath,Y.__originalBeginPath=Y.beginPath,Y._removeMirroring=()=>{Y.save=Y.__originalSave,Y.restore=Y.__originalRestore,Y.rotate=Y.__originalRotate,Y.scale=Y.__originalScale,Y.translate=Y.__originalTranslate,Y.transform=Y.__originalTransform,Y.setTransform=Y.__originalSetTransform,Y.resetTransform=Y.__originalResetTransform,Y.clip=Y.__originalClip,Y.moveTo=Y.__originalMoveTo,Y.lineTo=Y.__originalLineTo,Y.bezierCurveTo=Y.__originalBezierCurveTo,Y.rect=Y.__originalRect,Y.closePath=Y.__originalClosePath,Y.beginPath=Y.__originalBeginPath,delete Y._removeMirroring},Y.save=function(){I.save(),this.__originalSave()},Y.restore=function(){I.restore(),this.__originalRestore()},Y.translate=function(X,J){I.translate(X,J),this.__originalTranslate(X,J)},Y.scale=function(X,J){I.scale(X,J),this.__originalScale(X,J)},Y.transform=function(X,J,ee,te,w,F){I.transform(X,J,ee,te,w,F),this.__originalTransform(X,J,ee,te,w,F)},Y.setTransform=function(X,J,ee,te,w,F){I.setTransform(X,J,ee,te,w,F),this.__originalSetTransform(X,J,ee,te,w,F)},Y.resetTransform=function(){I.resetTransform(),this.__originalResetTransform()},Y.rotate=function(X){I.rotate(X),this.__originalRotate(X)},Y.clip=function(X){I.clip(X),this.__originalClip(X)},Y.moveTo=function(L,X){I.moveTo(L,X),this.__originalMoveTo(L,X)},Y.lineTo=function(L,X){I.lineTo(L,X),this.__originalLineTo(L,X)},Y.bezierCurveTo=function(L,X,J,ee,te,w){I.bezierCurveTo(L,X,J,ee,te,w),this.__originalBezierCurveTo(L,X,J,ee,te,w)},Y.rect=function(L,X,J,ee){I.rect(L,X,J,ee),this.__originalRect(L,X,J,ee)},Y.closePath=function(){I.closePath(),this.__originalClosePath()},Y.beginPath=function(){I.beginPath(),this.__originalBeginPath()}}class _{constructor(I){this.canvasFactory=I,this.cache=Object.create(null)}getCanvas(I,L,X){let J;return this.cache[I]!==void 0?(J=this.cache[I],this.canvasFactory.reset(J,L,X)):(J=this.canvasFactory.create(L,X),this.cache[I]=J),J}delete(I){delete this.cache[I]}clear(){for(const I in this.cache){const L=this.cache[I];this.canvasFactory.destroy(L),delete this.cache[I]}}}function E(Y,I,L,X,J,ee,te,w,F,z){const[H,$,Q,S,A,D]=(0,n.getCurrentTransform)(Y);if($===0&&Q===0){const V=te*H+A,Z=Math.round(V),K=w*S+D,de=Math.round(K),se=(te+F)*H+A,_e=Math.abs(Math.round(se)-Z)||1,be=(w+z)*S+D,me=Math.abs(Math.round(be)-de)||1;return Y.setTransform(Math.sign(H),0,0,Math.sign(S),Z,de),Y.drawImage(I,L,X,J,ee,0,0,_e,me),Y.setTransform(H,$,Q,S,A,D),[_e,me]}if(H===0&&S===0){const V=w*Q+A,Z=Math.round(V),K=te*$+D,de=Math.round(K),se=(w+z)*Q+A,_e=Math.abs(Math.round(se)-Z)||1,be=(te+F)*$+D,me=Math.abs(Math.round(be)-de)||1;return Y.setTransform(0,Math.sign($),Math.sign(Q),0,Z,de),Y.drawImage(I,L,X,J,ee,0,0,me,_e),Y.setTransform(H,$,Q,S,A,D),[me,_e]}Y.drawImage(I,L,X,J,ee,te,w,F,z);const j=Math.hypot(H,$),k=Math.hypot(Q,S);return[j*F,k*z]}function P(Y){const{width:I,height:L}=Y;if(I>y||L>y)return null;const X=1e3,J=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ee=I+1;let te=new Uint8Array(ee*(L+1)),w,F,z;const H=I+7&-8;let $=new Uint8Array(H*L),Q=0;for(const k of Y.data){let V=128;for(;V>0;)$[Q++]=k&V?0:255,V>>=1}let S=0;for(Q=0,$[Q]!==0&&(te[0]=1,++S),F=1;F<I;F++)$[Q]!==$[Q+1]&&(te[F]=$[Q]?2:1,++S),Q++;for($[Q]!==0&&(te[F]=2,++S),w=1;w<L;w++){Q=w*H,z=w*ee,$[Q-H]!==$[Q]&&(te[z]=$[Q]?1:8,++S);let k=($[Q]?4:0)+($[Q-H]?8:0);for(F=1;F<I;F++)k=(k>>2)+($[Q+1]?4:0)+($[Q-H+1]?8:0),J[k]&&(te[z+F]=J[k],++S),Q++;if($[Q-H]!==$[Q]&&(te[z+F]=$[Q]?2:4,++S),S>X)return null}for(Q=H*(L-1),z=w*ee,$[Q]!==0&&(te[z]=8,++S),F=1;F<I;F++)$[Q]!==$[Q+1]&&(te[z+F]=$[Q]?4:8,++S),Q++;if($[Q]!==0&&(te[z+F]=4,++S),S>X)return null;const A=new Int32Array([0,ee,-1,0,-ee,0,0,0,1]),D=new Path2D;for(w=0;S&&w<=L;w++){let k=w*ee;const V=k+I;for(;k<V&&!te[k];)k++;if(k===V)continue;D.moveTo(k%ee,w);const Z=k;let K=te[k];do{const de=A[K];do k+=de;while(!te[k]);const se=te[k];se!==5&&se!==10?(K=se,te[k]=0):(K=se&51*K>>4,te[k]&=K>>2|K<<2),D.lineTo(k%ee,k/ee|0),te[k]||--S}while(Z!==k);--w}return $=null,te=null,function(k){k.save(),k.scale(1/I,-1/L),k.translate(0,-L),k.fill(D),k.beginPath(),k.restore()}}class b{constructor(I,L){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,I,L])}clone(){const I=Object.create(this);return I.clipBox=this.clipBox.slice(),I}setCurrentPoint(I,L){this.x=I,this.y=L}updatePathMinMax(I,L,X){[L,X]=r.Util.applyTransform([L,X],I),this.minX=Math.min(this.minX,L),this.minY=Math.min(this.minY,X),this.maxX=Math.max(this.maxX,L),this.maxY=Math.max(this.maxY,X)}updateRectMinMax(I,L){const X=r.Util.applyTransform(L,I),J=r.Util.applyTransform(L.slice(2),I);this.minX=Math.min(this.minX,X[0],J[0]),this.minY=Math.min(this.minY,X[1],J[1]),this.maxX=Math.max(this.maxX,X[0],J[0]),this.maxY=Math.max(this.maxY,X[1],J[1])}updateScalingPathMinMax(I,L){r.Util.scaleMinMax(I,L),this.minX=Math.min(this.minX,L[0]),this.maxX=Math.max(this.maxX,L[1]),this.minY=Math.min(this.minY,L[2]),this.maxY=Math.max(this.maxY,L[3])}updateCurvePathMinMax(I,L,X,J,ee,te,w,F,z,H){const $=r.Util.bezierBoundingBox(L,X,J,ee,te,w,F,z);if(H){H[0]=Math.min(H[0],$[0],$[2]),H[1]=Math.max(H[1],$[0],$[2]),H[2]=Math.min(H[2],$[1],$[3]),H[3]=Math.max(H[3],$[1],$[3]);return}this.updateRectMinMax(I,$)}getPathBoundingBox(I=u.PathType.FILL,L=null){const X=[this.minX,this.minY,this.maxX,this.maxY];if(I===u.PathType.STROKE){L||(0,r.unreachable)("Stroke bounding box must include transform.");const J=r.Util.singularValueDecompose2dScale(L),ee=J[0]*this.lineWidth/2,te=J[1]*this.lineWidth/2;X[0]-=ee,X[1]-=te,X[2]+=ee,X[3]+=te}return X}updateClipFromPath(){const I=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(I||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(I){this.clipBox=I,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(I=u.PathType.FILL,L=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(I,L))}}function p(Y,I,L=null){if(typeof ImageData<"u"&&I instanceof ImageData){Y.putImageData(I,0,0);return}const X=I.height,J=I.width,ee=X%d,te=(X-ee)/d,w=ee===0?te:te+1,F=Y.createImageData(J,d);let z=0,H;const $=I.data,Q=F.data;let S,A,D,j,k,V,Z,K;if(L)switch(L.length){case 1:k=L[0],V=L[0],Z=L[0],K=L[0];break;case 4:k=L[0],V=L[1],Z=L[2],K=L[3];break}if(I.kind===r.ImageKind.GRAYSCALE_1BPP){const de=$.byteLength,se=new Uint32Array(Q.buffer,0,Q.byteLength>>2),_e=se.length,be=J+7>>3;let me=4294967295,ye=r.FeatureTest.isLittleEndian?4278190080:255;for(K&&K[0]===255&&K[255]===0&&([me,ye]=[ye,me]),S=0;S<w;S++){for(D=S<te?d:ee,H=0,A=0;A<D;A++){const Ee=de-z;let Ae=0;const we=Ee>be?J:Ee*8-7,Ce=we&-8;let xe=0,Se=0;for(;Ae<Ce;Ae+=8)Se=$[z++],se[H++]=Se&128?me:ye,se[H++]=Se&64?me:ye,se[H++]=Se&32?me:ye,se[H++]=Se&16?me:ye,se[H++]=Se&8?me:ye,se[H++]=Se&4?me:ye,se[H++]=Se&2?me:ye,se[H++]=Se&1?me:ye;for(;Ae<we;Ae++)xe===0&&(Se=$[z++],xe=128),se[H++]=Se&xe?me:ye,xe>>=1}for(;H<_e;)se[H++]=0;Y.putImageData(F,0,S*d)}}else if(I.kind===r.ImageKind.RGBA_32BPP){const de=!!(k||V||Z);for(A=0,j=J*d*4,S=0;S<te;S++){if(Q.set($.subarray(z,z+j)),z+=j,de)for(let se=0;se<j;se+=4)k&&(Q[se+0]=k[Q[se+0]]),V&&(Q[se+1]=V[Q[se+1]]),Z&&(Q[se+2]=Z[Q[se+2]]);Y.putImageData(F,0,A),A+=d}if(S<w){if(j=J*ee*4,Q.set($.subarray(z,z+j)),de)for(let se=0;se<j;se+=4)k&&(Q[se+0]=k[Q[se+0]]),V&&(Q[se+1]=V[Q[se+1]]),Z&&(Q[se+2]=Z[Q[se+2]]);Y.putImageData(F,0,A)}}else if(I.kind===r.ImageKind.RGB_24BPP){const de=!!(k||V||Z);for(D=d,j=J*D,S=0;S<w;S++){for(S>=te&&(D=ee,j=J*D),H=0,A=j;A--;)Q[H++]=$[z++],Q[H++]=$[z++],Q[H++]=$[z++],Q[H++]=255;if(de)for(let se=0;se<H;se+=4)k&&(Q[se+0]=k[Q[se+0]]),V&&(Q[se+1]=V[Q[se+1]]),Z&&(Q[se+2]=Z[Q[se+2]]);Y.putImageData(F,0,S*d)}}else throw new Error(`bad image kind: ${I.kind}`)}function c(Y,I){if(I.bitmap){Y.drawImage(I.bitmap,0,0);return}const L=I.height,X=I.width,J=L%d,ee=(L-J)/d,te=J===0?ee:ee+1,w=Y.createImageData(X,d);let F=0;const z=I.data,H=w.data;for(let $=0;$<te;$++){const Q=$<ee?d:J;({srcPos:F}=(0,f.applyMaskImageData)({src:z,srcPos:F,dest:H,width:X,height:Q})),Y.putImageData(w,0,$*d)}}function l(Y,I){const L=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let X=0,J=L.length;X<J;X++){const ee=L[X];Y[ee]!==void 0&&(I[ee]=Y[ee])}Y.setLineDash!==void 0&&(I.setLineDash(Y.getLineDash()),I.lineDashOffset=Y.lineDashOffset)}function s(Y,I){Y.strokeStyle=Y.fillStyle=I||"#000000",Y.fillRule="nonzero",Y.globalAlpha=1,Y.lineWidth=1,Y.lineCap="butt",Y.lineJoin="miter",Y.miterLimit=10,Y.globalCompositeOperation="source-over",Y.font="10px sans-serif",Y.setLineDash!==void 0&&(Y.setLineDash([]),Y.lineDashOffset=0)}function x(Y,I,L,X){const J=Y.length;for(let ee=3;ee<J;ee+=4){const te=Y[ee];if(te===0)Y[ee-3]=I,Y[ee-2]=L,Y[ee-1]=X;else if(te<255){const w=255-te;Y[ee-3]=Y[ee-3]*te+I*w>>8,Y[ee-2]=Y[ee-2]*te+L*w>>8,Y[ee-1]=Y[ee-1]*te+X*w>>8}}}function R(Y,I,L){const X=Y.length,J=1/255;for(let ee=3;ee<X;ee+=4){const te=L?L[Y[ee]]:Y[ee];I[ee]=I[ee]*te*J|0}}function O(Y,I,L){const X=Y.length;for(let J=3;J<X;J+=4){const ee=Y[J-3]*77+Y[J-2]*152+Y[J-1]*28;I[J]=L?I[J]*L[ee>>8]>>8:I[J]*ee>>16}}function B(Y,I,L,X,J,ee,te,w,F,z,H){const $=!!ee,Q=$?ee[0]:0,S=$?ee[1]:0,A=$?ee[2]:0;let D;J==="Luminosity"?D=O:D=R;const k=Math.min(X,Math.ceil(1048576/L));for(let V=0;V<X;V+=k){const Z=Math.min(k,X-V),K=Y.getImageData(w-z,V+(F-H),L,Z),de=I.getImageData(w,V+F,L,Z);$&&x(K.data,Q,S,A),D(K.data,de.data,te),I.putImageData(de,w,V+F)}}function ne(Y,I,L,X){const J=X[0],ee=X[1],te=X[2]-J,w=X[3]-ee;te===0||w===0||(B(I.context,L,te,w,I.subtype,I.backdrop,I.transferMap,J,ee,I.offsetX,I.offsetY),Y.save(),Y.globalAlpha=1,Y.globalCompositeOperation="source-over",Y.setTransform(1,0,0,1,0,0),Y.drawImage(L.canvas,0,0),Y.restore())}function he(Y,I){const L=r.Util.singularValueDecompose2dScale(Y);L[0]=Math.fround(L[0]),L[1]=Math.fround(L[1]);const X=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return I!==void 0?I:L[0]<=X||L[1]<=X}const ae=["butt","round","square"],U=["miter","round","bevel"],G={},q={},ie=class ie{constructor(I,L,X,J,ee,te,w,F){pe(this,oe);this.ctx=I,this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=L,this.objs=X,this.canvasFactory=J,this.imageLayer=ee,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=te,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=w,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(F==null?void 0:F.background)||null,this.foregroundColor=(F==null?void 0:F.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(I,L=null){return typeof I=="string"?I.startsWith("g_")?this.commonObjs.get(I):this.objs.get(I):L}beginDrawing({transform:I,viewport:L,transparency:X=!1,background:J=null}){const ee=this.ctx.canvas.width,te=this.ctx.canvas.height,w=J||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const F=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const z=this.backgroundColor=this.ctx.fillStyle;let H=!0,$=w;if(this.ctx.fillStyle=w,$=this.ctx.fillStyle,H=typeof $=="string"&&/^#[0-9A-Fa-f]{6}$/.test($),F==="#000000"&&z==="#ffffff"||F===z||!H)this.foregroundColor=this.backgroundColor=null;else{const[Q,S,A]=(0,n.getRGB)($),D=k=>(k/=255,k<=.03928?k/12.92:((k+.055)/1.055)**2.4),j=Math.round(.2126*D(Q)+.7152*D(S)+.0722*D(A));this.selectColor=(k,V,Z)=>{const K=.2126*D(k)+.7152*D(V)+.0722*D(Z);return Math.round(K)===j?z:F}}}if(this.ctx.fillStyle=this.backgroundColor||w,this.ctx.fillRect(0,0,ee,te),this.ctx.restore(),X){const F=this.cachedCanvases.getCanvas("transparent",ee,te);this.compositeCtx=this.ctx,this.transparentCanvas=F.canvas,this.ctx=F.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),s(this.ctx,this.foregroundColor),I&&(this.ctx.transform(...I),this.outputScaleX=I[0],this.outputScaleY=I[0]),this.ctx.transform(...L.transform),this.viewportScale=L.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&&((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(I,L,X,J){const ee=I.argsArray,te=I.fnArray;let w=L||0;const F=ee.length;if(F===w)return w;const z=F-w>C&&typeof X=="function",H=z?Date.now()+M:0;let $=0;const Q=this.commonObjs,S=this.objs;let A;for(;;){if(J!==void 0&&w===J.nextBreakPoint)return J.breakIt(w,X),w;if(A=te[w],A!==r.OPS.dependency)this[A].apply(this,ee[w]);else for(const D of ee[w]){const j=D.startsWith("g_")?Q:S;if(!j.has(D))return j.get(D,X),w}if(w++,w===F)return w;if(z&&++$>C){if(Date.now()>H)return X(),w;$=0}}}endDrawing(){ce(this,oe,yt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const I of this._cachedBitmapsMap.values()){for(const L of I.values())typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement&&(L.width=L.height=0);I.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(I,L){const X=I.width,J=I.height;let ee=Math.max(Math.hypot(L[0],L[1]),1),te=Math.max(Math.hypot(L[2],L[3]),1),w=X,F=J,z="prescale1",H,$;for(;ee>2&&w>1||te>2&&F>1;){let Q=w,S=F;ee>2&&w>1&&(Q=Math.ceil(w/2),ee/=w/Q),te>2&&F>1&&(S=Math.ceil(F/2),te/=F/S),H=this.cachedCanvases.getCanvas(z,Q,S),$=H.context,$.clearRect(0,0,Q,S),$.drawImage(I,0,0,w,F,0,0,Q,S),I=H.canvas,w=Q,F=S,z=z==="prescale1"?"prescale2":"prescale1"}return{img:I,paintWidth:w,paintHeight:F}}_createMaskCanvas(I){const L=this.ctx,{width:X,height:J}=I,ee=this.current.fillColor,te=this.current.patternFill,w=(0,n.getCurrentTransform)(L);let F,z,H,$;if((I.bitmap||I.data)&&I.count>1){const _e=I.bitmap||I.data.buffer,be=w.slice(0,4);z=JSON.stringify(te?be:[be,ee]),F=this._cachedBitmapsMap.get(_e),F||(F=new Map,this._cachedBitmapsMap.set(_e,F));const me=F.get(z);if(me&&!te){const ye=Math.round(Math.min(w[0],w[2])+w[4]),Ee=Math.round(Math.min(w[1],w[3])+w[5]);return{canvas:me,offsetX:ye,offsetY:Ee}}H=me}H||($=this.cachedCanvases.getCanvas("maskCanvas",X,J),c($.context,I));let Q=r.Util.transform(w,[1/X,0,0,-1/J,0,0]);Q=r.Util.transform(Q,[1,0,0,1,0,-J]);const S=r.Util.applyTransform([0,0],Q),A=r.Util.applyTransform([X,J],Q),D=r.Util.normalizeRect([S[0],S[1],A[0],A[1]]),j=Math.round(D[2]-D[0])||1,k=Math.round(D[3]-D[1])||1,V=this.cachedCanvases.getCanvas("fillCanvas",j,k),Z=V.context,K=Math.min(S[0],A[0]),de=Math.min(S[1],A[1]);Z.translate(-K,-de),Z.transform(...Q),H||(H=this._scaleImage($.canvas,(0,n.getCurrentTransformInverse)(Z)),H=H.img,F&&te&&F.set(z,H)),Z.imageSmoothingEnabled=he((0,n.getCurrentTransform)(Z),I.interpolate),E(Z,H,0,0,H.width,H.height,0,0,X,J),Z.globalCompositeOperation="source-in";const se=r.Util.transform((0,n.getCurrentTransformInverse)(Z),[1,0,0,1,-K,-de]);return Z.fillStyle=te?ee.getPattern(L,this,se,u.PathType.FILL):ee,Z.fillRect(0,0,X,J),F&&!te&&(this.cachedCanvases.delete("fillCanvas"),F.set(z,V.canvas)),{canvas:V.canvas,offsetX:Math.round(K),offsetY:Math.round(de)}}setLineWidth(I){I!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=I,this.ctx.lineWidth=I}setLineCap(I){this.ctx.lineCap=ae[I]}setLineJoin(I){this.ctx.lineJoin=U[I]}setMiterLimit(I){this.ctx.miterLimit=I}setDash(I,L){const X=this.ctx;X.setLineDash!==void 0&&(X.setLineDash(I),X.lineDashOffset=L)}setRenderingIntent(I){}setFlatness(I){}setGState(I){for(let L=0,X=I.length;L<X;L++){const J=I[L],ee=J[0],te=J[1];switch(ee){case"LW":this.setLineWidth(te);break;case"LC":this.setLineCap(te);break;case"LJ":this.setLineJoin(te);break;case"ML":this.setMiterLimit(te);break;case"D":this.setDash(te[0],te[1]);break;case"RI":this.setRenderingIntent(te);break;case"FL":this.setFlatness(te);break;case"Font":this.setFont(te[0],te[1]);break;case"CA":this.current.strokeAlpha=J[1];break;case"ca":this.current.fillAlpha=J[1],this.ctx.globalAlpha=J[1];break;case"BM":this.ctx.globalCompositeOperation=te;break;case"SMask":this.current.activeSMask=te?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=te}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const I=this.inSMaskMode;this.current.activeSMask&&!I?this.beginSMaskMode():!this.current.activeSMask&&I&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const I=this.ctx.canvas.width,L=this.ctx.canvas.height,X="smaskGroupAt"+this.groupLevel,J=this.cachedCanvases.getCanvas(X,I,L);this.suspendedCtx=this.ctx,this.ctx=J.context;const ee=this.ctx;ee.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),l(this.suspendedCtx,ee),a(ee,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(I){if(!this.current.activeSMask)return;I?(I[0]=Math.floor(I[0]),I[1]=Math.floor(I[1]),I[2]=Math.ceil(I[2]),I[3]=Math.ceil(I[3])):I=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const L=this.current.activeSMask,X=this.suspendedCtx;ne(X,L,this.ctx,I),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const I=this.current;this.stateStack.push(I),this.current=I.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(I,L,X,J,ee,te){this.ctx.transform(I,L,X,J,ee,te),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(I,L,X){const J=this.ctx,ee=this.current;let te=ee.x,w=ee.y,F,z;const H=(0,n.getCurrentTransform)(J),$=H[0]===0&&H[3]===0||H[1]===0&&H[2]===0,Q=$?X.slice(0):null;for(let S=0,A=0,D=I.length;S<D;S++)switch(I[S]|0){case r.OPS.rectangle:te=L[A++],w=L[A++];const j=L[A++],k=L[A++],V=te+j,Z=w+k;J.moveTo(te,w),j===0||k===0?J.lineTo(V,Z):(J.lineTo(V,w),J.lineTo(V,Z),J.lineTo(te,Z)),$||ee.updateRectMinMax(H,[te,w,V,Z]),J.closePath();break;case r.OPS.moveTo:te=L[A++],w=L[A++],J.moveTo(te,w),$||ee.updatePathMinMax(H,te,w);break;case r.OPS.lineTo:te=L[A++],w=L[A++],J.lineTo(te,w),$||ee.updatePathMinMax(H,te,w);break;case r.OPS.curveTo:F=te,z=w,te=L[A+4],w=L[A+5],J.bezierCurveTo(L[A],L[A+1],L[A+2],L[A+3],te,w),ee.updateCurvePathMinMax(H,F,z,L[A],L[A+1],L[A+2],L[A+3],te,w,Q),A+=6;break;case r.OPS.curveTo2:F=te,z=w,J.bezierCurveTo(te,w,L[A],L[A+1],L[A+2],L[A+3]),ee.updateCurvePathMinMax(H,F,z,te,w,L[A],L[A+1],L[A+2],L[A+3],Q),te=L[A+2],w=L[A+3],A+=4;break;case r.OPS.curveTo3:F=te,z=w,te=L[A+2],w=L[A+3],J.bezierCurveTo(L[A],L[A+1],te,w,te,w),ee.updateCurvePathMinMax(H,F,z,L[A],L[A+1],te,w,te,w,Q),A+=4;break;case r.OPS.closePath:J.closePath();break}$&&ee.updateScalingPathMinMax(H,Q),ee.setCurrentPoint(te,w)}closePath(){this.ctx.closePath()}stroke(I){I=typeof I<"u"?I:!0;const L=this.ctx,X=this.current.strokeColor;L.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof X=="object"&&(X!=null&&X.getPattern)?(L.save(),L.strokeStyle=X.getPattern(L,this,(0,n.getCurrentTransformInverse)(L),u.PathType.STROKE),this.rescaleAndStroke(!1),L.restore()):this.rescaleAndStroke(!0)),I&&this.consumePath(this.current.getClippedPathBoundingBox()),L.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(I){I=typeof I<"u"?I:!0;const L=this.ctx,X=this.current.fillColor,J=this.current.patternFill;let ee=!1;J&&(L.save(),L.fillStyle=X.getPattern(L,this,(0,n.getCurrentTransformInverse)(L),u.PathType.FILL),ee=!0);const te=this.current.getClippedPathBoundingBox();this.contentVisible&&te!==null&&(this.pendingEOFill?(L.fill("evenodd"),this.pendingEOFill=!1):L.fill()),ee&&L.restore(),I&&this.consumePath(te)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=q}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const I=this.pendingTextPaths,L=this.ctx;if(I===void 0){L.beginPath();return}L.save(),L.beginPath();for(const X of I)L.setTransform(...X.transform),L.translate(X.x,X.y),X.addToPath(L,X.fontSize);L.restore(),L.clip(),L.beginPath(),delete this.pendingTextPaths}setCharSpacing(I){this.current.charSpacing=I}setWordSpacing(I){this.current.wordSpacing=I}setHScale(I){this.current.textHScale=I/100}setLeading(I){this.current.leading=-I}setFont(I,L){const X=this.commonObjs.get(I),J=this.current;if(!X)throw new Error(`Can't find font for ${I}`);if(J.fontMatrix=X.fontMatrix||r.FONT_IDENTITY_MATRIX,(J.fontMatrix[0]===0||J.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+I),L<0?(L=-L,J.fontDirection=-1):J.fontDirection=1,this.current.font=X,this.current.fontSize=L,X.isType3Font)return;const ee=X.loadedName||"sans-serif";let te="normal";X.black?te="900":X.bold&&(te="bold");const w=X.italic?"italic":"normal",F=`"${ee}", ${X.fallbackName}`;let z=L;L<T?z=T:L>o&&(z=o),this.current.fontSizeScale=L/z,this.ctx.font=`${w} ${te} ${z}px ${F}`}setTextRenderingMode(I){this.current.textRenderingMode=I}setTextRise(I){this.current.textRise=I}moveText(I,L){this.current.x=this.current.lineX+=I,this.current.y=this.current.lineY+=L}setLeadingMoveText(I,L){this.setLeading(-L),this.moveText(I,L)}setTextMatrix(I,L,X,J,ee,te){this.current.textMatrix=[I,L,X,J,ee,te],this.current.textMatrixScale=Math.hypot(I,L),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(I,L,X,J){const ee=this.ctx,te=this.current,w=te.font,F=te.textRenderingMode,z=te.fontSize/te.fontSizeScale,H=F&r.TextRenderingMode.FILL_STROKE_MASK,$=!!(F&r.TextRenderingMode.ADD_TO_PATH_FLAG),Q=te.patternFill&&!w.missingFile;let S;(w.disableFontFace||$||Q)&&(S=w.getPathGenerator(this.commonObjs,I)),w.disableFontFace||Q?(ee.save(),ee.translate(L,X),ee.beginPath(),S(ee,z),J&&ee.setTransform(...J),(H===r.TextRenderingMode.FILL||H===r.TextRenderingMode.FILL_STROKE)&&ee.fill(),(H===r.TextRenderingMode.STROKE||H===r.TextRenderingMode.FILL_STROKE)&&ee.stroke(),ee.restore()):((H===r.TextRenderingMode.FILL||H===r.TextRenderingMode.FILL_STROKE)&&ee.fillText(I,L,X),(H===r.TextRenderingMode.STROKE||H===r.TextRenderingMode.FILL_STROKE)&&ee.strokeText(I,L,X)),$&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(ee),x:L,y:X,fontSize:z,addToPath:S})}get isFontSubpixelAAEnabled(){const{context:I}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);I.scale(1.5,1),I.fillText("I",0,10);const L=I.getImageData(0,0,10,10).data;let X=!1;for(let J=3;J<L.length;J+=4)if(L[J]>0&&L[J]<255){X=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",X)}showText(I){const L=this.current,X=L.font;if(X.isType3Font)return this.showType3Text(I);const J=L.fontSize;if(J===0)return;const ee=this.ctx,te=L.fontSizeScale,w=L.charSpacing,F=L.wordSpacing,z=L.fontDirection,H=L.textHScale*z,$=I.length,Q=X.vertical,S=Q?1:-1,A=X.defaultVMetrics,D=J*L.fontMatrix[0],j=L.textRenderingMode===r.TextRenderingMode.FILL&&!X.disableFontFace&&!L.patternFill;ee.save(),ee.transform(...L.textMatrix),ee.translate(L.x,L.y+L.textRise),z>0?ee.scale(H,-1):ee.scale(H,1);let k;if(L.patternFill){ee.save();const se=L.fillColor.getPattern(ee,this,(0,n.getCurrentTransformInverse)(ee),u.PathType.FILL);k=(0,n.getCurrentTransform)(ee),ee.restore(),ee.fillStyle=se}let V=L.lineWidth;const Z=L.textMatrixScale;if(Z===0||V===0){const se=L.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(se===r.TextRenderingMode.STROKE||se===r.TextRenderingMode.FILL_STROKE)&&(V=this.getSinglePixelWidth())}else V/=Z;te!==1&&(ee.scale(te,te),V/=te),ee.lineWidth=V;let K=0,de;for(de=0;de<$;++de){const se=I[de];if(typeof se=="number"){K+=S*se*J/1e3;continue}let _e=!1;const be=(se.isSpace?F:0)+w,me=se.fontChar,ye=se.accent;let Ee,Ae,we=se.width;if(Q){const xe=se.vmetric||A,Se=-(se.vmetric?xe[1]:we*.5)*D,Pe=xe[2]*D;we=xe?-xe[0]:we,Ee=Se/te,Ae=(K+Pe)/te}else Ee=K/te,Ae=0;if(X.remeasure&&we>0){const xe=ee.measureText(me).width*1e3/J*te;if(we<xe&&this.isFontSubpixelAAEnabled){const Se=we/xe;_e=!0,ee.save(),ee.scale(Se,1),Ee/=Se}else we!==xe&&(Ee+=(we-xe)/2e3*J/te)}if(this.contentVisible&&(se.isInFont||X.missingFile)){if(j&&!ye)ee.fillText(me,Ee,Ae);else if(this.paintChar(me,Ee,Ae,k),ye){const xe=Ee+J*ye.offset.x/te,Se=Ae-J*ye.offset.y/te;this.paintChar(ye.fontChar,xe,Se,k)}}let Ce;Q?Ce=we*D-be*z:Ce=we*D+be*z,K+=Ce,_e&&ee.restore()}Q?L.y-=K:L.x+=K*H,ee.restore(),this.compose()}showType3Text(I){const L=this.ctx,X=this.current,J=X.font,ee=X.fontSize,te=X.fontDirection,w=J.vertical?1:-1,F=X.charSpacing,z=X.wordSpacing,H=X.textHScale*te,$=X.fontMatrix||r.FONT_IDENTITY_MATRIX,Q=I.length,S=X.textRenderingMode===r.TextRenderingMode.INVISIBLE;let A,D,j,k;if(!(S||ee===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,L.save(),L.transform(...X.textMatrix),L.translate(X.x,X.y),L.scale(H,te),A=0;A<Q;++A){if(D=I[A],typeof D=="number"){k=w*D*ee/1e3,this.ctx.translate(k,0),X.x+=k*H;continue}const V=(D.isSpace?z:0)+F,Z=J.charProcOperatorList[D.operatorListId];if(!Z){(0,r.warn)(`Type3 character "${D.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=D,this.save(),L.scale(ee,ee),L.transform(...$),this.executeOperatorList(Z),this.restore()),j=r.Util.applyTransform([D.width,0],$)[0]*ee+V,L.translate(j,0),X.x+=j*H}L.restore(),this.processingType3=null}}setCharWidth(I,L){}setCharWidthAndBounds(I,L,X,J,ee,te){this.ctx.rect(X,J,ee-X,te-J),this.ctx.clip(),this.endPath()}getColorN_Pattern(I){let L;if(I[0]==="TilingPattern"){const X=I[1],J=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),ee={createCanvasGraphics:te=>new ie(te,this.commonObjs,this.objs,this.canvasFactory)};L=new u.TilingPattern(I,X,this.ctx,ee,J)}else L=this._getPattern(I[1],I[2]);return L}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(I,L,X){var ee;const J=((ee=this.selectColor)==null?void 0:ee.call(this,I,L,X))||r.Util.makeHexColor(I,L,X);this.ctx.strokeStyle=J,this.current.strokeColor=J}setFillRGBColor(I,L,X){var ee;const J=((ee=this.selectColor)==null?void 0:ee.call(this,I,L,X))||r.Util.makeHexColor(I,L,X);this.ctx.fillStyle=J,this.current.fillColor=J,this.current.patternFill=!1}_getPattern(I,L=null){let X;return this.cachedPatterns.has(I)?X=this.cachedPatterns.get(I):(X=(0,u.getShadingPattern)(this.objs.get(I)),this.cachedPatterns.set(I,X)),L&&(X.matrix=L),X}shadingFill(I){if(!this.contentVisible)return;const L=this.ctx;this.save();const X=this._getPattern(I);L.fillStyle=X.getPattern(L,this,(0,n.getCurrentTransformInverse)(L),u.PathType.SHADING);const J=(0,n.getCurrentTransformInverse)(L);if(J){const ee=L.canvas,te=ee.width,w=ee.height,F=r.Util.applyTransform([0,0],J),z=r.Util.applyTransform([0,w],J),H=r.Util.applyTransform([te,0],J),$=r.Util.applyTransform([te,w],J),Q=Math.min(F[0],z[0],H[0],$[0]),S=Math.min(F[1],z[1],H[1],$[1]),A=Math.max(F[0],z[0],H[0],$[0]),D=Math.max(F[1],z[1],H[1],$[1]);this.ctx.fillRect(Q,S,A-Q,D-S)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(I,L){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(I)&&I.length===6&&this.transform(...I),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),L)){const X=L[2]-L[0],J=L[3]-L[1];this.ctx.rect(L[0],L[1],X,J),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),L),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(I){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const L=this.ctx;I.isolated||(0,r.info)("TODO: Support non-isolated groups."),I.knockout&&(0,r.warn)("Knockout groups not supported.");const X=(0,n.getCurrentTransform)(L);if(I.matrix&&L.transform(...I.matrix),!I.bbox)throw new Error("Bounding box is required.");let J=r.Util.getAxialAlignedBoundingBox(I.bbox,(0,n.getCurrentTransform)(L));const ee=[0,0,L.canvas.width,L.canvas.height];J=r.Util.intersect(J,ee)||[0,0,0,0];const te=Math.floor(J[0]),w=Math.floor(J[1]);let F=Math.max(Math.ceil(J[2])-te,1),z=Math.max(Math.ceil(J[3])-w,1),H=1,$=1;F>m&&(H=F/m,F=m),z>m&&($=z/m,z=m),this.current.startNewPathAndClipBox([0,0,F,z]);let Q="groupAt"+this.groupLevel;I.smask&&(Q+="_smask_"+this.smaskCounter++%2);const S=this.cachedCanvases.getCanvas(Q,F,z),A=S.context;A.scale(1/H,1/$),A.translate(-te,-w),A.transform(...X),I.smask?this.smaskStack.push({canvas:S.canvas,context:A,offsetX:te,offsetY:w,scaleX:H,scaleY:$,subtype:I.smask.subtype,backdrop:I.smask.backdrop,transferMap:I.smask.transferMap||null,startTransformInverse:null}):(L.setTransform(1,0,0,1,0,0),L.translate(te,w),L.scale(H,$),L.save()),l(L,A),this.ctx=A,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(L),this.groupLevel++}endGroup(I){if(!this.contentVisible)return;this.groupLevel--;const L=this.ctx,X=this.groupStack.pop();if(this.ctx=X,this.ctx.imageSmoothingEnabled=!1,I.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const J=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...J);const ee=r.Util.getAxialAlignedBoundingBox([0,0,L.canvas.width,L.canvas.height],J);this.ctx.drawImage(L.canvas,0,0),this.ctx.restore(),this.compose(ee)}}beginAnnotation(I,L,X,J,ee){if(ce(this,oe,yt).call(this),s(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(L)&&L.length===4){const te=L[2]-L[0],w=L[3]-L[1];if(ee&&this.annotationCanvasMap){X=X.slice(),X[4]-=L[0],X[5]-=L[1],L=L.slice(),L[0]=L[1]=0,L[2]=te,L[3]=w;const[F,z]=r.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:H}=this,$=Math.ceil(te*this.outputScaleX*H),Q=Math.ceil(w*this.outputScaleY*H);this.annotationCanvas=this.canvasFactory.create($,Q);const{canvas:S,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(I,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.setTransform(F,0,0,-z,0,w*z),s(this.ctx,this.foregroundColor)}else s(this.ctx,this.foregroundColor),this.ctx.rect(L[0],L[1],te,w),this.ctx.clip(),this.endPath()}this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...X),this.transform(...J)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(I){if(!this.contentVisible)return;const L=I.count;I=this.getObject(I.data,I),I.count=L;const X=this.ctx,J=this.processingType3;if(J&&(J.compiled===void 0&&(J.compiled=P(I)),J.compiled)){J.compiled(X);return}const ee=this._createMaskCanvas(I),te=ee.canvas;X.save(),X.setTransform(1,0,0,1,0,0),X.drawImage(te,ee.offsetX,ee.offsetY),X.restore(),this.compose()}paintImageMaskXObjectRepeat(I,L,X=0,J=0,ee,te){if(!this.contentVisible)return;I=this.getObject(I.data,I);const w=this.ctx;w.save();const F=(0,n.getCurrentTransform)(w);w.transform(L,X,J,ee,0,0);const z=this._createMaskCanvas(I);w.setTransform(1,0,0,1,0,0);for(let H=0,$=te.length;H<$;H+=2){const Q=r.Util.transform(F,[L,X,J,ee,te[H],te[H+1]]),[S,A]=r.Util.applyTransform([0,0],Q);w.drawImage(z.canvas,S,A)}w.restore(),this.compose()}paintImageMaskXObjectGroup(I){if(!this.contentVisible)return;const L=this.ctx,X=this.current.fillColor,J=this.current.patternFill;for(const ee of I){const{data:te,width:w,height:F,transform:z}=ee,H=this.cachedCanvases.getCanvas("maskCanvas",w,F),$=H.context;$.save();const Q=this.getObject(te,ee);c($,Q),$.globalCompositeOperation="source-in",$.fillStyle=J?X.getPattern($,this,(0,n.getCurrentTransformInverse)(L),u.PathType.FILL):X,$.fillRect(0,0,w,F),$.restore(),L.save(),L.transform(...z),L.scale(1,-1),E(L,H.canvas,0,0,w,F,0,-1,1,1),L.restore()}this.compose()}paintImageXObject(I){if(!this.contentVisible)return;const L=this.getObject(I);if(!L){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(L)}paintImageXObjectRepeat(I,L,X,J){if(!this.contentVisible)return;const ee=this.getObject(I);if(!ee){(0,r.warn)("Dependent image isn't ready yet");return}const te=ee.width,w=ee.height,F=[];for(let z=0,H=J.length;z<H;z+=2)F.push({transform:[L,0,0,X,J[z],J[z+1]],x:0,y:0,w:te,h:w});this.paintInlineImageXObjectGroup(ee,F)}paintInlineImageXObject(I){if(!this.contentVisible)return;const L=I.width,X=I.height,J=this.ctx;this.save(),J.scale(1/L,-1/X);let ee;if(typeof HTMLElement=="function"&&I instanceof HTMLElement||!I.data)ee=I;else{const z=this.cachedCanvases.getCanvas("inlineImage",L,X),H=z.context;p(H,I,this.current.transferMaps),ee=z.canvas}const te=this._scaleImage(ee,(0,n.getCurrentTransformInverse)(J));J.imageSmoothingEnabled=he((0,n.getCurrentTransform)(J),I.interpolate);const[w,F]=E(J,te.img,0,0,te.paintWidth,te.paintHeight,0,-X,L,X);if(this.imageLayer){const[z,H]=r.Util.applyTransform([0,-X],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:I,left:z,top:H,width:w,height:F})}this.compose(),this.restore()}paintInlineImageXObjectGroup(I,L){if(!this.contentVisible)return;const X=this.ctx,J=I.width,ee=I.height,te=this.cachedCanvases.getCanvas("inlineImage",J,ee),w=te.context;p(w,I,this.current.transferMaps);for(const F of L){if(X.save(),X.transform(...F.transform),X.scale(1,-1),E(X,te.canvas,F.x,F.y,F.w,F.h,0,-1,1,1),this.imageLayer){const[z,H]=r.Util.applyTransform([F.x,F.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:I,left:z,top:H,width:J,height:ee})}X.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(I){}markPointProps(I,L){}beginMarkedContent(I){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(I,L){I==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(L)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(I){const L=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(I);const X=this.ctx;this.pendingClip&&(L||(this.pendingClip===q?X.clip("evenodd"):X.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),X.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const I=(0,n.getCurrentTransform)(this.ctx);if(I[1]===0&&I[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(I[0]),Math.abs(I[3]));else{const L=Math.abs(I[0]*I[3]-I[2]*I[1]),X=Math.hypot(I[0],I[2]),J=Math.hypot(I[1],I[3]);this._cachedGetSinglePixelWidth=Math.max(X,J)/L}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:I}=this.current,L=(0,n.getCurrentTransform)(this.ctx);let X,J;if(L[1]===0&&L[2]===0){const ee=Math.abs(L[0]),te=Math.abs(L[3]);if(I===0)X=1/ee,J=1/te;else{const w=ee*I,F=te*I;X=w<1?1/w:1,J=F<1?1/F:1}}else{const ee=Math.abs(L[0]*L[3]-L[2]*L[1]),te=Math.hypot(L[0],L[1]),w=Math.hypot(L[2],L[3]);if(I===0)X=w/ee,J=te/ee;else{const F=I*ee;X=w>F?w/F:1,J=te>F?te/F:1}}this._cachedScaleForStroking=[X,J]}return this._cachedScaleForStroking}rescaleAndStroke(I){const{ctx:L}=this,{lineWidth:X}=this.current,[J,ee]=this.getScaleForStroking();if(L.lineWidth=X||1,J===1&&ee===1){L.stroke();return}let te,w,F;I&&(te=(0,n.getCurrentTransform)(L),w=L.getLineDash().slice(),F=L.lineDashOffset),L.scale(J,ee);const z=Math.max(J,ee);L.setLineDash(L.getLineDash().map(H=>H/z)),L.lineDashOffset/=z,L.stroke(),I&&(L.setTransform(...te),L.setLineDash(w),L.lineDashOffset=F)}isContentVisible(){for(let I=this.markedContentStack.length-1;I>=0;I--)if(!this.markedContentStack[I].visible)return!1;return!0}};oe=new WeakSet,yt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let W=ie;t.CanvasGraphics=W;for(const Y in r.OPS)W.prototype[Y]!==void 0&&(W.prototype[r.OPS[Y]]=W.prototype[Y])},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=d;var n=i(1),r=i(8),u=i(3);const f={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=f;function g(E,P){if(!P||u.isNodeJS)return;const b=P[2]-P[0],p=P[3]-P[1],c=new Path2D;c.rect(P[0],P[1],b,p),E.clip(c)}class T{constructor(){this.constructor===T&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class o extends T{constructor(P){super(),this._type=P[1],this._bbox=P[2],this._colorStops=P[3],this._p0=P[4],this._p1=P[5],this._r0=P[6],this._r1=P[7],this.matrix=null}_createGradient(P){let b;this._type==="axial"?b=P.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(b=P.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const p of this._colorStops)b.addColorStop(p[0],p[1]);return b}getPattern(P,b,p,c){let l;if(c===f.STROKE||c===f.FILL){const s=b.current.getClippedPathBoundingBox(c,(0,r.getCurrentTransform)(P))||[0,0,0,0],x=Math.ceil(s[2]-s[0])||1,R=Math.ceil(s[3]-s[1])||1,O=b.cachedCanvases.getCanvas("pattern",x,R,!0),B=O.context;B.clearRect(0,0,B.canvas.width,B.canvas.height),B.beginPath(),B.rect(0,0,B.canvas.width,B.canvas.height),B.translate(-s[0],-s[1]),p=n.Util.transform(p,[1,0,0,1,s[0],s[1]]),B.transform(...b.baseTransform),this.matrix&&B.transform(...this.matrix),g(B,this._bbox),B.fillStyle=this._createGradient(B),B.fill(),l=P.createPattern(O.canvas,"no-repeat");const ne=new DOMMatrix(p);try{l.setTransform(ne)}catch(he){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${he==null?void 0:he.message}".`)}}else g(P,this._bbox),l=this._createGradient(P);return l}}function m(E,P,b,p,c,l,s,x){const R=P.coords,O=P.colors,B=E.data,ne=E.width*4;let he;R[b+1]>R[p+1]&&(he=b,b=p,p=he,he=l,l=s,s=he),R[p+1]>R[c+1]&&(he=p,p=c,c=he,he=s,s=x,x=he),R[b+1]>R[p+1]&&(he=b,b=p,p=he,he=l,l=s,s=he);const ae=(R[b]+P.offsetX)*P.scaleX,U=(R[b+1]+P.offsetY)*P.scaleY,G=(R[p]+P.offsetX)*P.scaleX,q=(R[p+1]+P.offsetY)*P.scaleY,W=(R[c]+P.offsetX)*P.scaleX,oe=(R[c+1]+P.offsetY)*P.scaleY;if(U>=oe)return;const ue=O[l],ie=O[l+1],Y=O[l+2],I=O[s],L=O[s+1],X=O[s+2],J=O[x],ee=O[x+1],te=O[x+2],w=Math.round(U),F=Math.round(oe);let z,H,$,Q,S,A,D,j;for(let k=w;k<=F;k++){if(k<q){let se;k<U?se=0:se=(U-k)/(U-q),z=ae-(ae-G)*se,H=ue-(ue-I)*se,$=ie-(ie-L)*se,Q=Y-(Y-X)*se}else{let se;k>oe?se=1:q===oe?se=0:se=(q-k)/(q-oe),z=G-(G-W)*se,H=I-(I-J)*se,$=L-(L-ee)*se,Q=X-(X-te)*se}let V;k<U?V=0:k>oe?V=1:V=(U-k)/(U-oe),S=ae-(ae-W)*V,A=ue-(ue-J)*V,D=ie-(ie-ee)*V,j=Y-(Y-te)*V;const Z=Math.round(Math.min(z,S)),K=Math.round(Math.max(z,S));let de=ne*k+Z*4;for(let se=Z;se<=K;se++)V=(z-se)/(z-S),V<0?V=0:V>1&&(V=1),B[de++]=H-(H-A)*V|0,B[de++]=$-($-D)*V|0,B[de++]=Q-(Q-j)*V|0,B[de++]=255}}function M(E,P,b){const p=P.coords,c=P.colors;let l,s;switch(P.type){case"lattice":const x=P.verticesPerRow,R=Math.floor(p.length/x)-1,O=x-1;for(l=0;l<R;l++){let B=l*x;for(let ne=0;ne<O;ne++,B++)m(E,b,p[B],p[B+1],p[B+x],c[B],c[B+1],c[B+x]),m(E,b,p[B+x+1],p[B+1],p[B+x],c[B+x+1],c[B+1],c[B+x])}break;case"triangles":for(l=0,s=p.length;l<s;l+=3)m(E,b,p[l],p[l+1],p[l+2],c[l],c[l+1],c[l+2]);break;default:throw new Error("illegal figure")}}class C extends T{constructor(P){super(),this._coords=P[2],this._colors=P[3],this._figures=P[4],this._bounds=P[5],this._bbox=P[7],this._background=P[8],this.matrix=null}_createMeshCanvas(P,b,p){const x=Math.floor(this._bounds[0]),R=Math.floor(this._bounds[1]),O=Math.ceil(this._bounds[2])-x,B=Math.ceil(this._bounds[3])-R,ne=Math.min(Math.ceil(Math.abs(O*P[0]*1.1)),3e3),he=Math.min(Math.ceil(Math.abs(B*P[1]*1.1)),3e3),ae=O/ne,U=B/he,G={coords:this._coords,colors:this._colors,offsetX:-x,offsetY:-R,scaleX:1/ae,scaleY:1/U},q=ne+2*2,W=he+2*2,oe=p.getCanvas("mesh",q,W,!1),ue=oe.context,ie=ue.createImageData(ne,he);if(b){const I=ie.data;for(let L=0,X=I.length;L<X;L+=4)I[L]=b[0],I[L+1]=b[1],I[L+2]=b[2],I[L+3]=255}for(const I of this._figures)M(ie,I,G);return ue.putImageData(ie,2,2),{canvas:oe.canvas,offsetX:x-2*ae,offsetY:R-2*U,scaleX:ae,scaleY:U}}getPattern(P,b,p,c){g(P,this._bbox);let l;if(c===f.SHADING)l=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(P));else if(l=n.Util.singularValueDecompose2dScale(b.baseTransform),this.matrix){const x=n.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*x[0],l[1]*x[1]]}const s=this._createMeshCanvas(l,c===f.SHADING?null:this._background,b.cachedCanvases);return c!==f.SHADING&&(P.setTransform(...b.baseTransform),this.matrix&&P.transform(...this.matrix)),P.translate(s.offsetX,s.offsetY),P.scale(s.scaleX,s.scaleY),P.createPattern(s.canvas,"no-repeat")}}class y extends T{getPattern(){return"hotpink"}}function d(E){switch(E[0]){case"RadialAxial":return new o(E);case"Mesh":return new C(E);case"Dummy":return new y}throw new Error(`Unknown IR type: ${E[0]}`)}const a={COLORED:1,UNCOLORED:2};class _{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(P,b,p,c,l){this.operatorList=P[2],this.matrix=P[3]||[1,0,0,1,0,0],this.bbox=P[4],this.xstep=P[5],this.ystep=P[6],this.paintType=P[7],this.tilingType=P[8],this.color=b,this.ctx=p,this.canvasGraphicsFactory=c,this.baseTransform=l}createPatternCanvas(P){const b=this.operatorList,p=this.bbox,c=this.xstep,l=this.ystep,s=this.paintType,x=this.tilingType,R=this.color,O=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+x);const B=p[0],ne=p[1],he=p[2],ae=p[3],U=n.Util.singularValueDecompose2dScale(this.matrix),G=n.Util.singularValueDecompose2dScale(this.baseTransform),q=[U[0]*G[0],U[1]*G[1]],W=this.getSizeAndScale(c,this.ctx.canvas.width,q[0]),oe=this.getSizeAndScale(l,this.ctx.canvas.height,q[1]),ue=P.cachedCanvases.getCanvas("pattern",W.size,oe.size,!0),ie=ue.context,Y=O.createCanvasGraphics(ie);Y.groupLevel=P.groupLevel,this.setFillAndStrokeStyleToContext(Y,s,R);let I=B,L=ne,X=he,J=ae;return B<0&&(I=0,X+=Math.abs(B)),ne<0&&(L=0,J+=Math.abs(ne)),ie.translate(-(W.scale*I),-(oe.scale*L)),Y.transform(W.scale,0,0,oe.scale,0,0),ie.save(),this.clipBbox(Y,I,L,X,J),Y.baseTransform=(0,r.getCurrentTransform)(Y.ctx),Y.executeOperatorList(b),Y.endDrawing(),{canvas:ue.canvas,scaleX:W.scale,scaleY:oe.scale,offsetX:I,offsetY:L}}getSizeAndScale(P,b,p){P=Math.abs(P);const c=Math.max(_.MAX_PATTERN_SIZE,b);let l=Math.ceil(P*p);return l>=c?l=c:p=l/P,{scale:p,size:l}}clipBbox(P,b,p,c,l){const s=c-b,x=l-p;P.ctx.rect(b,p,s,x),P.current.updateRectMinMax((0,r.getCurrentTransform)(P.ctx),[b,p,c,l]),P.clip(),P.endPath()}setFillAndStrokeStyleToContext(P,b,p){const c=P.ctx,l=P.current;switch(b){case a.COLORED:const s=this.ctx;c.fillStyle=s.fillStyle,c.strokeStyle=s.strokeStyle,l.fillColor=s.fillStyle,l.strokeColor=s.strokeStyle;break;case a.UNCOLORED:const x=n.Util.makeHexColor(p[0],p[1],p[2]);c.fillStyle=x,c.strokeStyle=x,l.fillColor=x,l.strokeColor=x;break;default:throw new n.FormatError(`Unsupported paint type: ${b}`)}}getPattern(P,b,p,c){let l=p;c!==f.SHADING&&(l=n.Util.transform(l,b.baseTransform),this.matrix&&(l=n.Util.transform(l,this.matrix)));const s=this.createPatternCanvas(b);let x=new DOMMatrix(l);x=x.translate(s.offsetX,s.offsetY),x=x.scale(1/s.scaleX,1/s.scaleY);const R=P.createPattern(s.canvas,"repeat");try{R.setTransform(x)}catch(O){(0,n.warn)(`TilingPattern.getPattern: "${O==null?void 0:O.message}".`)}return R}}t.TilingPattern=_},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=r;var n=i(1);function r({src:u,srcPos:f=0,dest:g,destPos:T=0,width:o,height:m,inverseDecode:M=!1}){const C=n.FeatureTest.isLittleEndian?4278190080:255,[y,d]=M?[0,C]:[C,0],a=o>>3,_=o&7,E=u.length;g=new Uint32Array(g.buffer);for(let P=0;P<m;P++){for(const p=f+a;f<p;f++){const c=f<E?u[f]:255;g[T++]=c&128?d:y,g[T++]=c&64?d:y,g[T++]=c&32?d:y,g[T++]=c&16?d:y,g[T++]=c&8?d:y,g[T++]=c&4?d:y,g[T++]=c&2?d:y,g[T++]=c&1?d:y}if(_===0)continue;const b=f<E?u[f++]:255;for(let p=0;p<_;p++)g[T++]=b&1<<7-p?d:y}return{srcPos:f,destPos:T}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const i=Object.create(null);t.GlobalWorkerOptions=i,i.workerPort=i.workerPort===void 0?null:i.workerPort,i.workerSrc=i.workerSrc===void 0?"":i.workerSrc},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=i(1);const r={UNKNOWN:0,DATA:1,ERROR:2},u={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f(T){switch(T instanceof Error||typeof T=="object"&&T!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),T.name){case"AbortException":return new n.AbortException(T.message);case"MissingPDFException":return new n.MissingPDFException(T.message);case"PasswordException":return new n.PasswordException(T.message,T.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(T.message,T.status);case"UnknownErrorException":return new n.UnknownErrorException(T.message,T.details);default:return new n.UnknownErrorException(T.message,T.toString())}}class g{constructor(o,m,M){this.sourceName=o,this.targetName=m,this.comObj=M,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=C=>{const y=C.data;if(y.targetName!==this.sourceName)return;if(y.stream){this._processStreamMessage(y);return}if(y.callback){const a=y.callbackId,_=this.callbackCapabilities[a];if(!_)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],y.callback===r.DATA)_.resolve(y.data);else if(y.callback===r.ERROR)_.reject(f(y.reason));else throw new Error("Unexpected callback case");return}const d=this.actionHandler[y.action];if(!d)throw new Error(`Unknown action from worker: ${y.action}`);if(y.callbackId){const a=this.sourceName,_=y.sourceName;new Promise(function(E){E(d(y.data))}).then(function(E){M.postMessage({sourceName:a,targetName:_,callback:r.DATA,callbackId:y.callbackId,data:E})},function(E){M.postMessage({sourceName:a,targetName:_,callback:r.ERROR,callbackId:y.callbackId,reason:f(E)})});return}if(y.streamId){this._createStreamSink(y);return}d(y.data)},M.addEventListener("message",this._onComObjOnMessage)}on(o,m){const M=this.actionHandler;if(M[o])throw new Error(`There is already an actionName called "${o}"`);M[o]=m}send(o,m,M){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:o,data:m},M)}sendWithPromise(o,m,M){const C=this.callbackId++,y=(0,n.createPromiseCapability)();this.callbackCapabilities[C]=y;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:o,callbackId:C,data:m},M)}catch(d){y.reject(d)}return y.promise}sendWithStream(o,m,M,C){const y=this.streamId++,d=this.sourceName,a=this.targetName,_=this.comObj;return new ReadableStream({start:E=>{const P=(0,n.createPromiseCapability)();return this.streamControllers[y]={controller:E,startCall:P,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:d,targetName:a,action:o,streamId:y,data:m,desiredSize:E.desiredSize},C),P.promise},pull:E=>{const P=(0,n.createPromiseCapability)();return this.streamControllers[y].pullCall=P,_.postMessage({sourceName:d,targetName:a,stream:u.PULL,streamId:y,desiredSize:E.desiredSize}),P.promise},cancel:E=>{(0,n.assert)(E instanceof Error,"cancel must have a valid reason");const P=(0,n.createPromiseCapability)();return this.streamControllers[y].cancelCall=P,this.streamControllers[y].isClosed=!0,_.postMessage({sourceName:d,targetName:a,stream:u.CANCEL,streamId:y,reason:f(E)}),P.promise}},M)}_createStreamSink(o){const m=o.streamId,M=this.sourceName,C=o.sourceName,y=this.comObj,d=this,a=this.actionHandler[o.action],_={enqueue(E,P=1,b){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=P,p>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),y.postMessage({sourceName:M,targetName:C,stream:u.ENQUEUE,streamId:m,chunk:E},b)},close(){this.isCancelled||(this.isCancelled=!0,y.postMessage({sourceName:M,targetName:C,stream:u.CLOSE,streamId:m}),delete d.streamSinks[m])},error(E){(0,n.assert)(E instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,y.postMessage({sourceName:M,targetName:C,stream:u.ERROR,streamId:m,reason:f(E)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:o.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[m]=_,new Promise(function(E){E(a(o.data,_))}).then(function(){y.postMessage({sourceName:M,targetName:C,stream:u.START_COMPLETE,streamId:m,success:!0})},function(E){y.postMessage({sourceName:M,targetName:C,stream:u.START_COMPLETE,streamId:m,reason:f(E)})})}_processStreamMessage(o){const m=o.streamId,M=this.sourceName,C=o.sourceName,y=this.comObj,d=this.streamControllers[m],a=this.streamSinks[m];switch(o.stream){case u.START_COMPLETE:o.success?d.startCall.resolve():d.startCall.reject(f(o.reason));break;case u.PULL_COMPLETE:o.success?d.pullCall.resolve():d.pullCall.reject(f(o.reason));break;case u.PULL:if(!a){y.postMessage({sourceName:M,targetName:C,stream:u.PULL_COMPLETE,streamId:m,success:!0});break}a.desiredSize<=0&&o.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=o.desiredSize,new Promise(function(_){_(a.onPull&&a.onPull())}).then(function(){y.postMessage({sourceName:M,targetName:C,stream:u.PULL_COMPLETE,streamId:m,success:!0})},function(_){y.postMessage({sourceName:M,targetName:C,stream:u.PULL_COMPLETE,streamId:m,reason:f(_)})});break;case u.ENQUEUE:if((0,n.assert)(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(o.chunk);break;case u.CLOSE:if((0,n.assert)(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),this._deleteStreamController(d,m);break;case u.ERROR:(0,n.assert)(d,"error should have stream controller"),d.controller.error(f(o.reason)),this._deleteStreamController(d,m);break;case u.CANCEL_COMPLETE:o.success?d.cancelCall.resolve():d.cancelCall.reject(f(o.reason)),this._deleteStreamController(d,m);break;case u.CANCEL:if(!a)break;new Promise(function(_){_(a.onCancel&&a.onCancel(f(o.reason)))}).then(function(){y.postMessage({sourceName:M,targetName:C,stream:u.CANCEL_COMPLETE,streamId:m,success:!0})},function(_){y.postMessage({sourceName:M,targetName:C,stream:u.CANCEL_COMPLETE,streamId:m,reason:f(_)})}),a.sinkCapability.reject(f(o.reason)),a.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(o,m){await Promise.allSettled([o.startCall&&o.startCall.promise,o.pullCall&&o.pullCall.promise,o.cancelCall&&o.cancelCall.promise]),delete this.streamControllers[m]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=g},(e,t,i)=>{var u,f;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=i(1);class r{constructor({parsedData:T,rawData:o}){pe(this,u);pe(this,f);ge(this,u,T),ge(this,f,o)}getRaw(){return N(this,f)}get(T){return N(this,u).get(T)??null}getAll(){return(0,n.objectFromMap)(N(this,u))}has(T){return N(this,u).has(T)}}u=new WeakMap,f=new WeakMap,t.Metadata=r},(e,t,i)=>{var g,T,o,m,M,C,Et;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=i(1);const r=Symbol("INTERNAL");class u{constructor(a,_){pe(this,g,!0);this.name=a,this.intent=_}get visible(){return N(this,g)}_setVisible(a,_){a!==r&&(0,n.unreachable)("Internal method `_setVisible` called."),ge(this,g,_)}}g=new WeakMap;class f{constructor(a){pe(this,C);pe(this,T,!0);pe(this,o,new Map);pe(this,m,null);pe(this,M,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,ge(this,M,a.order);for(const _ of a.groups)N(this,o).set(_.id,new u(_.name,_.intent));if(a.baseState==="OFF")for(const _ of N(this,o).values())_._setVisible(r,!1);for(const _ of a.on)N(this,o).get(_)._setVisible(r,!0);for(const _ of a.off)N(this,o).get(_)._setVisible(r,!1);ge(this,m,new Map);for(const[_,E]of N(this,o))N(this,m).set(_,E.visible)}}isVisible(a){if(N(this,o).size===0)return!0;if(!a)return(0,n.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return N(this,o).has(a.id)?N(this,o).get(a.id).visible:((0,n.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return ce(this,C,Et).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const _ of a.ids){if(!N(this,o).has(_))return(0,n.warn)(`Optional content group not found: ${_}`),!0;if(N(this,o).get(_).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const _ of a.ids){if(!N(this,o).has(_))return(0,n.warn)(`Optional content group not found: ${_}`),!0;if(!N(this,o).get(_).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const _ of a.ids){if(!N(this,o).has(_))return(0,n.warn)(`Optional content group not found: ${_}`),!0;if(!N(this,o).get(_).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const _ of a.ids){if(!N(this,o).has(_))return(0,n.warn)(`Optional content group not found: ${_}`),!0;if(N(this,o).get(_).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,n.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,_=!0){if(!N(this,o).has(a)){(0,n.warn)(`Optional content group not found: ${a}`);return}N(this,o).get(a)._setVisible(r,!!_),ge(this,T,null)}get hasInitialVisibility(){if(N(this,T)!==null)return N(this,T);for(const[a,_]of N(this,o)){const E=N(this,m).get(a);if(_.visible!==E)return ge(this,T,!1)}return ge(this,T,!0)}getOrder(){return N(this,o).size?N(this,M)?N(this,M).slice():[...N(this,o).keys()]:null}getGroups(){return N(this,o).size>0?(0,n.objectFromMap)(N(this,o)):null}getGroup(a){return N(this,o).get(a)||null}}T=new WeakMap,o=new WeakMap,m=new WeakMap,M=new WeakMap,C=new WeakSet,Et=function(a){const _=a.length;if(_<2)return!0;const E=a[0];for(let P=1;P<_;P++){const b=a[P];let p;if(Array.isArray(b))p=ce(this,C,Et).call(this,b);else if(N(this,o).has(b))p=N(this,o).get(b).visible;else return(0,n.warn)(`Optional content group not found: ${b}`),!0;switch(E){case"And":if(!p)return!1;break;case"Or":if(p)return!0;break;case"Not":return!p;default:return!0}}return E==="And"},t.OptionalContentConfig=f},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=i(1),r=i(8);class u{constructor(o,m){(0,n.assert)(m,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=o.progressiveDone||!1,this._contentDispositionFilename=o.contentDispositionFilename||null;const M=o.initialData;if((M==null?void 0:M.length)>0){const C=new Uint8Array(M).buffer;this._queuedChunks.push(C)}this._pdfDataRangeTransport=m,this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._contentLength=o.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((C,y)=>{this._onReceiveData({begin:C,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((C,y)=>{this._onProgress({loaded:C,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(C=>{this._onReceiveData({chunk:C})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(o){const m=new Uint8Array(o.chunk).buffer;if(o.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(m):this._queuedChunks.push(m);else{const M=this._rangeReaders.some(function(C){return C._begin!==o.begin?!1:(C._enqueue(m),!0)});(0,n.assert)(M,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var o;return((o=this._fullRequestReader)==null?void 0:o._loaded)??0}_onProgress(o){if(o.total===void 0){const m=this._rangeReaders[0];m!=null&&m.onProgress&&m.onProgress({loaded:o.loaded})}else{const m=this._fullRequestReader;m!=null&&m.onProgress&&m.onProgress({loaded:o.loaded,total:o.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(o){const m=this._rangeReaders.indexOf(o);m>=0&&this._rangeReaders.splice(m,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const o=this._queuedChunks;return this._queuedChunks=null,new f(this,o,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(o,m){if(m<=this._progressiveDataLength)return null;const M=new g(this,o,m);return this._pdfDataRangeTransport.requestDataRange(o,m),this._rangeReaders.push(M),M}cancelAllRequests(o){this._fullRequestReader&&this._fullRequestReader.cancel(o);for(const m of this._rangeReaders.slice(0))m.cancel(o);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=u;class f{constructor(o,m,M=!1,C=null){this._stream=o,this._done=M||!1,this._filename=(0,r.isPdfFile)(C)?C:null,this._queuedChunks=m||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),o._fullRequestReader=this,this.onProgress=null}_enqueue(o){this._done||(this._requests.length>0?this._requests.shift().resolve({value:o,done:!1}):this._queuedChunks.push(o),this._loaded+=o.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const o=(0,n.createPromiseCapability)();return this._requests.push(o),o.promise}cancel(o){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class g{constructor(o,m,M){this._stream=o,this._begin=m,this._end=M,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(o){if(!this._done){if(this._requests.length===0)this._queuedChunk=o;else{this._requests.shift().resolve({value:o,done:!1});for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const o=(0,n.createPromiseCapability)();return this._requests.push(o),o.promise}cancel(o){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class i{static textContent(r){const u=[],f={items:u,styles:Object.create(null)};function g(T){var M;if(!T)return;let o=null;const m=T.name;if(m==="#text")o=T.value;else if(i.shouldBuildText(m))(M=T==null?void 0:T.attributes)!=null&&M.textContent?o=T.attributes.textContent:T.value&&(o=T.value);else return;if(o!==null&&u.push({str:o}),!!T.children)for(const C of T.children)g(C)}return g(r),f}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}t.XfaText=i},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=i(9);const r=function(T){return new Promise((o,m)=>{require$$0$1.readFile(T,(C,y)=>{if(C||!y){m(new Error(C));return}o(new Uint8Array(y))})})};class u extends n.BaseCanvasFactory{_createCanvas(o,m){return require$$1.createCanvas(o,m)}}t.NodeCanvasFactory=u;class f extends n.BaseCMapReaderFactory{_fetchData(o,m){return r(o).then(M=>({cMapData:M,compressionType:m}))}}t.NodeCMapReaderFactory=f;class g extends n.BaseStandardFontDataFactory{_fetchData(o){return r(o)}}t.NodeStandardFontDataFactory=g},(e,t,i)=>{var T,o,m,M,C,y,d,a,_,At,Yt,St,Kt;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=i(7),r=i(1),u=i(23),f=i(24);const c=class c{constructor(s){pe(this,_);pe(this,T);pe(this,o,!1);pe(this,m,this.pointerup.bind(this));pe(this,M,this.pointerdown.bind(this));pe(this,C,new Map);pe(this,y,!1);pe(this,d,!1);pe(this,a);c._initialized||(c._initialized=!0,u.FreeTextEditor.initialize(s.l10n),f.InkEditor.initialize(s.l10n),s.uiManager.registerEditorTypes([u.FreeTextEditor,f.InkEditor])),ge(this,a,s.uiManager),this.annotationStorage=s.annotationStorage,this.pageIndex=s.pageIndex,this.div=s.div,ge(this,T,s.accessibilityManager),N(this,a).addLayer(this)}updateToolbar(s){N(this,a).updateToolbar(s)}updateMode(s=N(this,a).getMode()){ce(this,_,Kt).call(this),s===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),N(this,a).unselectAll()}addInkEditorIfNeeded(s){if(!s&&N(this,a).getMode()!==r.AnnotationEditorType.INK)return;if(!s){for(const R of N(this,C).values())if(R.isEmpty()){R.setInBackground();return}}ce(this,_,St).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(s){N(this,a).setEditingState(s)}addCommands(s){N(this,a).addCommands(s)}enable(){this.div.style.pointerEvents="auto";for(const s of N(this,C).values())s.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const s of N(this,C).values())s.disableEditing()}setActiveEditor(s){N(this,a).getActive()!==s&&N(this,a).setActiveEditor(s)}enableClick(){this.div.addEventListener("pointerdown",N(this,M)),this.div.addEventListener("pointerup",N(this,m))}disableClick(){this.div.removeEventListener("pointerdown",N(this,M)),this.div.removeEventListener("pointerup",N(this,m))}attach(s){N(this,C).set(s.id,s)}detach(s){var x;N(this,C).delete(s.id),(x=N(this,T))==null||x.removePointerInTextLayer(s.contentDiv)}remove(s){N(this,a).removeEditor(s),this.detach(s),this.annotationStorage.remove(s.id),s.div.style.display="none",setTimeout(()=>{s.div.style.display="",s.div.remove(),s.isAttachedToDOM=!1,document.activeElement===document.body&&N(this,a).focusMainContainer()},0),N(this,d)||this.addInkEditorIfNeeded(!1)}add(s){if(ce(this,_,At).call(this,s),N(this,a).addEditor(s),this.attach(s),!s.isAttachedToDOM){const x=s.render();this.div.append(x),s.isAttachedToDOM=!0}this.moveEditorInDOM(s),s.onceAdded(),this.addToAnnotationStorage(s)}moveEditorInDOM(s){var x;(x=N(this,T))==null||x.moveElementInDOM(this.div,s.div,s.contentDiv,!0)}addToAnnotationStorage(s){!s.isEmpty()&&!this.annotationStorage.has(s.id)&&this.annotationStorage.setValue(s.id,s)}addOrRebuild(s){s.needsToBeRebuilt()?s.rebuild():this.add(s)}addANewEditor(s){const x=()=>{this.addOrRebuild(s)},R=()=>{s.remove()};this.addCommands({cmd:x,undo:R,mustExec:!0})}addUndoableEditor(s){const x=()=>{this.addOrRebuild(s)},R=()=>{s.remove()};this.addCommands({cmd:x,undo:R,mustExec:!1})}getNextId(){return N(this,a).getId()}deserialize(s){switch(s.annotationType){case r.AnnotationEditorType.FREETEXT:return u.FreeTextEditor.deserialize(s,this);case r.AnnotationEditorType.INK:return f.InkEditor.deserialize(s,this)}return null}setSelected(s){N(this,a).setSelected(s)}toggleSelected(s){N(this,a).toggleSelected(s)}isSelected(s){return N(this,a).isSelected(s)}unselect(s){N(this,a).unselect(s)}pointerup(s){const x=n.KeyboardManager.platform.isMac;if(!(s.button!==0||s.ctrlKey&&x)&&s.target===this.div&&N(this,y)){if(ge(this,y,!1),!N(this,o)){ge(this,o,!0);return}ce(this,_,St).call(this,s)}}pointerdown(s){const x=n.KeyboardManager.platform.isMac;if(s.button!==0||s.ctrlKey&&x||s.target!==this.div)return;ge(this,y,!0);const R=N(this,a).getActive();ge(this,o,!R||R.isEmpty())}drop(s){const x=s.dataTransfer.getData("text/plain"),R=N(this,a).getEditor(x);if(!R)return;s.preventDefault(),s.dataTransfer.dropEffect="move",ce(this,_,At).call(this,R);const O=this.div.getBoundingClientRect(),B=s.clientX-O.x,ne=s.clientY-O.y;R.translate(B-R.startX,ne-R.startY),this.moveEditorInDOM(R),R.div.focus()}dragover(s){s.preventDefault()}destroy(){var s,x;((s=N(this,a).getActive())==null?void 0:s.parent)===this&&N(this,a).setActiveEditor(null);for(const R of N(this,C).values())(x=N(this,T))==null||x.removePointerInTextLayer(R.contentDiv),R.isAttachedToDOM=!1,R.div.remove(),R.parent=null;this.div=null,N(this,C).clear(),N(this,a).removeLayer(this)}render(s){this.viewport=s.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const x of N(this,a).getEditors(this.pageIndex))this.add(x);this.updateMode()}update(s){this.viewport=s.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[s,x,R,O]=this.viewport.viewBox,B=R-s,ne=O-x;return[B,ne]}get viewportBaseDimensions(){const{width:s,height:x,rotation:R}=this.viewport;return R%180===0?[s,x]:[x,s]}setDimensions(){const{width:s,height:x,rotation:R}=this.viewport,O=R%180!==0,B=Math.floor(s)+"px",ne=Math.floor(x)+"px";this.div.style.width=O?ne:B,this.div.style.height=O?B:ne,this.div.setAttribute("data-main-rotation",R)}};T=new WeakMap,o=new WeakMap,m=new WeakMap,M=new WeakMap,C=new WeakMap,y=new WeakMap,d=new WeakMap,a=new WeakMap,_=new WeakSet,At=function(s){var x;s.parent!==this&&(this.attach(s),s.pageIndex=this.pageIndex,(x=s.parent)==null||x.detach(s),s.parent=this,s.div&&s.isAttachedToDOM&&(s.div.remove(),this.div.append(s.div)))},Yt=function(s){switch(N(this,a).getMode()){case r.AnnotationEditorType.FREETEXT:return new u.FreeTextEditor(s);case r.AnnotationEditorType.INK:return new f.InkEditor(s)}return null},St=function(s){const x=this.getNextId(),R=ce(this,_,Yt).call(this,{parent:this,id:x,x:s.offsetX,y:s.offsetY});return R&&this.add(R),R},Kt=function(){ge(this,d,!0);for(const s of N(this,C).values())s.isEmpty()&&s.remove();ge(this,d,!1)},ke(c,"_initialized",!1);let g=c;t.AnnotationEditorLayer=g},(e,t,i)=>{var g,T,o,m,M,C,y,d,Qt,Jt,ei,wt;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=i(1),r=i(7),u=i(6);const b=class b extends u.AnnotationEditor{constructor(l){super({...l,name:"freeTextEditor"});pe(this,d);pe(this,g,this.editorDivBlur.bind(this));pe(this,T,this.editorDivFocus.bind(this));pe(this,o,this.editorDivKeydown.bind(this));pe(this,m);pe(this,M,"");pe(this,C,!1);pe(this,y);ge(this,m,l.color||b._defaultColor||u.AnnotationEditor._defaultLineColor),ge(this,y,l.fontSize||b._defaultFontSize)}static initialize(l){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(x=>[x,l.get(x)]));const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(l,s){switch(l){case n.AnnotationEditorParamsType.FREETEXT_SIZE:b._defaultFontSize=s;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:b._defaultColor=s;break}}updateParams(l,s){switch(l){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ce(this,d,Qt).call(this,s);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ce(this,d,Jt).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,b._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,b._defaultColor||u.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,N(this,y)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,N(this,m)]]}getInitialTranslation(){return[-b._internalPadding*this.parent.scaleFactor,-(b._internalPadding+N(this,y))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",N(this,o)),this.editorDiv.addEventListener("focus",N(this,T)),this.editorDiv.addEventListener("blur",N(this,g)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",N(this,o)),this.editorDiv.removeEventListener("focus",N(this,T)),this.editorDiv.removeEventListener("blur",N(this,g)),this.div.focus(),this.isEditing=!1)}focusin(l){super.focusin(l),l.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),N(this,C)||(ge(this,C,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ge(this,M,ce(this,d,ei).call(this).trimEnd()),ce(this,d,wt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(l){this.enableEditMode(),this.editorDiv.focus()}keydown(l){l.target===this.div&&l.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(l){b._keyboardManager.exec(this,l)}editorDivFocus(l){this.isEditing=!0}editorDivBlur(l){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let l,s;this.width&&(l=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),b._l10nPromise.get("editor_free_text_aria_label").then(R=>{var O;return(O=this.editorDiv)==null?void 0:O.setAttribute("aria-label",R)}),b._l10nPromise.get("free_text_default_content").then(R=>{var O;return(O=this.editorDiv)==null?void 0:O.setAttribute("default-content",R)}),this.editorDiv.contentEditable=!0;const{style:x}=this.editorDiv;if(x.fontSize=`calc(${N(this,y)}px * var(--scale-factor))`,x.color=N(this,m),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[R,O]=this.parent.viewportBaseDimensions;this.setAt(l*R,s*O,this.width*R,this.height*O);for(const B of N(this,M).split(`
`)){const ne=document.createElement("div");ne.append(B?document.createTextNode(B):document.createElement("br")),this.editorDiv.append(ne)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(l,s){const x=super.deserialize(l,s);return ge(x,y,l.fontSize),ge(x,m,n.Util.makeHexColor(...l.color)),ge(x,M,l.value),x}serialize(){if(this.isEmpty())return null;const l=b._internalPadding*this.parent.scaleFactor,s=this.getRect(l,l),x=u.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:x,fontSize:N(this,y),value:N(this,M),pageIndex:this.parent.pageIndex,rect:s,rotation:this.rotation}}};g=new WeakMap,T=new WeakMap,o=new WeakMap,m=new WeakMap,M=new WeakMap,C=new WeakMap,y=new WeakMap,d=new WeakSet,Qt=function(l){const s=R=>{this.editorDiv.style.fontSize=`calc(${R}px * var(--scale-factor))`,this.translate(0,-(R-N(this,y))*this.parent.scaleFactor),ge(this,y,R),ce(this,d,wt).call(this)},x=N(this,y);this.parent.addCommands({cmd:()=>{s(l)},undo:()=>{s(x)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Jt=function(l){const s=N(this,m);this.parent.addCommands({cmd:()=>{ge(this,m,l),this.editorDiv.style.color=l},undo:()=>{ge(this,m,s),this.editorDiv.style.color=s},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ei=function(){const l=this.editorDiv.getElementsByTagName("div");if(l.length===0)return this.editorDiv.innerText;const s=[];for(let x=0,R=l.length;x<R;x++){const B=l[x].firstChild;(B==null?void 0:B.nodeName)==="#text"?s.push(B.data):s.push("")}return s.join(`
`)},wt=function(){const[l,s]=this.parent.viewportBaseDimensions,x=this.div.getBoundingClientRect();this.width=x.width/l,this.height=x.height/s},ke(b,"_freeTextDefaultContent",""),ke(b,"_l10nPromise"),ke(b,"_internalPadding",0),ke(b,"_defaultColor",null),ke(b,"_defaultFontSize",10),ke(b,"_keyboardManager",new r.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],b.prototype.commitOrRemove]])),ke(b,"_type","freetext");let f=b;t.FreeTextEditor=f},(e,t,i)=>{var o,m,M,C,y,d,a,_,E,P,b,p,c,l,s,ti,ii,ni,ri,Tt,si,ai,oi,He,xt,rt,st,je,Ct,at,I,Pt,li,ci,hi,Rt,ot,We,Lt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return u.fitCurve}});var n=i(1),r=i(6),u=i(25),f=i(7);const g=16,H=class H extends r.AnnotationEditor{constructor(S){super({...S,name:"inkEditor"});pe(this,s);pe(this,o,0);pe(this,m,0);pe(this,M,0);pe(this,C,this.canvasPointermove.bind(this));pe(this,y,this.canvasPointerleave.bind(this));pe(this,d,this.canvasPointerup.bind(this));pe(this,a,this.canvasPointerdown.bind(this));pe(this,_,!1);pe(this,E,!1);pe(this,P,null);pe(this,b,null);pe(this,p,0);pe(this,c,0);pe(this,l,null);this.color=S.color||null,this.thickness=S.thickness||null,this.opacity=S.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(S){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(A=>[A,S.get(A)]))}static updateDefaultParams(S,A){switch(S){case n.AnnotationEditorParamsType.INK_THICKNESS:H._defaultThickness=A;break;case n.AnnotationEditorParamsType.INK_COLOR:H._defaultColor=A;break;case n.AnnotationEditorParamsType.INK_OPACITY:H._defaultOpacity=A/100;break}}updateParams(S,A){switch(S){case n.AnnotationEditorParamsType.INK_THICKNESS:ce(this,s,ti).call(this,A);break;case n.AnnotationEditorParamsType.INK_COLOR:ce(this,s,ii).call(this,A);break;case n.AnnotationEditorParamsType.INK_OPACITY:ce(this,s,ni).call(this,A);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,H._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,H._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(H._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||H._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||H._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??H._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ce(this,s,rt).call(this),ce(this,s,st).call(this)),this.isAttachedToDOM||(this.parent.add(this),ce(this,s,je).call(this)),ce(this,s,We).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,N(this,b).disconnect(),ge(this,b,null),super.remove())}enableEditMode(){N(this,_)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",N(this,a)),this.canvas.addEventListener("pointerup",N(this,d)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",N(this,a)),this.canvas.removeEventListener("pointerup",N(this,d)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){N(this,_)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ge(this,_,!0),this.div.classList.add("disabled"),ce(this,s,We).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(S){super.focusin(S),this.enableEditMode()}canvasPointerdown(S){S.button!==0||!this.isInEditMode()||N(this,_)||(this.setInForeground(),S.type!=="mouse"&&this.div.focus(),S.stopPropagation(),this.canvas.addEventListener("pointerleave",N(this,y)),this.canvas.addEventListener("pointermove",N(this,C)),ce(this,s,si).call(this,S.offsetX,S.offsetY))}canvasPointermove(S){S.stopPropagation(),ce(this,s,ai).call(this,S.offsetX,S.offsetY)}canvasPointerup(S){S.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(S.stopPropagation(),ce(this,s,xt).call(this,S),this.setInBackground())}canvasPointerleave(S){ce(this,s,xt).call(this,S),this.setInBackground()}render(){if(this.div)return this.div;let S,A;this.width&&(S=this.x,A=this.y),super.render(),H._l10nPromise.get("editor_ink_aria_label").then(Z=>{var K;return(K=this.div)==null?void 0:K.setAttribute("aria-label",Z)});const[D,j,k,V]=ce(this,s,ri).call(this);if(this.setAt(D,j,0,0),this.setDims(k,V),ce(this,s,rt).call(this),this.width){const[Z,K]=this.parent.viewportBaseDimensions;this.setAt(S*Z,A*K,this.width*Z,this.height*K),ge(this,E,!0),ce(this,s,je).call(this),this.setDims(this.width*Z,this.height*K),ce(this,s,He).call(this),ce(this,s,Lt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ce(this,s,st).call(this),this.div}setDimensions(S,A){const D=Math.round(S),j=Math.round(A);if(N(this,p)===D&&N(this,c)===j)return;ge(this,p,D),ge(this,c,j),this.canvas.style.visibility="hidden",N(this,o)&&Math.abs(N(this,o)-S/A)>.01&&(A=Math.ceil(S/N(this,o)),this.setDims(S,A));const[k,V]=this.parent.viewportBaseDimensions;this.width=S/k,this.height=A/V,N(this,_)&&ce(this,s,Ct).call(this,S,A),ce(this,s,je).call(this),ce(this,s,He).call(this),this.canvas.style.visibility="visible"}static deserialize(S,A){var _e,be;const D=super.deserialize(S,A);D.thickness=S.thickness,D.color=n.Util.makeHexColor(...S.color),D.opacity=S.opacity;const[j,k]=A.pageDimensions,V=D.width*j,Z=D.height*k,K=A.scaleFactor,de=S.thickness/2;ge(D,o,V/Z),ge(D,_,!0),ge(D,p,Math.round(V)),ge(D,c,Math.round(Z));for(const{bezier:me}of S.paths){const ye=[];D.paths.push(ye);let Ee=K*(me[0]-de),Ae=K*(Z-me[1]-de);for(let Ce=2,xe=me.length;Ce<xe;Ce+=6){const Se=K*(me[Ce]-de),Pe=K*(Z-me[Ce+1]-de),Fe=K*(me[Ce+2]-de),Me=K*(Z-me[Ce+3]-de),fe=K*(me[Ce+4]-de),re=K*(Z-me[Ce+5]-de);ye.push([[Ee,Ae],[Se,Pe],[Fe,Me],[fe,re]]),Ee=fe,Ae=re}const we=ce(this,I,Pt).call(this,ye);D.bezierPath2D.push(we)}const se=ce(_e=D,s,Rt).call(_e);return ge(D,M,Math.max(g,se[2]-se[0])),ge(D,m,Math.max(g,se[3]-se[1])),ce(be=D,s,Ct).call(be,V,Z),D}serialize(){if(this.isEmpty())return null;const S=this.getRect(0,0),A=this.rotation%180===0?S[3]-S[1]:S[2]-S[0],D=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:D,thickness:this.thickness,opacity:this.opacity,paths:ce(this,s,li).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,A),pageIndex:this.parent.pageIndex,rect:S,rotation:this.rotation}}};o=new WeakMap,m=new WeakMap,M=new WeakMap,C=new WeakMap,y=new WeakMap,d=new WeakMap,a=new WeakMap,_=new WeakMap,E=new WeakMap,P=new WeakMap,b=new WeakMap,p=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakSet,ti=function(S){const A=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=S,ce(this,s,We).call(this)},undo:()=>{this.thickness=A,ce(this,s,We).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},ii=function(S){const A=this.color;this.parent.addCommands({cmd:()=>{this.color=S,ce(this,s,He).call(this)},undo:()=>{this.color=A,ce(this,s,He).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ni=function(S){S/=100;const A=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=S,ce(this,s,He).call(this)},undo:()=>{this.opacity=A,ce(this,s,He).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ri=function(){const{width:S,height:A,rotation:D}=this.parent.viewport;switch(D){case 90:return[0,S,S,A];case 180:return[S,A,S,A];case 270:return[A,0,S,A];default:return[0,0,S,A]}},Tt=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,f.opacityToHex)(this.opacity)}`},si=function(S,A){this.isEditing=!0,N(this,E)||(ge(this,E,!0),ce(this,s,je).call(this),this.thickness||(this.thickness=H._defaultThickness),this.color||(this.color=H._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=H._defaultOpacity)),this.currentPath.push([S,A]),ge(this,P,null),ce(this,s,Tt).call(this),this.ctx.beginPath(),this.ctx.moveTo(S,A),ge(this,l,()=>{N(this,l)&&(N(this,P)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ce(this,s,He).call(this),this.ctx.lineTo(...N(this,P)),ge(this,P,null),this.ctx.stroke()),window.requestAnimationFrame(N(this,l)))}),window.requestAnimationFrame(N(this,l))},ai=function(S,A){const[D,j]=this.currentPath.at(-1);S===D&&A===j||(this.currentPath.push([S,A]),ge(this,P,[S,A]))},oi=function(S,A){var de;this.ctx.closePath(),ge(this,l,null),S=Math.min(Math.max(S,0),this.canvas.width),A=Math.min(Math.max(A,0),this.canvas.height);const[D,j]=this.currentPath.at(-1);(S!==D||A!==j)&&this.currentPath.push([S,A]);let k;if(this.currentPath.length!==1)k=(0,u.fitCurve)(this.currentPath,30,null);else{const se=[S,A];k=[[se,se.slice(),se.slice(),se]]}const V=ce(de=H,I,Pt).call(de,k);this.currentPath.length=0;const Z=()=>{this.paths.push(k),this.bezierPath2D.push(V),this.rebuild()},K=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ce(this,s,rt).call(this),ce(this,s,st).call(this)),ce(this,s,We).call(this))};this.parent.addCommands({cmd:Z,undo:K,mustExec:!0})},He=function(){if(this.isEmpty()){ce(this,s,at).call(this);return}ce(this,s,Tt).call(this);const{canvas:S,ctx:A}=this;A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,S.width,S.height),ce(this,s,at).call(this);for(const D of this.bezierPath2D)A.stroke(D)},xt=function(S){ce(this,s,oi).call(this,S.offsetX,S.offsetY),this.canvas.removeEventListener("pointerleave",N(this,y)),this.canvas.removeEventListener("pointermove",N(this,C)),this.parent.addToAnnotationStorage(this)},rt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",H._l10nPromise.get("editor_ink_canvas_aria_label").then(S=>{var A;return(A=this.canvas)==null?void 0:A.setAttribute("aria-label",S)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},st=function(){ge(this,b,new ResizeObserver(S=>{const A=S[0].contentRect;A.width&&A.height&&this.setDimensions(A.width,A.height)})),N(this,b).observe(this.div)},je=function(){if(!N(this,E))return;const[S,A]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*S),this.canvas.height=Math.ceil(this.height*A),ce(this,s,at).call(this)},Ct=function(S,A){const D=ce(this,s,ot).call(this),j=(S-D)/N(this,M),k=(A-D)/N(this,m);this.scaleFactor=Math.min(j,k)},at=function(){const S=ce(this,s,ot).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+S,this.translationY*this.scaleFactor+S)},I=new WeakSet,Pt=function(S){const A=new Path2D;for(let D=0,j=S.length;D<j;D++){const[k,V,Z,K]=S[D];D===0&&A.moveTo(...k),A.bezierCurveTo(V[0],V[1],Z[0],Z[1],K[0],K[1])}return A},li=function(S,A,D,j){const V=[],Z=this.thickness/2;let K,de;for(const se of this.paths){K=[],de=[];for(let _e=0,be=se.length;_e<be;_e++){const[me,ye,Ee,Ae]=se[_e],we=S*(me[0]+A)+Z,Ce=j-S*(me[1]+D)-Z,xe=S*(ye[0]+A)+Z,Se=j-S*(ye[1]+D)-Z,Pe=S*(Ee[0]+A)+Z,Fe=j-S*(Ee[1]+D)-Z,Me=S*(Ae[0]+A)+Z,fe=j-S*(Ae[1]+D)-Z;_e===0&&(K.push(we,Ce),de.push(we,Ce)),K.push(xe,Se,Pe,Fe,Me,fe),ce(this,s,ci).call(this,we,Ce,xe,Se,Pe,Fe,Me,fe,4,de)}V.push({bezier:K,points:de})}return V},ci=function(S,A,D,j,k,V,Z,K,de,se){if(ce(this,s,hi).call(this,S,A,D,j,k,V,Z,K)){se.push(Z,K);return}for(let _e=1;_e<de-1;_e++){const be=_e/de,me=1-be;let ye=be*S+me*D,Ee=be*A+me*j,Ae=be*D+me*k,we=be*j+me*V;const Ce=be*k+me*Z,xe=be*V+me*K;ye=be*ye+me*Ae,Ee=be*Ee+me*we,Ae=be*Ae+me*Ce,we=be*we+me*xe,ye=be*ye+me*Ae,Ee=be*Ee+me*we,se.push(ye,Ee)}se.push(Z,K)},hi=function(S,A,D,j,k,V,Z,K){const se=(3*D-2*S-Z)**2,_e=(3*j-2*A-K)**2,be=(3*k-S-2*Z)**2,me=(3*V-A-2*K)**2;return Math.max(se,be)+Math.max(_e,me)<=10},Rt=function(){let S=1/0,A=-1/0,D=1/0,j=-1/0;for(const k of this.paths)for(const[V,Z,K,de]of k){const se=n.Util.bezierBoundingBox(...V,...Z,...K,...de);S=Math.min(S,se[0]),D=Math.min(D,se[1]),A=Math.max(A,se[2]),j=Math.max(j,se[3])}return[S,D,A,j]},ot=function(){return N(this,_)?Math.ceil(this.thickness*this.parent.scaleFactor):0},We=function(S=!1){if(this.isEmpty())return;if(!N(this,_)){ce(this,s,He).call(this);return}const A=ce(this,s,Rt).call(this),D=ce(this,s,ot).call(this);ge(this,M,Math.max(g,A[2]-A[0])),ge(this,m,Math.max(g,A[3]-A[1]));const j=Math.ceil(D+N(this,M)*this.scaleFactor),k=Math.ceil(D+N(this,m)*this.scaleFactor),[V,Z]=this.parent.viewportBaseDimensions;this.width=j/V,this.height=k/Z,ge(this,o,j/k),ce(this,s,Lt).call(this);const K=this.translationX,de=this.translationY;this.translationX=-A[0],this.translationY=-A[1],ce(this,s,je).call(this),ce(this,s,He).call(this),ge(this,p,j),ge(this,c,k),this.setDims(j,k);const se=S?D/this.scaleFactor/2:0;this.translate(K-this.translationX-se,de-this.translationY-se)},Lt=function(){const{style:S}=this.div;N(this,o)>=1?(S.minHeight=`${g}px`,S.minWidth=`${Math.round(N(this,o)*g)}px`):(S.minWidth=`${g}px`,S.minHeight=`${Math.round(g/N(this,o))}px`)},pe(H,I),ke(H,"_defaultColor",null),ke(H,"_defaultOpacity",1),ke(H,"_defaultThickness",1),ke(H,"_l10nPromise"),ke(H,"_type","ink");let T=H;t.InkEditor=T},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const n=i(26);t.fitCurve=n},e=>{function t(d,a,_){if(!Array.isArray(d))throw new TypeError("First argument should be an array");if(d.forEach(p=>{if(!Array.isArray(p)||p.some(c=>typeof c!="number")||p.length!==d[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),d=d.filter((p,c)=>c===0||!p.every((l,s)=>l===d[c-1][s])),d.length<2)return[];const E=d.length,P=M(d[1],d[0]),b=M(d[E-2],d[E-1]);return i(d,P,b,a,_)}function i(d,a,_,E,P){var p,c,l,s,x,R,O,B,ne,he,ae,U,G;if(d.length===2)return U=C.vectorLen(C.subtract(d[0],d[1]))/3,p=[d[0],C.addArrays(d[0],C.mulItems(a,U)),C.addArrays(d[1],C.mulItems(_,U)),d[1]],[p];if(c=g(d),[p,s,R]=n(d,c,c,a,_,P),s===0||s<E)return[p];if(s<E*E)for(l=c,x=s,O=R,G=0;G<20;G++){if(l=u(p,d,l),[p,s,R]=n(d,c,l,a,_,P),s<E)return[p];if(R===O){let q=s/x;if(q>.9999&&q<1.0001)break}x=s,O=R}return ae=[],B=C.subtract(d[R-1],d[R+1]),B.every(q=>q===0)&&(B=C.subtract(d[R-1],d[R]),[B[0],B[1]]=[-B[1],B[0]]),ne=C.normalize(B),he=C.mulItems(ne,-1),ae=ae.concat(i(d.slice(0,R+1),a,ne,E,P)),ae=ae.concat(i(d.slice(R),he,_,E,P)),ae}function n(d,a,_,E,P,b){var p,c,l;return p=r(d,_,E,P),[c,l]=T(d,p,a),b&&b({bez:p,points:d,params:a,maxErr:c,maxPoint:l}),[p,c,l]}function r(d,a,_,E){var P,b,p,c,l,s,x,R,O,B,ne,he,ae,U,G,q,W,oe=d[0],ue=d[d.length-1];for(P=[oe,null,null,ue],b=C.zeros_Xx2x2(a.length),ae=0,U=a.length;ae<U;ae++)q=a[ae],W=1-q,p=b[ae],p[0]=C.mulItems(_,3*q*(W*W)),p[1]=C.mulItems(E,3*W*(q*q));for(c=[[0,0],[0,0]],l=[0,0],ae=0,U=d.length;ae<U;ae++)q=a[ae],p=b[ae],c[0][0]+=C.dot(p[0],p[0]),c[0][1]+=C.dot(p[0],p[1]),c[1][0]+=C.dot(p[0],p[1]),c[1][1]+=C.dot(p[1],p[1]),G=C.subtract(d[ae],y.q([oe,oe,ue,ue],q)),l[0]+=C.dot(p[0],G),l[1]+=C.dot(p[1],G);return s=c[0][0]*c[1][1]-c[1][0]*c[0][1],x=c[0][0]*l[1]-c[1][0]*l[0],R=l[0]*c[1][1]-l[1]*c[0][1],O=s===0?0:R/s,B=s===0?0:x/s,he=C.vectorLen(C.subtract(oe,ue)),ne=1e-6*he,O<ne||B<ne?(P[1]=C.addArrays(oe,C.mulItems(_,he/3)),P[2]=C.addArrays(ue,C.mulItems(E,he/3))):(P[1]=C.addArrays(oe,C.mulItems(_,O)),P[2]=C.addArrays(ue,C.mulItems(E,B))),P}function u(d,a,_){return _.map((E,P)=>f(d,a[P],E))}function f(d,a,_){var E=C.subtract(y.q(d,_),a),P=y.qprime(d,_),b=C.mulMatrix(E,P),p=C.sum(C.squareItems(P))+2*C.mulMatrix(E,y.qprimeprime(d,_));return p===0?_:_-b/p}function g(d){var a=[],_,E,P;return d.forEach((b,p)=>{_=p?E+C.vectorLen(C.subtract(b,P)):0,a.push(_),E=_,P=b}),a=a.map(b=>b/E),a}function T(d,a,_){var E,P,b,p,c,l,s,x;P=0,b=Math.floor(d.length/2);const R=o(a,10);for(c=0,l=d.length;c<l;c++)s=d[c],x=m(a,_[c],R,10),p=C.subtract(y.q(a,x),s),E=p[0]*p[0]+p[1]*p[1],E>P&&(P=E,b=c);return[P,b]}var o=function(d,a){for(var _,E=[0],P=d[0],b=0,p=1;p<=a;p++)_=y.q(d,p/a),b+=C.vectorLen(C.subtract(_,P)),E.push(b),P=_;return E=E.map(c=>c/b),E};function m(d,a,_,E){if(a<0)return 0;if(a>1)return 1;for(var P,b,p,c,l,s=1;s<=E;s++)if(a<=_[s]){c=(s-1)/E,p=s/E,b=_[s-1],P=_[s],l=(a-b)/(P-b)*(p-c)+c;break}return l}function M(d,a){return C.normalize(C.subtract(d,a))}class C{static zeros_Xx2x2(a){for(var _=[];a--;)_.push([0,0]);return _}static mulItems(a,_){return a.map(E=>E*_)}static mulMatrix(a,_){return a.reduce((E,P,b)=>E+P*_[b],0)}static subtract(a,_){return a.map((E,P)=>E-_[P])}static addArrays(a,_){return a.map((E,P)=>E+_[P])}static addItems(a,_){return a.map(E=>E+_)}static sum(a){return a.reduce((_,E)=>_+E)}static dot(a,_){return C.mulMatrix(a,_)}static vectorLen(a){return Math.hypot(...a)}static divItems(a,_){return a.map(E=>E/_)}static squareItems(a){return a.map(_=>_*_)}static normalize(a){return this.divItems(a,this.vectorLen(a))}}class y{static q(a,_){var E=1-_,P=C.mulItems(a[0],E*E*E),b=C.mulItems(a[1],3*E*E*_),p=C.mulItems(a[2],3*E*_*_),c=C.mulItems(a[3],_*_*_);return C.addArrays(C.addArrays(P,b),C.addArrays(p,c))}static qprime(a,_){var E=1-_,P=C.mulItems(C.subtract(a[1],a[0]),3*E*E),b=C.mulItems(C.subtract(a[2],a[1]),6*E*_),p=C.mulItems(C.subtract(a[3],a[2]),3*_*_);return C.addArrays(C.addArrays(P,b),p)}static qprimeprime(a,_){return C.addArrays(C.mulItems(C.addArrays(C.subtract(a[2],C.mulItems(a[1],2)),a[0]),6*(1-_)),C.mulItems(C.addArrays(C.subtract(a[3],C.mulItems(a[2],2)),a[1]),6*_))}}e.exports=t,e.exports.fitCubic=i,e.exports.createTangent=M},(e,t,i)=>{var I,Mt,kt,It;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var n=i(1),r=i(8),u=i(5),f=i(28),g=i(29);const T=1e3,o=9,m=new WeakSet;function M(te){return{width:te[2]-te[0],height:te[3]-te[1]}}class C{static create(w){switch(w.data.annotationType){case n.AnnotationType.LINK:return new d(w);case n.AnnotationType.TEXT:return new a(w);case n.AnnotationType.WIDGET:switch(w.data.fieldType){case"Tx":return new E(w);case"Btn":return w.data.radioButton?new b(w):w.data.checkBox?new P(w):new p(w);case"Ch":return new c(w)}return new _(w);case n.AnnotationType.POPUP:return new l(w);case n.AnnotationType.FREETEXT:return new x(w);case n.AnnotationType.LINE:return new R(w);case n.AnnotationType.SQUARE:return new O(w);case n.AnnotationType.CIRCLE:return new B(w);case n.AnnotationType.POLYLINE:return new ne(w);case n.AnnotationType.CARET:return new ae(w);case n.AnnotationType.INK:return new U(w);case n.AnnotationType.POLYGON:return new he(w);case n.AnnotationType.HIGHLIGHT:return new G(w);case n.AnnotationType.UNDERLINE:return new q(w);case n.AnnotationType.SQUIGGLY:return new W(w);case n.AnnotationType.STRIKEOUT:return new oe(w);case n.AnnotationType.STAMP:return new ue(w);case n.AnnotationType.FILEATTACHMENT:return new ie(w);default:return new y(w)}}}class y{constructor(w,{isRenderable:F=!1,ignoreBorder:z=!1,createQuadrilaterals:H=!1}={}){this.isRenderable=F,this.data=w.data,this.layer=w.layer,this.page=w.page,this.viewport=w.viewport,this.linkService=w.linkService,this.downloadManager=w.downloadManager,this.imageResourcesPath=w.imageResourcesPath,this.renderForms=w.renderForms,this.svgFactory=w.svgFactory,this.annotationStorage=w.annotationStorage,this.enableScripting=w.enableScripting,this.hasJSActions=w.hasJSActions,this._fieldObjects=w.fieldObjects,this._mouseState=w.mouseState,F&&(this.container=this._createContainer(z)),H&&(this.quadrilaterals=this._createQuadrilaterals(z))}_createContainer(w=!1){const F=this.data,z=this.page,H=this.viewport,$=document.createElement("section"),{width:Q,height:S}=M(F.rect),[A,D,j,k]=H.viewBox,V=j-A,Z=k-D;$.setAttribute("data-annotation-id",F.id);const K=n.Util.normalizeRect([F.rect[0],z.view[3]-F.rect[1]+z.view[1],F.rect[2],z.view[3]-F.rect[3]+z.view[1]]);if(!w&&F.borderStyle.width>0){$.style.borderWidth=`${F.borderStyle.width}px`;const se=F.borderStyle.horizontalCornerRadius,_e=F.borderStyle.verticalCornerRadius;if(se>0||_e>0){const me=`calc(${se}px * var(--scale-factor)) / calc(${_e}px * var(--scale-factor))`;$.style.borderRadius=me}else if(this instanceof b){const me=`calc(${Q}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;$.style.borderRadius=me}switch(F.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:$.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:$.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:$.style.borderBottomStyle="solid";break}const be=F.borderColor||null;be?$.style.borderColor=n.Util.makeHexColor(be[0]|0,be[1]|0,be[2]|0):$.style.borderWidth=0}$.style.left=`${100*(K[0]-A)/V}%`,$.style.top=`${100*(K[1]-D)/Z}%`;const{rotation:de}=F;return F.hasOwnCanvas||de===0?($.style.width=`${100*Q/V}%`,$.style.height=`${100*S/Z}%`):this.setRotation(de,$),$}setRotation(w,F=this.container){const[z,H,$,Q]=this.viewport.viewBox,S=$-z,A=Q-H,{width:D,height:j}=M(this.data.rect);let k,V;w%180===0?(k=100*D/S,V=100*j/A):(k=100*j/S,V=100*D/A),F.style.width=`${k}%`,F.style.height=`${V}%`,F.setAttribute("data-main-rotation",(360-w)%360)}get _commonActions(){const w=(F,z,H)=>{const $=H.detail[F];H.target.style[z]=f.ColorConverters[`${$[0]}_HTML`]($.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:F=>{const z=F.detail.display%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:z,print:F.detail.display===0||F.detail.display===3})},print:F=>{this.annotationStorage.setValue(this.data.id,{print:F.detail.print})},hidden:F=>{this.container.style.visibility=F.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:F.detail.hidden})},focus:F=>{setTimeout(()=>F.target.focus({preventScroll:!1}),0)},userName:F=>{F.target.title=F.detail.userName},readonly:F=>{F.detail.readonly?F.target.setAttribute("readonly",""):F.target.removeAttribute("readonly")},required:F=>{this._setRequired(F.target,F.detail.required)},bgColor:F=>{w("bgColor","backgroundColor",F)},fillColor:F=>{w("fillColor","backgroundColor",F)},fgColor:F=>{w("fgColor","color",F)},textColor:F=>{w("textColor","color",F)},borderColor:F=>{w("borderColor","borderColor",F)},strokeColor:F=>{w("strokeColor","borderColor",F)},rotation:F=>{const z=F.detail.rotation;this.setRotation(z),this.annotationStorage.setValue(this.data.id,{rotation:z})}})}_dispatchEventFromSandbox(w,F){const z=this._commonActions;for(const H of Object.keys(F.detail)){const $=w[H]||z[H];$&&$(F)}}_setDefaultPropertiesFromJS(w){if(!this.enableScripting)return;const F=this.annotationStorage.getRawValue(this.data.id);if(!F)return;const z=this._commonActions;for(const[H,$]of Object.entries(F)){const Q=z[H];if(Q){const S={detail:{[H]:$},target:w};Q(S),delete F[H]}}}_createQuadrilaterals(w=!1){if(!this.data.quadPoints)return null;const F=[],z=this.data.rect;for(const H of this.data.quadPoints)this.data.rect=[H[2].x,H[2].y,H[1].x,H[1].y],F.push(this._createContainer(w));return this.data.rect=z,F}_createPopup(w,F){let z=this.container;this.quadrilaterals&&(w=w||this.quadrilaterals,z=this.quadrilaterals[0]),w||(w=document.createElement("div"),w.className="popupTriggerArea",z.append(w));const $=new s({container:z,trigger:w,color:F.color,titleObj:F.titleObj,modificationDate:F.modificationDate,contentsObj:F.contentsObj,richText:F.richText,hideWrapper:!0}).render();$.style.left="100%",z.append($)}_renderQuadrilaterals(w){for(const F of this.quadrilaterals)F.className=w;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(w,F=null){const z=[];if(this._fieldObjects){const H=this._fieldObjects[w];if(H)for(const{page:$,id:Q,exportValues:S}of H){if($===-1||Q===F)continue;const A=typeof S=="string"?S:null,D=document.querySelector(`[data-element-id="${Q}"]`);if(D&&!m.has(D)){(0,n.warn)(`_getElementsByName - element not allowed: ${Q}`);continue}z.push({id:Q,exportValue:A,domElement:D})}return z}for(const H of document.getElementsByName(w)){const{id:$,exportValue:Q}=H;$!==F&&m.has(H)&&z.push({id:$,exportValue:Q,domElement:H})}return z}static get platform(){const w=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:w.includes("Win"),isMac:w.includes("Mac")})}}class d extends y{constructor(w,F=null){super(w,{isRenderable:!0,ignoreBorder:!!(F!=null&&F.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=w.data.isTooltipOnly}render(){const{data:w,linkService:F}=this,z=document.createElement("a");z.setAttribute("data-element-id",w.id);let H=!1;return w.url?(F.addLinkAttributes(z,w.url,w.newWindow),H=!0):w.action?(this._bindNamedAction(z,w.action),H=!0):w.dest?(this._bindLink(z,w.dest),H=!0):(w.actions&&(w.actions.Action||w.actions["Mouse Up"]||w.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,w),H=!0),w.resetForm?(this._bindResetFormAction(z,w.resetForm),H=!0):this.isTooltipOnly&&!H&&(this._bindLink(z,""),H=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(($,Q)=>{const S=Q===0?z:z.cloneNode();return $.append(S),$}):(this.container.className="linkAnnotation",H&&this.container.append(z),this.container)}_bindLink(w,F){w.href=this.linkService.getDestinationHash(F),w.onclick=()=>(F&&this.linkService.goToDestination(F),!1),(F||F==="")&&(w.className="internalLink")}_bindNamedAction(w,F){w.href=this.linkService.getAnchorUrl(""),w.onclick=()=>(this.linkService.executeNamedAction(F),!1),w.className="internalLink"}_bindJSAction(w,F){w.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const H of Object.keys(F.actions)){const $=z.get(H);$&&(w[$]=()=>{var Q;return(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F.id,name:H}}),!1})}w.onclick||(w.onclick=()=>!1),w.className="internalLink"}_bindResetFormAction(w,F){const z=w.onclick;if(z||(w.href=this.linkService.getAnchorUrl("")),w.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(w.onclick=()=>!1);return}w.onclick=()=>{var j;z&&z();const{fields:H,refs:$,include:Q}=F,S=[];if(H.length!==0||$.length!==0){const k=new Set($);for(const V of H){const Z=this._fieldObjects[V]||[];for(const{id:K}of Z)k.add(K)}for(const V of Object.values(this._fieldObjects))for(const Z of V)k.has(Z.id)===Q&&S.push(Z)}else for(const k of Object.values(this._fieldObjects))S.push(...k);const A=this.annotationStorage,D=[];for(const k of S){const{id:V}=k;switch(D.push(V),k.type){case"text":{const K=k.defaultValue||"";A.setValue(V,{value:K});break}case"checkbox":case"radiobutton":{const K=k.defaultValue===k.exportValues;A.setValue(V,{value:K});break}case"combobox":case"listbox":{const K=k.defaultValue||"";A.setValue(V,{value:K});break}default:continue}const Z=document.querySelector(`[data-element-id="${V}"]`);if(Z){if(!m.has(Z)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${V}`);continue}}else continue;Z.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:D,name:"ResetForm"}})),!1}}}class a extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F})}render(){this.container.className="textAnnotation";const w=document.createElement("img");return w.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",w.alt="[{{type}} Annotation]",w.dataset.l10nId="text_annotation_type",w.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(w,this.data),this.container.append(w),this.container}}class _ extends y{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(w){const{isWin:F,isMac:z}=y.platform;return F&&w.ctrlKey||z&&w.metaKey}_setEventListener(w,F,z,H){F.includes("mouse")?w.addEventListener(F,$=>{var Q;(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:H($),shift:$.shiftKey,modifier:this._getKeyModifier($)}})}):w.addEventListener(F,$=>{var Q;(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:H($)}})})}_setEventListeners(w,F,z){var H;for(const[$,Q]of F)(Q==="Action"||(H=this.data.actions)!=null&&H[Q])&&this._setEventListener(w,$,Q,z)}_setBackgroundColor(w){const F=this.data.backgroundColor||null;w.style.backgroundColor=F===null?"transparent":n.Util.makeHexColor(F[0],F[1],F[2])}_setTextStyle(w){const F=["left","center","right"],{fontColor:z}=this.data.defaultAppearanceData,H=this.data.defaultAppearanceData.fontSize||o,$=w.style;let Q;if(this.data.multiLine){const S=Math.abs(this.data.rect[3]-this.data.rect[1]),A=Math.round(S/(n.LINE_FACTOR*H))||1,D=S/A;Q=Math.min(H,Math.round(D/n.LINE_FACTOR))}else{const S=Math.abs(this.data.rect[3]-this.data.rect[1]);Q=Math.min(H,Math.round(S/n.LINE_FACTOR))}$.fontSize=`calc(${Q}px * var(--scale-factor))`,$.color=n.Util.makeHexColor(z[0],z[1],z[2]),this.data.textAlignment!==null&&($.textAlign=F[this.data.textAlignment])}_setRequired(w,F){F?w.setAttribute("required",!0):w.removeAttribute("required"),w.setAttribute("aria-required",F)}}class E extends _{constructor(w){const F=w.renderForms||!w.data.hasAppearance&&!!w.data.fieldValue;super(w,{isRenderable:F})}setPropertyOnSiblings(w,F,z,H){const $=this.annotationStorage;for(const Q of this._getElementsByName(w.name,w.id))Q.domElement&&(Q.domElement[F]=z),$.setValue(Q.id,{[H]:z})}render(){var H;const w=this.annotationStorage,F=this.data.id;this.container.className="textWidgetAnnotation";let z=null;if(this.renderForms){const $=w.getValue(F,{value:this.data.fieldValue});let Q=$.formattedValue||$.value||"";const S=w.getValue(F,{charLimit:this.data.maxLen}).charLimit;S&&Q.length>S&&(Q=Q.slice(0,S));const A={userValue:Q,formattedValue:null,valueOnFocus:""};this.data.multiLine?(z=document.createElement("textarea"),z.textContent=Q,this.data.doNotScroll&&(z.style.overflowY="hidden")):(z=document.createElement("input"),z.type="text",z.setAttribute("value",Q),this.data.doNotScroll&&(z.style.overflowX="hidden")),m.add(z),z.setAttribute("data-element-id",F),z.disabled=this.data.readOnly,z.name=this.data.fieldName,z.tabIndex=T,this._setRequired(z,this.data.required),S&&(z.maxLength=S),z.addEventListener("input",j=>{w.setValue(F,{value:j.target.value}),this.setPropertyOnSiblings(z,"value",j.target.value,"value")}),z.addEventListener("resetform",j=>{const k=this.data.defaultFieldValue??"";z.value=A.userValue=k,A.formattedValue=null});let D=j=>{const{formattedValue:k}=A;k!=null&&(j.target.value=k),j.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){z.addEventListener("focus",k=>{A.userValue&&(k.target.value=A.userValue),A.valueOnFocus=k.target.value}),z.addEventListener("updatefromsandbox",k=>{const V={value(Z){A.userValue=Z.detail.value??"",w.setValue(F,{value:A.userValue.toString()}),Z.target.value=A.userValue},formattedValue(Z){const{formattedValue:K}=Z.detail;A.formattedValue=K,K!=null&&Z.target!==document.activeElement&&(Z.target.value=K),w.setValue(F,{formattedValue:K})},selRange(Z){Z.target.setSelectionRange(...Z.detail.selRange)},charLimit:Z=>{var _e;const{charLimit:K}=Z.detail,{target:de}=Z;if(K===0){de.removeAttribute("maxLength");return}de.setAttribute("maxLength",K);let se=A.userValue;!se||se.length<=K||(se=se.slice(0,K),de.value=A.userValue=se,w.setValue(F,{value:se}),(_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:de.selectionStart,selEnd:de.selectionEnd}}))}};this._dispatchEventFromSandbox(V,k)}),z.addEventListener("keydown",k=>{var K;let V=-1;if(k.key==="Escape"?V=0:k.key==="Enter"?V=2:k.key==="Tab"&&(V=3),V===-1)return;const{value:Z}=k.target;A.valueOnFocus!==Z&&(A.userValue=Z,(K=this.linkService.eventBus)==null||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:Z,willCommit:!0,commitKey:V,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}}))});const j=D;D=null,z.addEventListener("blur",k=>{var Z;const{value:V}=k.target;A.userValue=V,this._mouseState.isDown&&A.valueOnFocus!==V&&((Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:V,willCommit:!0,commitKey:1,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}})),j(k)}),(H=this.data.actions)!=null&&H.Keystroke&&z.addEventListener("beforeinput",k=>{var me;const{data:V,target:Z}=k,{value:K,selectionStart:de,selectionEnd:se}=Z;let _e=de,be=se;switch(k.inputType){case"deleteWordBackward":{const ye=K.substring(0,de).match(/\w*[^\w]*$/);ye&&(_e-=ye[0].length);break}case"deleteWordForward":{const ye=K.substring(de).match(/^[^\w]*\w*/);ye&&(be+=ye[0].length);break}case"deleteContentBackward":de===se&&(_e-=1);break;case"deleteContentForward":de===se&&(be+=1);break}k.preventDefault(),(me=this.linkService.eventBus)==null||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:K,change:V||"",willCommit:!1,selStart:_e,selEnd:be}})}),this._setEventListeners(z,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],k=>k.target.value)}if(D&&z.addEventListener("blur",D),this.data.comb){const k=(this.data.rect[2]-this.data.rect[0])/S;z.classList.add("comb"),z.style.letterSpacing=`calc(${k}px * var(--scale-factor) - 1ch)`}}else z=document.createElement("div"),z.textContent=this.data.fieldValue,z.style.verticalAlign="middle",z.style.display="table-cell";return this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class P extends _{constructor(w){super(w,{isRenderable:w.renderForms})}render(){const w=this.annotationStorage,F=this.data,z=F.id;let H=w.getValue(z,{value:F.exportValue===F.fieldValue}).value;typeof H=="string"&&(H=H!=="Off",w.setValue(z,{value:H})),this.container.className="buttonWidgetAnnotation checkBox";const $=document.createElement("input");return m.add($),$.setAttribute("data-element-id",z),$.disabled=F.readOnly,this._setRequired($,this.data.required),$.type="checkbox",$.name=F.fieldName,H&&$.setAttribute("checked",!0),$.setAttribute("exportValue",F.exportValue),$.tabIndex=T,$.addEventListener("change",Q=>{const{name:S,checked:A}=Q.target;for(const D of this._getElementsByName(S,z)){const j=A&&D.exportValue===F.exportValue;D.domElement&&(D.domElement.checked=j),w.setValue(D.id,{value:j})}w.setValue(z,{value:A})}),$.addEventListener("resetform",Q=>{const S=F.defaultFieldValue||"Off";Q.target.checked=S===F.exportValue}),this.enableScripting&&this.hasJSActions&&($.addEventListener("updatefromsandbox",Q=>{const S={value(A){A.target.checked=A.detail.value!=="Off",w.setValue(z,{value:A.target.checked})}};this._dispatchEventFromSandbox(S,Q)}),this._setEventListeners($,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.checked)),this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class b extends _{constructor(w){super(w,{isRenderable:w.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const w=this.annotationStorage,F=this.data,z=F.id;let H=w.getValue(z,{value:F.fieldValue===F.buttonValue}).value;typeof H=="string"&&(H=H!==F.buttonValue,w.setValue(z,{value:H}));const $=document.createElement("input");if(m.add($),$.setAttribute("data-element-id",z),$.disabled=F.readOnly,this._setRequired($,this.data.required),$.type="radio",$.name=F.fieldName,H&&$.setAttribute("checked",!0),$.tabIndex=T,$.addEventListener("change",Q=>{const{name:S,checked:A}=Q.target;for(const D of this._getElementsByName(S,z))w.setValue(D.id,{value:!1});w.setValue(z,{value:A})}),$.addEventListener("resetform",Q=>{const S=F.defaultFieldValue;Q.target.checked=S!=null&&S===F.buttonValue}),this.enableScripting&&this.hasJSActions){const Q=F.buttonValue;$.addEventListener("updatefromsandbox",S=>{const A={value:D=>{const j=Q===D.detail.value;for(const k of this._getElementsByName(D.target.name)){const V=j&&k.id===z;k.domElement&&(k.domElement.checked=V),w.setValue(k.id,{value:V})}}};this._dispatchEventFromSandbox(A,S)}),this._setEventListeners($,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.checked)}return this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class p extends d{constructor(w){super(w,{ignoreBorder:w.data.hasAppearance})}render(){const w=super.render();w.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(w.title=this.data.alternativeText);const F=w.lastChild;return this.enableScripting&&this.hasJSActions&&F&&(this._setDefaultPropertiesFromJS(F),F.addEventListener("updatefromsandbox",z=>{this._dispatchEventFromSandbox({},z)})),w}}class c extends _{constructor(w){super(w,{isRenderable:w.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const w=this.annotationStorage,F=this.data.id,z=w.getValue(F,{value:this.data.fieldValue}),H=document.createElement("select");m.add(H),H.setAttribute("data-element-id",F),H.disabled=this.data.readOnly,this._setRequired(H,this.data.required),H.name=this.data.fieldName,H.tabIndex=T;let $=this.data.combo&&this.data.options.length>0;this.data.combo||(H.size=this.data.options.length,this.data.multiSelect&&(H.multiple=!0)),H.addEventListener("resetform",D=>{const j=this.data.defaultFieldValue;for(const k of H.options)k.selected=k.value===j});for(const D of this.data.options){const j=document.createElement("option");j.textContent=D.displayValue,j.value=D.exportValue,z.value.includes(D.exportValue)&&(j.setAttribute("selected",!0),$=!1),H.append(j)}let Q=null;if($){const D=document.createElement("option");D.value=" ",D.setAttribute("hidden",!0),D.setAttribute("selected",!0),H.prepend(D),Q=()=>{D.remove(),H.removeEventListener("input",Q),Q=null},H.addEventListener("input",Q)}const S=(D,j)=>{const k=j?"value":"textContent",V=D.target.options;return D.target.multiple?Array.prototype.filter.call(V,Z=>Z.selected).map(Z=>Z[k]):V.selectedIndex===-1?null:V[V.selectedIndex][k]},A=D=>{const j=D.target.options;return Array.prototype.map.call(j,k=>({displayValue:k.textContent,exportValue:k.value}))};return this.enableScripting&&this.hasJSActions?(H.addEventListener("updatefromsandbox",D=>{const j={value(k){Q==null||Q();const V=k.detail.value,Z=new Set(Array.isArray(V)?V:[V]);for(const K of H.options)K.selected=Z.has(K.value);w.setValue(F,{value:S(k,!0)})},multipleSelection(k){H.multiple=!0},remove(k){const V=H.options,Z=k.detail.remove;V[Z].selected=!1,H.remove(Z),V.length>0&&Array.prototype.findIndex.call(V,de=>de.selected)===-1&&(V[0].selected=!0),w.setValue(F,{value:S(k,!0),items:A(k)})},clear(k){for(;H.length!==0;)H.remove(0);w.setValue(F,{value:null,items:[]})},insert(k){const{index:V,displayValue:Z,exportValue:K}=k.detail.insert,de=H.children[V],se=document.createElement("option");se.textContent=Z,se.value=K,de?de.before(se):H.append(se),w.setValue(F,{value:S(k,!0),items:A(k)})},items(k){const{items:V}=k.detail;for(;H.length!==0;)H.remove(0);for(const Z of V){const{displayValue:K,exportValue:de}=Z,se=document.createElement("option");se.textContent=K,se.value=de,H.append(se)}H.options.length>0&&(H.options[0].selected=!0),w.setValue(F,{value:S(k,!0),items:A(k)})},indices(k){const V=new Set(k.detail.indices);for(const Z of k.target.options)Z.selected=V.has(Z.index);w.setValue(F,{value:S(k,!0)})},editable(k){k.target.disabled=!k.detail.editable}};this._dispatchEventFromSandbox(j,D)}),H.addEventListener("input",D=>{var V;const j=S(D,!0),k=S(D,!1);w.setValue(F,{value:j}),(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:k,changeEx:j,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(H,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],D=>D.target.checked)):H.addEventListener("input",function(D){w.setValue(F,{value:S(D,!0)})}),this.data.combo&&this._setTextStyle(H),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class l extends y{constructor(w){var z,H,$;const F=!!((z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F})}render(){const w=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",w.includes(this.data.parentType))return this.container;const F=`[data-annotation-id="${this.data.parentId}"]`,z=this.layer.querySelectorAll(F);if(z.length===0)return this.container;const H=new s({container:this.container,trigger:Array.from(z),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),$=this.page,Q=n.Util.normalizeRect([this.data.parentRect[0],$.view[3]-this.data.parentRect[1]+$.view[1],this.data.parentRect[2],$.view[3]-this.data.parentRect[3]+$.view[1]]),S=Q[0]+this.data.parentRect[2]-this.data.parentRect[0],A=Q[1],[D,j,k,V]=this.viewport.viewBox,Z=k-D,K=V-j;return this.container.style.left=`${100*(S-D)/Z}%`,this.container.style.top=`${100*(A-j)/K}%`,this.container.append(H.render()),this.container}}class s{constructor(w){this.container=w.container,this.trigger=w.trigger,this.color=w.color,this.titleObj=w.titleObj,this.modificationDate=w.modificationDate,this.contentsObj=w.contentsObj,this.richText=w.richText,this.hideWrapper=w.hideWrapper||!1,this.pinned=!1}render(){var S,A;const F=document.createElement("div");F.className="popupWrapper",this.hideElement=this.hideWrapper?F:this.container,this.hideElement.hidden=!0;const z=document.createElement("div");z.className="popup";const H=this.color;if(H){const D=.7*(255-H[0])+H[0],j=.7*(255-H[1])+H[1],k=.7*(255-H[2])+H[2];z.style.backgroundColor=n.Util.makeHexColor(D|0,j|0,k|0)}const $=document.createElement("h1");$.dir=this.titleObj.dir,$.textContent=this.titleObj.str,z.append($);const Q=r.PDFDateString.toDateObject(this.modificationDate);if(Q){const D=document.createElement("span");D.className="popupDate",D.textContent="{{date}}, {{time}}",D.dataset.l10nId="annotation_date_string",D.dataset.l10nArgs=JSON.stringify({date:Q.toLocaleDateString(),time:Q.toLocaleTimeString()}),z.append(D)}if((S=this.richText)!=null&&S.str&&(!((A=this.contentsObj)!=null&&A.str)||this.contentsObj.str===this.richText.str))g.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:z}),z.lastChild.className="richText popupContent";else{const D=this._formatContents(this.contentsObj);z.append(D)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const D of this.trigger)D.addEventListener("click",this._toggle.bind(this)),D.addEventListener("mouseover",this._show.bind(this,!1)),D.addEventListener("mouseout",this._hide.bind(this,!1));return z.addEventListener("click",this._hide.bind(this,!0)),F.append(z),F}_formatContents({str:w,dir:F}){const z=document.createElement("p");z.className="popupContent",z.dir=F;const H=w.split(/(?:\r\n?|\n)/);for(let $=0,Q=H.length;$<Q;++$){const S=H[$];z.append(document.createTextNode(S)),$<Q-1&&z.append(document.createElement("br"))}return z}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(w=!1){w&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(w=!0){w&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class x extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0}),this.textContent=w.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const w=document.createElement("div");w.className="annotationTextContent",w.setAttribute("role","comment");for(const F of this.textContent){const z=document.createElement("span");z.textContent=F,w.append(z)}this.container.append(w)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class R extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const w=this.data,{width:F,height:z}=M(w.rect),H=this.svgFactory.create(F,z,!0),$=this.svgFactory.createElement("svg:line");return $.setAttribute("x1",w.rect[2]-w.lineCoordinates[0]),$.setAttribute("y1",w.rect[3]-w.lineCoordinates[1]),$.setAttribute("x2",w.rect[2]-w.lineCoordinates[2]),$.setAttribute("y2",w.rect[3]-w.lineCoordinates[3]),$.setAttribute("stroke-width",w.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),H.append($),this.container.append(H),this._createPopup($,w),this.container}}class O extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const w=this.data,{width:F,height:z}=M(w.rect),H=this.svgFactory.create(F,z,!0),$=w.borderStyle.width,Q=this.svgFactory.createElement("svg:rect");return Q.setAttribute("x",$/2),Q.setAttribute("y",$/2),Q.setAttribute("width",F-$),Q.setAttribute("height",z-$),Q.setAttribute("stroke-width",$||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),H.append(Q),this.container.append(H),this._createPopup(Q,w),this.container}}class B extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const w=this.data,{width:F,height:z}=M(w.rect),H=this.svgFactory.create(F,z,!0),$=w.borderStyle.width,Q=this.svgFactory.createElement("svg:ellipse");return Q.setAttribute("cx",F/2),Q.setAttribute("cy",z/2),Q.setAttribute("rx",F/2-$/2),Q.setAttribute("ry",z/2-$/2),Q.setAttribute("stroke-width",$||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),H.append(Q),this.container.append(H),this._createPopup(Q,w),this.container}}class ne extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const w=this.data,{width:F,height:z}=M(w.rect),H=this.svgFactory.create(F,z,!0);let $=[];for(const S of w.vertices){const A=S.x-w.rect[0],D=w.rect[3]-S.y;$.push(A+","+D)}$=$.join(" ");const Q=this.svgFactory.createElement(this.svgElementName);return Q.setAttribute("points",$),Q.setAttribute("stroke-width",w.borderStyle.width||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),H.append(Q),this.container.append(H),this._createPopup(Q,w),this.container}}class he extends ne{constructor(w){super(w),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ae extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class U extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const w=this.data,{width:F,height:z}=M(w.rect),H=this.svgFactory.create(F,z,!0);for(const $ of w.inkLists){let Q=[];for(const A of $){const D=A.x-w.rect[0],j=w.rect[3]-A.y;Q.push(`${D},${j}`)}Q=Q.join(" ");const S=this.svgFactory.createElement(this.svgElementName);S.setAttribute("points",Q),S.setAttribute("stroke-width",w.borderStyle.width||1),S.setAttribute("stroke","transparent"),S.setAttribute("fill","transparent"),this._createPopup(S,w),H.append(S)}return this.container.append(H),this.container}}class G extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class q extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class W extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class oe extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ue extends y{constructor(w){var z,H,$;const F=!!(w.data.hasPopup||(z=w.data.titleObj)!=null&&z.str||(H=w.data.contentsObj)!=null&&H.str||($=w.data.richText)!=null&&$.str);super(w,{isRenderable:F,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ie extends y{constructor(w){var H;super(w,{isRenderable:!0});const{filename:F,content:z}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(F),this.content=z,(H=this.linkService.eventBus)==null||H.dispatch("fileattachmentannotation",{source:this,filename:F,content:z})}render(){var F,z;this.container.className="fileAttachmentAnnotation";const w=document.createElement("div");return w.className="popupTriggerArea",w.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((F=this.data.titleObj)!=null&&F.str||(z=this.data.contentsObj)!=null&&z.str||this.data.richText)&&this._createPopup(w,this.data),this.container.append(w),this.container}_download(){var w;(w=this.downloadManager)==null||w.openOrDownloadData(this.container,this.content,this.filename)}}const ee=class ee{static render(w){var S,A;const{annotations:F,div:z,viewport:H,accessibilityManager:$}=w;ce(this,I,kt).call(this,z,H);let Q=0;for(const D of F){if(D.annotationType!==n.AnnotationType.POPUP){const{width:k,height:V}=M(D.rect);if(k<=0||V<=0)continue}const j=C.create({data:D,layer:z,page:w.page,viewport:H,linkService:w.linkService,downloadManager:w.downloadManager,imageResourcesPath:w.imageResourcesPath||"",renderForms:w.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:w.annotationStorage||new u.AnnotationStorage,enableScripting:w.enableScripting,hasJSActions:w.hasJSActions,fieldObjects:w.fieldObjects,mouseState:w.mouseState||{isDown:!1}});if(j.isRenderable){const k=j.render();if(D.hidden&&(k.style.visibility="hidden"),Array.isArray(k))for(const V of k)V.style.zIndex=Q++,ce(S=ee,I,Mt).call(S,V,D.id,z,$);else k.style.zIndex=Q++,j instanceof l?z.prepend(k):ce(A=ee,I,Mt).call(A,k,D.id,z,$)}}ce(this,I,It).call(this,z,w.annotationCanvasMap)}static update(w){const{annotationCanvasMap:F,div:z,viewport:H}=w;ce(this,I,kt).call(this,z,H),ce(this,I,It).call(this,z,F),z.hidden=!1}};I=new WeakSet,Mt=function(w,F,z,H){const $=w.firstChild||w;$.id=`${r.AnnotationPrefix}${F}`,z.append(w),H==null||H.moveElementInDOM(z,w,$,!1)},kt=function(w,{width:F,height:z,rotation:H}){const{style:$}=w,Q=H%180!==0,S=Math.floor(F)+"px",A=Math.floor(z)+"px";$.width=Q?A:S,$.height=Q?S:A,w.setAttribute("data-main-rotation",H)},It=function(w,F){if(F){for(const[z,H]of F){const $=w.querySelector(`[data-annotation-id="${z}"]`);if(!$)continue;const{firstChild:Q}=$;Q?Q.nodeName==="CANVAS"?Q.replaceWith(H):Q.before(H):$.append(H)}F.clear()}},pe(ee,I);let Y=ee;t.AnnotationLayer=Y},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function i(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([u,f,g,T]){return["G",1-Math.min(1,.3*u+.59*g+.11*f+T)]}static G_CMYK([u]){return["CMYK",0,0,0,1-u]}static G_RGB([u]){return["RGB",u,u,u]}static G_HTML([u]){const f=i(u);return`#${f}${f}${f}`}static RGB_G([u,f,g]){return["G",.3*u+.59*f+.11*g]}static RGB_HTML([u,f,g]){const T=i(u),o=i(f),m=i(g);return`#${T}${o}${m}`}static T_HTML(){return"#00000000"}static CMYK_RGB([u,f,g,T]){return["RGB",1-Math.min(1,u+T),1-Math.min(1,g+T),1-Math.min(1,f+T)]}static CMYK_HTML(u){const f=this.CMYK_RGB(u).slice(1);return this.RGB_HTML(f)}static RGB_CMYK([u,f,g]){const T=1-u,o=1-f,m=1-g,M=Math.min(T,o,m);return["CMYK",T,o,m,M]}}t.ColorConverters=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=i(20);class r{static setupStorage(f,g,T,o,m){const M=o.getValue(g,{value:null});switch(T.name){case"textarea":if(M.value!==null&&(f.textContent=M.value),m==="print")break;f.addEventListener("input",C=>{o.setValue(g,{value:C.target.value})});break;case"input":if(T.attributes.type==="radio"||T.attributes.type==="checkbox"){if(M.value===T.attributes.xfaOn?f.setAttribute("checked",!0):M.value===T.attributes.xfaOff&&f.removeAttribute("checked"),m==="print")break;f.addEventListener("change",C=>{o.setValue(g,{value:C.target.checked?C.target.getAttribute("xfaOn"):C.target.getAttribute("xfaOff")})})}else{if(M.value!==null&&f.setAttribute("value",M.value),m==="print")break;f.addEventListener("input",C=>{o.setValue(g,{value:C.target.value})})}break;case"select":if(M.value!==null)for(const C of T.children)C.attributes.value===M.value&&(C.attributes.selected=!0);f.addEventListener("input",C=>{const y=C.target.options,d=y.selectedIndex===-1?"":y[y.selectedIndex].value;o.setValue(g,{value:d})});break}}static setAttributes({html:f,element:g,storage:T=null,intent:o,linkService:m}){const{attributes:M}=g,C=f instanceof HTMLAnchorElement;M.type==="radio"&&(M.name=`${M.name}-${o}`);for(const[y,d]of Object.entries(M))if(d!=null)switch(y){case"class":d.length&&f.setAttribute(y,d.join(" "));break;case"dataId":break;case"id":f.setAttribute("data-element-id",d);break;case"style":Object.assign(f.style,d);break;case"textContent":f.textContent=d;break;default:(!C||y!=="href"&&y!=="newWindow")&&f.setAttribute(y,d)}C&&m.addLinkAttributes(f,M.href,M.newWindow),T&&M.dataId&&this.setupStorage(f,M.dataId,g,T)}static render(f){var a;const g=f.annotationStorage,T=f.linkService,o=f.xfaHtml,m=f.intent||"display",M=document.createElement(o.name);o.attributes&&this.setAttributes({html:M,element:o,intent:m,linkService:T});const C=[[o,-1,M]],y=f.div;if(y.append(M),f.viewport){const _=`matrix(${f.viewport.transform.join(",")})`;y.style.transform=_}m!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const d=[];for(;C.length>0;){const[_,E,P]=C.at(-1);if(E+1===_.children.length){C.pop();continue}const b=_.children[++C.at(-1)[1]];if(b===null)continue;const{name:p}=b;if(p==="#text"){const l=document.createTextNode(b.value);d.push(l),P.append(l);continue}let c;if((a=b==null?void 0:b.attributes)!=null&&a.xmlns?c=document.createElementNS(b.attributes.xmlns,p):c=document.createElement(p),P.append(c),b.attributes&&this.setAttributes({html:c,element:b,storage:g,intent:m,linkService:T}),b.children&&b.children.length>0)C.push([b,-1,c]);else if(b.value){const l=document.createTextNode(b.value);n.XfaText.shouldBuildText(p)&&d.push(l),c.append(l)}}for(const _ of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:d}}static update(f){const g=`matrix(${f.viewport.transform.join(",")})`;f.div.style.transform=g,f.div.hidden=!1}}t.XfaLayer=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=P;var n=i(1),r=i(8);const u=1e5,f=30,g=.8,T=new Map,o=/^\s+$/g;function m(b,p){const c=T.get(b);if(c)return c;p.save(),p.font=`${f}px ${b}`;const l=p.measureText("");let s=l.fontBoundingBoxAscent,x=Math.abs(l.fontBoundingBoxDescent);if(s){p.restore();const O=s/(s+x);return T.set(b,O),O}p.strokeStyle="red",p.clearRect(0,0,f,f),p.strokeText("g",0,0);let R=p.getImageData(0,0,f,f).data;x=0;for(let O=R.length-1-3;O>=0;O-=4)if(R[O]>0){x=Math.ceil(O/4/f);break}p.clearRect(0,0,f,f),p.strokeText("A",0,f),R=p.getImageData(0,0,f,f).data,s=0;for(let O=0,B=R.length;O<B;O+=4)if(R[O]>0){s=f-Math.floor(O/4/f);break}if(p.restore(),s){const O=s/(s+x);return T.set(b,O),O}return T.set(b,g),g}function M(b,p,c,l){const s=document.createElement("span"),x=b._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL,fontSize:0};b._textDivs.push(s);const R=n.Util.transform(b._viewport.transform,p.transform);let O=Math.atan2(R[1],R[0]);const B=c[p.fontName];B.vertical&&(O+=Math.PI/2);const ne=Math.hypot(R[2],R[3]),he=ne*m(B.fontFamily,l);let ae,U;O===0?(ae=R[4],U=R[5]-he):(ae=R[4]+he*Math.sin(O),U=R[5]-he*Math.cos(O)),s.style.left=`${ae}px`,s.style.top=`${U}px`,s.style.fontSize=`${ne}px`,s.style.fontFamily=B.fontFamily,x.fontSize=ne,s.setAttribute("role","presentation"),s.textContent=p.str,s.dir=p.dir,b._fontInspectorEnabled&&(s.dataset.fontName=p.fontName),O!==0&&(x.angle=O*(180/Math.PI));let G=!1;if(p.str.length>1||b._enhanceTextSelection&&o.test(p.str))G=!0;else if(p.str!==" "&&p.transform[0]!==p.transform[3]){const q=Math.abs(p.transform[0]),W=Math.abs(p.transform[3]);q!==W&&Math.max(q,W)/Math.min(q,W)>1.5&&(G=!0)}if(G&&(B.vertical?x.canvasWidth=p.height*b._viewport.scale:x.canvasWidth=p.width*b._viewport.scale),b._textDivProperties.set(s,x),b._textContentStream&&b._layoutText(s),b._enhanceTextSelection&&x.hasText){let q=1,W=0;O!==0&&(q=Math.cos(O),W=Math.sin(O));const oe=(B.vertical?p.height:p.width)*b._viewport.scale,ue=ne;let ie,Y;O!==0?(ie=[q,W,-W,q,ae,U],Y=n.Util.getAxialAlignedBoundingBox([0,0,oe,ue],ie)):Y=[ae,U,ae+oe,U+ue],b._bounds.push({left:Y[0],top:Y[1],right:Y[2],bottom:Y[3],div:s,size:[oe,ue],m:ie})}}function C(b){if(b._canceled)return;const p=b._textDivs,c=b._capability,l=p.length;if(l>u){b._renderingDone=!0,c.resolve();return}if(!b._textContentStream)for(let s=0;s<l;s++)b._layoutText(p[s]);b._renderingDone=!0,c.resolve()}function y(b,p,c){let l=0;for(let s=0;s<c;s++){const x=b[p++];x>0&&(l=l?Math.min(x,l):x)}return l}function d(b){const p=b._bounds,c=b._viewport,l=a(c.width,c.height,p);for(let s=0;s<l.length;s++){const x=p[s].div,R=b._textDivProperties.get(x);if(R.angle===0){R.paddingLeft=p[s].left-l[s].left,R.paddingTop=p[s].top-l[s].top,R.paddingRight=l[s].right-p[s].right,R.paddingBottom=l[s].bottom-p[s].bottom,b._textDivProperties.set(x,R);continue}const O=l[s],B=p[s],ne=B.m,he=ne[0],ae=ne[1],U=[[0,0],[0,B.size[1]],[B.size[0],0],B.size],G=new Float64Array(64);for(let W=0,oe=U.length;W<oe;W++){const ue=n.Util.applyTransform(U[W],ne);G[W+0]=he&&(O.left-ue[0])/he,G[W+4]=ae&&(O.top-ue[1])/ae,G[W+8]=he&&(O.right-ue[0])/he,G[W+12]=ae&&(O.bottom-ue[1])/ae,G[W+16]=ae&&(O.left-ue[0])/-ae,G[W+20]=he&&(O.top-ue[1])/he,G[W+24]=ae&&(O.right-ue[0])/-ae,G[W+28]=he&&(O.bottom-ue[1])/he,G[W+32]=he&&(O.left-ue[0])/-he,G[W+36]=ae&&(O.top-ue[1])/-ae,G[W+40]=he&&(O.right-ue[0])/-he,G[W+44]=ae&&(O.bottom-ue[1])/-ae,G[W+48]=ae&&(O.left-ue[0])/ae,G[W+52]=he&&(O.top-ue[1])/-he,G[W+56]=ae&&(O.right-ue[0])/ae,G[W+60]=he&&(O.bottom-ue[1])/-he}const q=1+Math.min(Math.abs(he),Math.abs(ae));R.paddingLeft=y(G,32,16)/q,R.paddingTop=y(G,48,16)/q,R.paddingRight=y(G,0,16)/q,R.paddingBottom=y(G,16,16)/q,b._textDivProperties.set(x,R)}}function a(b,p,c){const l=c.map(function(x,R){return{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom,index:R,x1New:void 0,x2New:void 0}});_(b,l);const s=new Array(c.length);for(const x of l){const R=x.index;s[R]={left:x.x1New,top:0,right:x.x2New,bottom:0}}c.map(function(x,R){const O=s[R],B=l[R];B.x1=x.top,B.y1=b-O.right,B.x2=x.bottom,B.y2=b-O.left,B.index=R,B.x1New=void 0,B.x2New=void 0}),_(p,l);for(const x of l){const R=x.index;s[R].top=x.x1New,s[R].bottom=x.x2New}return s}function _(b,p){p.sort(function(s,x){return s.x1-x.x1||s.index-x.index});const l=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const s of p){let x=0;for(;x<l.length&&l[x].end<=s.y1;)x++;let R=l.length-1;for(;R>=0&&l[R].start>=s.y2;)R--;let O,B,ne,he,ae=-1/0;for(ne=x;ne<=R;ne++){O=l[ne],B=O.boundary;let q;B.x2>s.x1?q=B.index>s.index?B.x1New:s.x1:B.x2New===void 0?q=(B.x2+s.x1)/2:q=B.x2New,q>ae&&(ae=q)}for(s.x1New=ae,ne=x;ne<=R;ne++)O=l[ne],B=O.boundary,B.x2New===void 0?B.x2>s.x1?B.index>s.index&&(B.x2New=B.x2):B.x2New=ae:B.x2New>ae&&(B.x2New=Math.max(ae,B.x2));const U=[];let G=null;for(ne=x;ne<=R;ne++){O=l[ne],B=O.boundary;const q=B.x2>s.x2?B:s;G===q?U.at(-1).end=O.end:(U.push({start:O.start,end:O.end,boundary:q}),G=q)}for(l[x].start<s.y1&&(U[0].start=s.y1,U.unshift({start:l[x].start,end:s.y1,boundary:l[x].boundary})),s.y2<l[R].end&&(U.at(-1).end=s.y2,U.push({start:s.y2,end:l[R].end,boundary:l[R].boundary})),ne=x;ne<=R;ne++){if(O=l[ne],B=O.boundary,B.x2New!==void 0)continue;let q=!1;for(he=x-1;!q&&he>=0&&l[he].start>=B.y1;he--)q=l[he].boundary===B;for(he=R+1;!q&&he<l.length&&l[he].end<=B.y2;he++)q=l[he].boundary===B;for(he=0;!q&&he<U.length;he++)q=U[he].boundary===B;q||(B.x2New=ae)}Array.prototype.splice.apply(l,[x,R-x+1,...U])}for(const s of l){const x=s.boundary;x.x2New===void 0&&(x.x2New=Math.max(b,x.x2))}}class E{constructor({textContent:p,textContentStream:c,container:l,viewport:s,textDivs:x,textContentItemsStr:R,enhanceTextSelection:O}){var B;O&&(0,r.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=p,this._textContentStream=c,this._container=l,this._document=l.ownerDocument,this._viewport=s,this._textDivs=x||[],this._textContentItemsStr=R||[],this._enhanceTextSelection=!!O,this._fontInspectorEnabled=!!((B=globalThis.FontInspector)!=null&&B.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(p,c){for(let l=0,s=p.length;l<s;l++){if(p[l].str===void 0){if(p[l].type==="beginMarkedContentProps"||p[l].type==="beginMarkedContent"){const x=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),p[l].id!==null&&this._container.setAttribute("id",`${p[l].id}`),x.append(this._container)}else p[l].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(p[l].str),M(this,p[l],c,this._layoutTextCtx)}}_layoutText(p){const c=this._textDivProperties.get(p);let l="";if(c.canvasWidth!==0&&c.hasText){const{fontFamily:s}=p.style,{fontSize:x}=c;(x!==this._layoutTextLastFontSize||s!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${x*this._devicePixelRatio}px ${s}`,this._layoutTextLastFontSize=x,this._layoutTextLastFontFamily=s);const{width:R}=this._layoutTextCtx.measureText(p.textContent);if(R>0){const O=this._devicePixelRatio*c.canvasWidth/R;this._enhanceTextSelection&&(c.scale=O),l=`scaleX(${O})`}}if(c.angle!==0&&(l=`rotate(${c.angle}deg) ${l}`),l.length>0&&(this._enhanceTextSelection&&(c.originalTransform=l),p.style.transform=l),c.hasText&&this._container.append(p),c.hasEOL){const s=document.createElement("br");s.setAttribute("role","presentation"),this._container.append(s)}}_render(p=0){const c=(0,n.createPromiseCapability)();let l=Object.create(null);const s=this._document.createElement("canvas");if(s.height=s.width=f,this._layoutTextCtx=s.getContext("2d",{alpha:!1}),this._textContent){const x=this._textContent.items,R=this._textContent.styles;this._processItems(x,R),c.resolve()}else if(this._textContentStream){const x=()=>{this._reader.read().then(({value:R,done:O})=>{if(O){c.resolve();return}Object.assign(l,R.styles),this._processItems(R.items,l),x()},c.reject)};this._reader=this._textContentStream.getReader(),x()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');c.promise.then(()=>{l=null,p?this._renderTimer=setTimeout(()=>{C(this),this._renderTimer=null},p):C(this)},this._capability.reject)}expandTextDivs(p=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(d(this),this._bounds=null);const c=[],l=[];for(let s=0,x=this._textDivs.length;s<x;s++){const R=this._textDivs[s],O=this._textDivProperties.get(R);O.hasText&&(p?(c.length=0,l.length=0,O.originalTransform&&c.push(O.originalTransform),O.paddingTop>0?(l.push(`${O.paddingTop}px`),c.push(`translateY(${-O.paddingTop}px)`)):l.push(0),O.paddingRight>0?l.push(`${O.paddingRight/O.scale}px`):l.push(0),O.paddingBottom>0?l.push(`${O.paddingBottom}px`):l.push(0),O.paddingLeft>0?(l.push(`${O.paddingLeft/O.scale}px`),c.push(`translateX(${-O.paddingLeft/O.scale}px)`)):l.push(0),R.style.padding=l.join(" "),c.length&&(R.style.transform=c.join(" "))):(R.style.padding=null,R.style.transform=O.originalTransform))}}}t.TextLayerRenderTask=E;function P(b){const p=new E({textContent:b.textContent,textContentStream:b.textContentStream,container:b.container,viewport:b.viewport,textDivs:b.textDivs,textContentItemsStr:b.textContentItemsStr,enhanceTextSelection:b.enhanceTextSelection});return p._render(b.timeout),p}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=i(8),r=i(1),u=i(3);let f=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=f;{let a=function(c){let l=[];const s=[];for(const x of c){if(x.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),s.push(l),l=l.at(-1).items;continue}x.fn==="restore"?l=s.pop():l.push(x)}return l},_=function(c){if(Number.isInteger(c))return c.toString();const l=c.toFixed(10);let s=l.length-1;if(l[s]!=="0")return l;do s--;while(l[s]==="0");return l.substring(0,l[s]==="."?s:s+1)},E=function(c){if(c[4]===0&&c[5]===0){if(c[1]===0&&c[2]===0)return c[0]===1&&c[3]===1?"":`scale(${_(c[0])} ${_(c[3])})`;if(c[0]===c[3]&&c[1]===-c[2]){const l=Math.acos(c[0])*180/Math.PI;return`rotate(${_(l)})`}}else if(c[0]===1&&c[1]===0&&c[2]===0&&c[3]===1)return`translate(${_(c[4])} ${_(c[5])})`;return`matrix(${_(c[0])} ${_(c[1])} ${_(c[2])} ${_(c[3])} ${_(c[4])} ${_(c[5])})`};const g={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",o="http://www.w3.org/1999/xlink",m=["butt","round","square"],M=["miter","round","bevel"],C=function(c,l="",s=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!s)return URL.createObjectURL(new Blob([c],{type:l}));const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let R=`data:${l};base64,`;for(let O=0,B=c.length;O<B;O+=3){const ne=c[O]&255,he=c[O+1]&255,ae=c[O+2]&255,U=ne>>2,G=(ne&3)<<4|he>>4,q=O+1<B?(he&15)<<2|ae>>6:64,W=O+2<B?ae&63:64;R+=x[U]+x[G]+x[q]+x[W]}return R},y=function(){const c=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,s=new Int32Array(256);for(let ae=0;ae<256;ae++){let U=ae;for(let G=0;G<8;G++)U&1?U=3988292384^U>>1&2147483647:U=U>>1&2147483647;s[ae]=U}function x(ae,U,G){let q=-1;for(let W=U;W<G;W++){const oe=(q^ae[W])&255,ue=s[oe];q=q>>>8^ue}return q^-1}function R(ae,U,G,q){let W=q;const oe=U.length;G[W]=oe>>24&255,G[W+1]=oe>>16&255,G[W+2]=oe>>8&255,G[W+3]=oe&255,W+=4,G[W]=ae.charCodeAt(0)&255,G[W+1]=ae.charCodeAt(1)&255,G[W+2]=ae.charCodeAt(2)&255,G[W+3]=ae.charCodeAt(3)&255,W+=4,G.set(U,W),W+=U.length;const ue=x(G,q+4,W);G[W]=ue>>24&255,G[W+1]=ue>>16&255,G[W+2]=ue>>8&255,G[W+3]=ue&255}function O(ae,U,G){let q=1,W=0;for(let oe=U;oe<G;++oe)q=(q+(ae[oe]&255))%65521,W=(W+q)%65521;return W<<16|q}function B(ae){if(!u.isNodeJS)return ne(ae);try{let U;parseInt(browser$1.versions.node)>=8?U=ae:U=Buffer.from(ae);const G=require$$2.deflateSync(U,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(U){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+U)}return ne(ae)}function ne(ae){let U=ae.length;const G=65535,q=Math.ceil(U/G),W=new Uint8Array(2+U+q*5+4);let oe=0;W[oe++]=120,W[oe++]=156;let ue=0;for(;U>G;)W[oe++]=0,W[oe++]=255,W[oe++]=255,W[oe++]=0,W[oe++]=0,W.set(ae.subarray(ue,ue+G),oe),oe+=G,ue+=G,U-=G;W[oe++]=1,W[oe++]=U&255,W[oe++]=U>>8&255,W[oe++]=~U&65535&255,W[oe++]=(~U&65535)>>8&255,W.set(ae.subarray(ue),oe),oe+=ae.length-ue;const ie=O(ae,0,ae.length);return W[oe++]=ie>>24&255,W[oe++]=ie>>16&255,W[oe++]=ie>>8&255,W[oe++]=ie&255,W}function he(ae,U,G,q){const W=ae.width,oe=ae.height;let ue,ie,Y;const I=ae.data;switch(U){case r.ImageKind.GRAYSCALE_1BPP:ie=0,ue=1,Y=W+7>>3;break;case r.ImageKind.RGB_24BPP:ie=2,ue=8,Y=W*3;break;case r.ImageKind.RGBA_32BPP:ie=6,ue=8,Y=W*4;break;default:throw new Error("invalid format")}const L=new Uint8Array((1+Y)*oe);let X=0,J=0;for(let H=0;H<oe;++H)L[X++]=0,L.set(I.subarray(J,J+Y),X),J+=Y,X+=Y;if(U===r.ImageKind.GRAYSCALE_1BPP&&q){X=0;for(let H=0;H<oe;H++){X++;for(let $=0;$<Y;$++)L[X++]^=255}}const ee=new Uint8Array([W>>24&255,W>>16&255,W>>8&255,W&255,oe>>24&255,oe>>16&255,oe>>8&255,oe&255,ue,ie,0,0,0]),te=B(L),w=c.length+l*3+ee.length+te.length,F=new Uint8Array(w);let z=0;return F.set(c,z),z+=c.length,R("IHDR",ee,F,z),z+=l+ee.length,R("IDATA",te,F,z),z+=l+te.length,R("IEND",new Uint8Array(0),F,z),C(F,"image/png",G)}return function(U,G,q){const W=U.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:U.kind;return he(U,W,G,q)}}();class d{constructor(){this.fontSizeScale=1,this.fontWeight=g.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=g.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,s){this.x=l,this.y=s}}let P=0,b=0,p=0;t.SVGGraphics=f=class{constructor(c,l,s=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new d,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=c,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!s,this._operatorIdMapping=[];for(const x in r.OPS)this._operatorIdMapping[r.OPS[x]]=x}save(){this.transformStack.push(this.transformMatrix);const c=this.current;this.extraStack.push(c),this.current=c.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(c){this.save(),this.executeOpTree(c),this.restore()}loadDependencies(c){const l=c.fnArray,s=c.argsArray;for(let x=0,R=l.length;x<R;x++)if(l[x]===r.OPS.dependency)for(const O of s[x]){const B=O.startsWith("g_")?this.commonObjs:this.objs,ne=new Promise(he=>{B.get(O,he)});this.current.dependencies.push(ne)}return Promise.all(this.current.dependencies)}transform(c,l,s,x,R,O){const B=[c,l,s,x,R,O];this.transformMatrix=r.Util.transform(this.transformMatrix,B),this.tgrp=null}getSVG(c,l){this.viewport=l;const s=this._initialize(l);return this.loadDependencies(c).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(c)),s))}convertOpList(c){const l=this._operatorIdMapping,s=c.argsArray,x=c.fnArray,R=[];for(let O=0,B=x.length;O<B;O++){const ne=x[O];R.push({fnId:ne,fn:l[ne],args:s[O]})}return a(R)}executeOpTree(c){for(const l of c){const s=l.fn,x=l.fnId,R=l.args;switch(x|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(R);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(R[0],R[1]);break;case r.OPS.setFont:this.setFont(R);break;case r.OPS.showText:this.showText(R[0]);break;case r.OPS.showSpacedText:this.showText(R[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(R[0],R[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(R[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(R[0]);break;case r.OPS.setHScale:this.setHScale(R[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(R[0],R[1],R[2],R[3],R[4],R[5]);break;case r.OPS.setTextRise:this.setTextRise(R[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(R[0]);break;case r.OPS.setLineWidth:this.setLineWidth(R[0]);break;case r.OPS.setLineJoin:this.setLineJoin(R[0]);break;case r.OPS.setLineCap:this.setLineCap(R[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(R[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(R[0],R[1],R[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(R[0],R[1],R[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(R);break;case r.OPS.setFillColorN:this.setFillColorN(R);break;case r.OPS.shadingFill:this.shadingFill(R[0]);break;case r.OPS.setDash:this.setDash(R[0],R[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(R[0]);break;case r.OPS.setFlatness:this.setFlatness(R[0]);break;case r.OPS.setGState:this.setGState(R[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(R[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(R[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(R[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(R[0],R[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(R[0],R[1],R[2],R[3],R[4],R[5]);break;case r.OPS.constructPath:this.constructPath(R[0],R[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,r.warn)(`Unimplemented operator ${s}`);break}}}setWordSpacing(c){this.current.wordSpacing=c}setCharSpacing(c){this.current.charSpacing=c}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(c,l,s,x,R,O){const B=this.current;B.textMatrix=B.lineMatrix=[c,l,s,x,R,O],B.textMatrixScale=Math.hypot(c,l),B.x=B.lineX=0,B.y=B.lineY=0,B.xcoords=[],B.ycoords=[],B.tspan=this.svgFactory.createElement("svg:tspan"),B.tspan.setAttributeNS(null,"font-family",B.fontFamily),B.tspan.setAttributeNS(null,"font-size",`${_(B.fontSize)}px`),B.tspan.setAttributeNS(null,"y",_(-B.y)),B.txtElement=this.svgFactory.createElement("svg:text"),B.txtElement.append(B.tspan)}beginText(){const c=this.current;c.x=c.lineX=0,c.y=c.lineY=0,c.textMatrix=r.IDENTITY_MATRIX,c.lineMatrix=r.IDENTITY_MATRIX,c.textMatrixScale=1,c.tspan=this.svgFactory.createElement("svg:tspan"),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtgrp=this.svgFactory.createElement("svg:g"),c.xcoords=[],c.ycoords=[]}moveText(c,l){const s=this.current;s.x=s.lineX+=c,s.y=s.lineY+=l,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${_(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",_(-s.y))}showText(c){const l=this.current,s=l.font,x=l.fontSize;if(x===0)return;const R=l.fontSizeScale,O=l.charSpacing,B=l.wordSpacing,ne=l.fontDirection,he=l.textHScale*ne,ae=s.vertical,U=ae?1:-1,G=s.defaultVMetrics,q=x*l.fontMatrix[0];let W=0;for(const ie of c){if(ie===null){W+=ne*B;continue}else if(typeof ie=="number"){W+=U*ie*x/1e3;continue}const Y=(ie.isSpace?B:0)+O,I=ie.fontChar;let L,X,J=ie.width;if(ae){let te;const w=ie.vmetric||G;te=ie.vmetric?w[1]:J*.5,te=-te*q;const F=w[2]*q;J=w?-w[0]:J,L=te/R,X=(W+F)/R}else L=W/R,X=0;(ie.isInFont||s.missingFile)&&(l.xcoords.push(l.x+L),ae&&l.ycoords.push(-l.y+X),l.tspan.textContent+=I);let ee;ae?ee=J*q-Y*ne:ee=J*q+Y*ne,W+=ee}l.tspan.setAttributeNS(null,"x",l.xcoords.map(_).join(" ")),ae?l.tspan.setAttributeNS(null,"y",l.ycoords.map(_).join(" ")):l.tspan.setAttributeNS(null,"y",_(-l.y)),ae?l.y-=W:l.x+=W*he,l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${_(l.fontSize)}px`),l.fontStyle!==g.fontStyle&&l.tspan.setAttributeNS(null,"font-style",l.fontStyle),l.fontWeight!==g.fontWeight&&l.tspan.setAttributeNS(null,"font-weight",l.fontWeight);const oe=l.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(oe===r.TextRenderingMode.FILL||oe===r.TextRenderingMode.FILL_STROKE?(l.fillColor!==g.fillColor&&l.tspan.setAttributeNS(null,"fill",l.fillColor),l.fillAlpha<1&&l.tspan.setAttributeNS(null,"fill-opacity",l.fillAlpha)):l.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?l.tspan.setAttributeNS(null,"fill","transparent"):l.tspan.setAttributeNS(null,"fill","none"),oe===r.TextRenderingMode.STROKE||oe===r.TextRenderingMode.FILL_STROKE){const ie=1/(l.textMatrixScale||1);this._setStrokeAttributes(l.tspan,ie)}let ue=l.textMatrix;l.textRise!==0&&(ue=ue.slice(),ue[5]+=l.textRise),l.txtElement.setAttributeNS(null,"transform",`${E(ue)} scale(${_(he)}, -1)`),l.txtElement.setAttributeNS(T,"xml:space","preserve"),l.txtElement.append(l.tspan),l.txtgrp.append(l.txtElement),this._ensureTransformGroup().append(l.txtElement)}setLeadingMoveText(c,l){this.setLeading(-l),this.moveText(c,l)}addFontStyle(c){if(!c.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const l=C(c.data,c.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${c.loadedName}"; src: url(${l}); }
`}setFont(c){const l=this.current,s=this.commonObjs.get(c[0]);let x=c[1];l.font=s,this.embedFonts&&!s.missingFile&&!this.embeddedFonts[s.loadedName]&&(this.addFontStyle(s),this.embeddedFonts[s.loadedName]=s),l.fontMatrix=s.fontMatrix||r.FONT_IDENTITY_MATRIX;let R="normal";s.black?R="900":s.bold&&(R="bold");const O=s.italic?"italic":"normal";x<0?(x=-x,l.fontDirection=-1):l.fontDirection=1,l.fontSize=x,l.fontFamily=s.loadedName,l.fontWeight=R,l.fontStyle=O,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",_(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){var l;const c=this.current;c.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((l=c.txtElement)!=null&&l.hasChildNodes())&&(c.element=c.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(c){c>0&&(this.current.lineWidth=c)}setLineCap(c){this.current.lineCap=m[c]}setLineJoin(c){this.current.lineJoin=M[c]}setMiterLimit(c){this.current.miterLimit=c}setStrokeAlpha(c){this.current.strokeAlpha=c}setStrokeRGBColor(c,l,s){this.current.strokeColor=r.Util.makeHexColor(c,l,s)}setFillAlpha(c){this.current.fillAlpha=c}setFillRGBColor(c,l,s){this.current.fillColor=r.Util.makeHexColor(c,l,s),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(c){this.current.strokeColor=this._makeColorN_Pattern(c)}setFillColorN(c){this.current.fillColor=this._makeColorN_Pattern(c)}shadingFill(c){const l=this.viewport.width,s=this.viewport.height,x=r.Util.inverseTransform(this.transformMatrix),R=r.Util.applyTransform([0,0],x),O=r.Util.applyTransform([0,s],x),B=r.Util.applyTransform([l,0],x),ne=r.Util.applyTransform([l,s],x),he=Math.min(R[0],O[0],B[0],ne[0]),ae=Math.min(R[1],O[1],B[1],ne[1]),U=Math.max(R[0],O[0],B[0],ne[0]),G=Math.max(R[1],O[1],B[1],ne[1]),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x",he),q.setAttributeNS(null,"y",ae),q.setAttributeNS(null,"width",U-he),q.setAttributeNS(null,"height",G-ae),q.setAttributeNS(null,"fill",this._makeShadingPattern(c)),this.current.fillAlpha<1&&q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(q)}_makeColorN_Pattern(c){return c[0]==="TilingPattern"?this._makeTilingPattern(c):this._makeShadingPattern(c)}_makeTilingPattern(c){const l=c[1],s=c[2],x=c[3]||r.IDENTITY_MATRIX,[R,O,B,ne]=c[4],he=c[5],ae=c[6],U=c[7],G=`shading${p++}`,[q,W,oe,ue]=r.Util.normalizeRect([...r.Util.applyTransform([R,O],x),...r.Util.applyTransform([B,ne],x)]),[ie,Y]=r.Util.singularValueDecompose2dScale(x),I=he*ie,L=ae*Y,X=this.svgFactory.createElement("svg:pattern");X.setAttributeNS(null,"id",G),X.setAttributeNS(null,"patternUnits","userSpaceOnUse"),X.setAttributeNS(null,"width",I),X.setAttributeNS(null,"height",L),X.setAttributeNS(null,"x",`${q}`),X.setAttributeNS(null,"y",`${W}`);const J=this.svg,ee=this.transformMatrix,te=this.current.fillColor,w=this.current.strokeColor,F=this.svgFactory.create(oe-q,ue-W);if(this.svg=F,this.transformMatrix=x,U===2){const z=r.Util.makeHexColor(...l);this.current.fillColor=z,this.current.strokeColor=z}return this.executeOpTree(this.convertOpList(s)),this.svg=J,this.transformMatrix=ee,this.current.fillColor=te,this.current.strokeColor=w,X.append(F.childNodes[0]),this.defs.append(X),`url(#${G})`}_makeShadingPattern(c){switch(typeof c=="string"&&(c=this.objs.get(c)),c[0]){case"RadialAxial":const l=`shading${p++}`,s=c[3];let x;switch(c[1]){case"axial":const R=c[4],O=c[5];x=this.svgFactory.createElement("svg:linearGradient"),x.setAttributeNS(null,"id",l),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"x1",R[0]),x.setAttributeNS(null,"y1",R[1]),x.setAttributeNS(null,"x2",O[0]),x.setAttributeNS(null,"y2",O[1]);break;case"radial":const B=c[4],ne=c[5],he=c[6],ae=c[7];x=this.svgFactory.createElement("svg:radialGradient"),x.setAttributeNS(null,"id",l),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"cx",ne[0]),x.setAttributeNS(null,"cy",ne[1]),x.setAttributeNS(null,"r",ae),x.setAttributeNS(null,"fx",B[0]),x.setAttributeNS(null,"fy",B[1]),x.setAttributeNS(null,"fr",he);break;default:throw new Error(`Unknown RadialAxial type: ${c[1]}`)}for(const R of s){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",R[0]),O.setAttributeNS(null,"stop-color",R[1]),x.append(O)}return this.defs.append(x),`url(#${l})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${c[0]}`)}}setDash(c,l){this.current.dashArray=c,this.current.dashPhase=l}constructPath(c,l){const s=this.current;let x=s.x,R=s.y,O=[],B=0;for(const ne of c)switch(ne|0){case r.OPS.rectangle:x=l[B++],R=l[B++];const he=l[B++],ae=l[B++],U=x+he,G=R+ae;O.push("M",_(x),_(R),"L",_(U),_(R),"L",_(U),_(G),"L",_(x),_(G),"Z");break;case r.OPS.moveTo:x=l[B++],R=l[B++],O.push("M",_(x),_(R));break;case r.OPS.lineTo:x=l[B++],R=l[B++],O.push("L",_(x),_(R));break;case r.OPS.curveTo:x=l[B+4],R=l[B+5],O.push("C",_(l[B]),_(l[B+1]),_(l[B+2]),_(l[B+3]),_(x),_(R)),B+=6;break;case r.OPS.curveTo2:O.push("C",_(x),_(R),_(l[B]),_(l[B+1]),_(l[B+2]),_(l[B+3])),x=l[B+2],R=l[B+3],B+=4;break;case r.OPS.curveTo3:x=l[B+2],R=l[B+3],O.push("C",_(l[B]),_(l[B+1]),_(x),_(R),_(x),_(R)),B+=4;break;case r.OPS.closePath:O.push("Z");break}O=O.join(" "),s.path&&c.length>0&&c[0]!==r.OPS.rectangle&&c[0]!==r.OPS.moveTo?O=s.path.getAttributeNS(null,"d")+O:(s.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(s.path)),s.path.setAttributeNS(null,"d",O),s.path.setAttributeNS(null,"fill","none"),s.element=s.path,s.setCurrentPoint(x,R)}endPath(){const c=this.current;if(c.path=null,!this.pendingClip)return;if(!c.element){this.pendingClip=null;return}const l=`clippath${P++}`,s=this.svgFactory.createElement("svg:clipPath");s.setAttributeNS(null,"id",l),s.setAttributeNS(null,"transform",E(this.transformMatrix));const x=c.element.cloneNode(!0);if(this.pendingClip==="evenodd"?x.setAttributeNS(null,"clip-rule","evenodd"):x.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,s.append(x),this.defs.append(s),c.activeClipUrl){c.clipGroup=null;for(const R of this.extraStack)R.clipGroup=null;s.setAttributeNS(null,"clip-path",c.activeClipUrl)}c.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(c){this.pendingClip=c}closePath(){const c=this.current;if(c.path){const l=`${c.path.getAttributeNS(null,"d")}Z`;c.path.setAttributeNS(null,"d",l)}}setLeading(c){this.current.leading=-c}setTextRise(c){this.current.textRise=c}setTextRenderingMode(c){this.current.textRenderingMode=c}setHScale(c){this.current.textHScale=c/100}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(const[l,s]of c)switch(l){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,r.warn)(`Unimplemented graphic state operator ${l}`);break}}fill(){const c=this.current;c.element&&(c.element.setAttributeNS(null,"fill",c.fillColor),c.element.setAttributeNS(null,"fill-opacity",c.fillAlpha),this.endPath())}stroke(){const c=this.current;c.element&&(this._setStrokeAttributes(c.element),c.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(c,l=1){const s=this.current;let x=s.dashArray;l!==1&&x.length>0&&(x=x.map(function(R){return l*R})),c.setAttributeNS(null,"stroke",s.strokeColor),c.setAttributeNS(null,"stroke-opacity",s.strokeAlpha),c.setAttributeNS(null,"stroke-miterlimit",_(s.miterLimit)),c.setAttributeNS(null,"stroke-linecap",s.lineCap),c.setAttributeNS(null,"stroke-linejoin",s.lineJoin),c.setAttributeNS(null,"stroke-width",_(l*s.lineWidth)+"px"),c.setAttributeNS(null,"stroke-dasharray",x.map(_).join(" ")),c.setAttributeNS(null,"stroke-dashoffset",_(l*s.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width","1px"),c.setAttributeNS(null,"height","1px"),c.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(c)}paintImageXObject(c){const l=c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c);if(!l){(0,r.warn)(`Dependent image with object ID ${c} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(c,l){const s=c.width,x=c.height,R=y(c,this.forceDataSchema,!!l),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",_(s)),O.setAttributeNS(null,"height",_(x)),this.current.element=O,this.clip("nonzero");const B=this.svgFactory.createElement("svg:image");B.setAttributeNS(o,"xlink:href",R),B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y",_(-x)),B.setAttributeNS(null,"width",_(s)+"px"),B.setAttributeNS(null,"height",_(x)+"px"),B.setAttributeNS(null,"transform",`scale(${_(1/s)} ${_(-1/x)})`),l?l.append(B):this._ensureTransformGroup().append(B)}paintImageMaskXObject(c){const l=this.current,s=c.width,x=c.height,R=l.fillColor;l.maskId=`mask${b++}`;const O=this.svgFactory.createElement("svg:mask");O.setAttributeNS(null,"id",l.maskId);const B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",_(s)),B.setAttributeNS(null,"height",_(x)),B.setAttributeNS(null,"fill",R),B.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.append(O),this._ensureTransformGroup().append(B),this.paintInlineImageXObject(c,O)}paintFormXObjectBegin(c,l){if(Array.isArray(c)&&c.length===6&&this.transform(c[0],c[1],c[2],c[3],c[4],c[5]),l){const s=l[2]-l[0],x=l[3]-l[1],R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x",l[0]),R.setAttributeNS(null,"y",l[1]),R.setAttributeNS(null,"width",_(s)),R.setAttributeNS(null,"height",_(x)),this.current.element=R,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(c){const l=this.svgFactory.create(c.width,c.height),s=this.svgFactory.createElement("svg:defs");l.append(s),this.defs=s;const x=this.svgFactory.createElement("svg:g");return x.setAttributeNS(null,"transform",E(c.transform)),l.append(x),this.svg=x,l}_ensureClipGroup(){if(!this.current.clipGroup){const c=this.svgFactory.createElement("svg:g");c.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(c),this.current.clipGroup=c}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",E(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=i(1),r=i(33);const u=require$$0$1,f=require$$3,g=require$$4,T=require$$5,o=/^file:\/\/\/[a-zA-Z]:\//;function m(b){const p=T.parse(b);return p.protocol==="file:"||p.host?p:/^[a-z]:[/\\]/i.test(b)?T.parse(`file:///${b}`):(p.host||(p.protocol="file:"),p)}class M{constructor(p){this.source=p,this.url=m(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new E(this):new a(this),this._fullRequestReader}getRangeReader(p,c){if(c<=this._progressiveDataLength)return null;const l=this.isFsUrl?new P(this,p,c):new _(this,p,c);return this._rangeRequestReaders.push(l),l}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(const c of this._rangeRequestReaders.slice(0))c.cancel(p)}}t.PDFNodeStream=M;class C{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const c=p.source;this._contentLength=c.length,this._loaded=0,this._filename=null,this._disableRange=c.disableRange||!1,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!c.disableStream,this._isRangeSupported=!c.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=p.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",c=>{this._error(c)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const c=p.source;this._isStreamingSupported=!c.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=p.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",c=>{this._error(c)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(b,p){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:p}}class a extends C{constructor(p){super(p);const c=l=>{if(l.statusCode===404){const O=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=O,this._headersCapability.reject(O);return}this._headersCapability.resolve(),this._setReadableStream(l);const s=O=>this._readableStream.headers[O.toLowerCase()],{allowRangeRequests:x,suggestedLength:R}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=R||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(s)};this._request=null,this._url.protocol==="http:"?this._request=f.request(d(this._url,p.httpHeaders),c):this._request=g.request(d(this._url,p.httpHeaders),c),this._request.on("error",l=>{this._storedError=l,this._headersCapability.reject(l)}),this._request.end()}}class _ extends y{constructor(p,c,l){super(p),this._httpHeaders={};for(const x in p.httpHeaders){const R=p.httpHeaders[x];typeof R>"u"||(this._httpHeaders[x]=R)}this._httpHeaders.Range=`bytes=${c}-${l-1}`;const s=x=>{if(x.statusCode===404){const R=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=R;return}this._setReadableStream(x)};this._request=null,this._url.protocol==="http:"?this._request=f.request(d(this._url,this._httpHeaders),s):this._request=g.request(d(this._url,this._httpHeaders),s),this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class E extends C{constructor(p){super(p);let c=decodeURIComponent(this._url.path);o.test(this._url.href)&&(c=c.replace(/^\//,"")),u.lstat(c,(l,s)=>{if(l){l.code==="ENOENT"&&(l=new n.MissingPDFException(`Missing PDF "${c}".`)),this._storedError=l,this._headersCapability.reject(l);return}this._contentLength=s.size,this._setReadableStream(u.createReadStream(c)),this._headersCapability.resolve()})}}class P extends y{constructor(p,c,l){super(p);let s=decodeURIComponent(this._url.path);o.test(this._url.href)&&(s=s.replace(/^\//,"")),this._setReadableStream(u.createReadStream(s,{start:c,end:l-1}))}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=T,t.extractFilenameFromHeader=g,t.validateRangeRequestCapabilities=f,t.validateResponseStatus=o;var n=i(1),r=i(34),u=i(8);function f({getResponseHeader:m,isHttp:M,rangeChunkSize:C,disableRange:y}){const d={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(m("Content-Length"),10);return!Number.isInteger(a)||(d.suggestedLength=a,a<=2*C)||y||!M||m("Accept-Ranges")!=="bytes"||(m("Content-Encoding")||"identity")!=="identity"||(d.allowRangeRequests=!0),d}function g(m){const M=m("Content-Disposition");if(M){let C=(0,r.getFilenameFromContentDispositionHeader)(M);if(C.includes("%"))try{C=decodeURIComponent(C)}catch{}if((0,u.isPdfFile)(C))return C}return null}function T(m,M){return m===404||m===0&&M.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+M+'".'):new n.UnexpectedResponseException(`Unexpected server response (${m}) while retrieving PDF "${M}".`,m)}function o(m){return m===200||m===206}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=r;var n=i(1);function r(u){let f=!0,g=T("filename\\*","i").exec(u);if(g){g=g[1];let a=C(g);return a=unescape(a),a=y(a),a=d(a),m(a)}if(g=M(u),g){const a=d(g);return m(a)}if(g=T("filename","i").exec(u),g){g=g[1];let a=C(g);return a=d(a),m(a)}function T(a,_){return new RegExp("(?:^|;)\\s*"+a+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function o(a,_){if(a){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const E=new TextDecoder(a,{fatal:!0}),P=(0,n.stringToBytes)(_);_=E.decode(P),f=!1}catch{}}return _}function m(a){return f&&/[\x80-\xff]/.test(a)&&(a=o("utf-8",a),f&&(a=o("iso-8859-1",a))),a}function M(a){const _=[];let E;const P=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(E=P.exec(a))!==null;){let[,p,c,l]=E;if(p=parseInt(p,10),p in _){if(p===0)break;continue}_[p]=[c,l]}const b=[];for(let p=0;p<_.length&&p in _;++p){let[c,l]=_[p];l=C(l),c&&(l=unescape(l),p===0&&(l=y(l))),b.push(l)}return b.join("")}function C(a){if(a.startsWith('"')){const _=a.slice(1).split('\\"');for(let E=0;E<_.length;++E){const P=_[E].indexOf('"');P!==-1&&(_[E]=_[E].slice(0,P),_.length=E+1),_[E]=_[E].replace(/\\(.)/g,"$1")}a=_.join('"')}return a}function y(a){const _=a.indexOf("'");if(_===-1)return a;const E=a.slice(0,_),b=a.slice(_+1).replace(/^[^']*'/,"");return o(E,b)}function d(a){return!a.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(a)?a:a.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,E,P,b){if(P==="q"||P==="Q")return b=b.replace(/_/g," "),b=b.replace(/=([0-9a-fA-F]{2})/g,function(p,c){return String.fromCharCode(parseInt(c,16))}),o(E,b);try{b=atob(b)}catch{}return o(E,b)})}return""}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=i(1),r=i(33);const u=200,f=206;function g(C){const y=C.response;return typeof y!="string"?y:(0,n.stringToBytes)(y).buffer}class T{constructor(y,d={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&d.httpHeaders||Object.create(null),this.withCredentials=d.withCredentials||!1,this.getXhr=d.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,d,a){const _={begin:y,end:d};for(const E in a)_[E]=a[E];return this.request(_)}requestFull(y){return this.request(y)}request(y){const d=this.getXhr(),a=this.currXhrId++,_=this.pendingRequests[a]={xhr:d};d.open("GET",this.url),d.withCredentials=this.withCredentials;for(const E in this.httpHeaders){const P=this.httpHeaders[E];typeof P>"u"||d.setRequestHeader(E,P)}return this.isHttp&&"begin"in y&&"end"in y?(d.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),_.expectedStatus=f):_.expectedStatus=u,d.responseType="arraybuffer",y.onError&&(d.onerror=function(E){y.onError(d.status)}),d.onreadystatechange=this.onStateChange.bind(this,a),d.onprogress=this.onProgress.bind(this,a),_.onHeadersReceived=y.onHeadersReceived,_.onDone=y.onDone,_.onError=y.onError,_.onProgress=y.onProgress,d.send(null),a}onProgress(y,d){var _;const a=this.pendingRequests[y];a&&((_=a.onProgress)==null||_.call(a,d))}onStateChange(y,d){var p,c,l;const a=this.pendingRequests[y];if(!a)return;const _=a.xhr;if(_.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),_.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],_.status===0&&this.isHttp){(p=a.onError)==null||p.call(a,_.status);return}const E=_.status||u;if(!(E===u&&a.expectedStatus===f)&&E!==a.expectedStatus){(c=a.onError)==null||c.call(a,_.status);return}const b=g(_);if(E===f){const s=_.getResponseHeader("Content-Range"),x=/bytes (\d+)-(\d+)\/(\d+)/.exec(s);a.onDone({begin:parseInt(x[1],10),chunk:b})}else b?a.onDone({begin:0,chunk:b}):(l=a.onError)==null||l.call(a,_.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const d=this.pendingRequests[y].xhr;delete this.pendingRequests[y],d.abort()}}class o{constructor(y){this._source=y,this._manager=new T(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const d=this._rangeRequestReaders.indexOf(y);d>=0&&this._rangeRequestReaders.splice(d,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(y,d){const a=new M(this._manager,y,d);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(y){var d;(d=this._fullRequestReader)==null||d.cancel(y);for(const a of this._rangeRequestReaders.slice(0))a.cancel(y)}}t.PDFNetworkStream=o;class m{constructor(y,d){this._manager=y;const a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._fullRequestId=y.requestFull(a),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=d.disableRange||!1,this._contentLength=d.length,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,d=this._manager.getRequestXhr(y),a=P=>d.getResponseHeader(P),{allowRangeRequests:_,suggestedLength:E}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=E||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(a),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,r.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var d;(d=this.onProgress)==null||d.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,n.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class M{constructor(y,d,a){this._manager=y;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(d,a,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const d=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunk=d,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,r.createResponseStatusError)(y,this._url);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var d;this.isStreamingSupported||(d=this.onProgress)==null||d.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,n.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=i(1),r=i(33);function u(m,M,C){return{method:"GET",headers:m,signal:C.signal,mode:"cors",credentials:M?"include":"same-origin",redirect:"follow"}}function f(m){const M=new Headers;for(const C in m){const y=m[C];typeof y>"u"||M.append(C,y)}return M}class g{constructor(M){this.source=M,this.isHttp=/^https?:/i.test(M.url),this.httpHeaders=this.isHttp&&M.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var M;return((M=this._fullRequestReader)==null?void 0:M._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(M,C){if(C<=this._progressiveDataLength)return null;const y=new o(this,M,C);return this._rangeRequestReaders.push(y),y}cancelAllRequests(M){this._fullRequestReader&&this._fullRequestReader.cancel(M);for(const C of this._rangeRequestReaders.slice(0))C.cancel(M)}}t.PDFFetchStream=g;class T{constructor(M){this._stream=M,this._reader=null,this._loaded=0,this._filename=null;const C=M.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=f(this._stream.httpHeaders);const y=C.url;fetch(y,u(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!(0,r.validateResponseStatus)(d.status))throw(0,r.createResponseStatusError)(d.status,y);this._reader=d.body.getReader(),this._headersCapability.resolve();const a=P=>d.headers.get(P),{allowRangeRequests:_,suggestedLength:E}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=E||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:M,done:C}=await this._reader.read();return C?{value:M,done:C}:(this._loaded+=M.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(M).buffer,done:!1})}cancel(M){this._reader&&this._reader.cancel(M),this._abortController.abort()}}class o{constructor(M,C,y){this._stream=M,this._reader=null,this._loaded=0;const d=M.source;this._withCredentials=d.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!d.disableStream,this._abortController=new AbortController,this._headers=f(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${y-1}`);const a=d.url;fetch(a,u(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,r.validateResponseStatus)(_.status))throw(0,r.createResponseStatusError)(_.status,a);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:M,done:C}=await this._reader.read();return C?{value:M,done:C}:(this._loaded+=M.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(M).buffer,done:!1})}cancel(M){this._reader&&this._reader.cancel(M),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return u.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return f.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return g.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"LoopbackPort",{enumerable:!0,get:function(){return i.LoopbackPort}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return m.SVGGraphics}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return M.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var t=__w_pdfjs_require__(1),i=__w_pdfjs_require__(4),n=__w_pdfjs_require__(8),r=__w_pdfjs_require__(22),u=__w_pdfjs_require__(7),f=__w_pdfjs_require__(27),g=__w_pdfjs_require__(15),T=__w_pdfjs_require__(3),o=__w_pdfjs_require__(30),m=__w_pdfjs_require__(31),M=__w_pdfjs_require__(29);if(T.isNodeJS){const{PDFNodeStream:C}=__w_pdfjs_require__(32);(0,i.setPDFNetworkStreamFactory)(y=>new C(y))}else{const{PDFNetworkStream:C}=__w_pdfjs_require__(35),{PDFFetchStream:y}=__w_pdfjs_require__(36);(0,i.setPDFNetworkStreamFactory)(d=>(0,n.isValidFetchUrl)(d.url)?new y(d):new C(d))}})(),__webpack_exports__})())})(pdf$1);const pdf=pdf$1.exports;var pdf_1=pdf;function getAugmentedNamespace(e){var t=e.default;if(typeof t=="function"){var i=function(){return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),i}var pdf_viewer={exports:{}},_rollup_plugin_ignore_empty_module_placeholder={},_rollup_plugin_ignore_empty_module_placeholder$1=Object.freeze({__proto__:null,default:_rollup_plugin_ignore_empty_module_placeholder}),require$$0=getAugmentedNamespace(_rollup_plugin_ignore_empty_module_placeholder$1);(function(e,t){(function(n,r){e.exports=r()})(globalThis,()=>(()=>{var i=[,(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DefaultXfaLayerFactory=g.DefaultTextLayerFactory=g.DefaultStructTreeLayerFactory=g.DefaultAnnotationLayerFactory=g.DefaultAnnotationEditorLayerFactory=void 0;var o=T(2),m=T(5),M=T(4),C=T(6),y=T(8),d=T(9),a=T(10);class _{createAnnotationLayerBuilder({pageDiv:l,pdfPage:s,annotationStorage:x=null,imageResourcesPath:R="",renderForms:O=!0,l10n:B=M.NullL10n,enableScripting:ne=!1,hasJSActionsPromise:he=null,mouseState:ae=null,fieldObjectsPromise:U=null,annotationCanvasMap:G=null,accessibilityManager:q=null}){return new m.AnnotationLayerBuilder({pageDiv:l,pdfPage:s,imageResourcesPath:R,renderForms:O,linkService:new C.SimpleLinkService,l10n:B,annotationStorage:x,enableScripting:ne,hasJSActionsPromise:he,fieldObjectsPromise:U,mouseState:ae,annotationCanvasMap:G,accessibilityManager:q})}}g.DefaultAnnotationLayerFactory=_;class E{createAnnotationEditorLayerBuilder({uiManager:l=null,pageDiv:s,pdfPage:x,accessibilityManager:R=null,l10n:O,annotationStorage:B=null}){return new o.AnnotationEditorLayerBuilder({uiManager:l,pageDiv:s,pdfPage:x,accessibilityManager:R,l10n:O,annotationStorage:B})}}g.DefaultAnnotationEditorLayerFactory=E;class P{createStructTreeLayerBuilder({pdfPage:l}){return new y.StructTreeLayerBuilder({pdfPage:l})}}g.DefaultStructTreeLayerFactory=P;class b{createTextLayerBuilder({textLayerDiv:l,pageIndex:s,viewport:x,enhanceTextSelection:R=!1,eventBus:O,highlighter:B,accessibilityManager:ne=null}){return new d.TextLayerBuilder({textLayerDiv:l,pageIndex:s,viewport:x,enhanceTextSelection:R,eventBus:O,highlighter:B,accessibilityManager:ne})}}g.DefaultTextLayerFactory=b;class p{createXfaLayerBuilder({pageDiv:l,pdfPage:s,annotationStorage:x=null}){return new a.XfaLayerBuilder({pageDiv:l,pdfPage:s,annotationStorage:x,linkService:new C.SimpleLinkService})}}g.DefaultXfaLayerFactory=p},(f,g,T)=>{var C;Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationEditorLayerBuilder=void 0;var o=T(3),m=T(4);class M{constructor(d){pe(this,C);this.pageDiv=d.pageDiv,this.pdfPage=d.pdfPage,this.annotationStorage=d.annotationStorage||null,this.accessibilityManager=d.accessibilityManager,this.l10n=d.l10n||m.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,ge(this,C,d.uiManager)}async render(d,a="display"){if(a!=="display"||this._cancelled)return;const _=d.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:_}),this.show();return}this.div=document.createElement("div"),this.div.className="annotationEditorLayer",this.div.tabIndex=0,this.pageDiv.append(this.div),this.annotationEditorLayer=new o.AnnotationEditorLayer({uiManager:N(this,C),div:this.div,annotationStorage:this.annotationStorage,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage._pageIndex,l10n:this.l10n,viewport:_});const E={viewport:_,div:this.div,annotations:null,intent:a};this.annotationEditorLayer.render(E)}cancel(){this._cancelled=!0,this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}C=new WeakMap,g.AnnotationEditorLayerBuilder=M},f=>{let g;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?g=window["pdfjs-dist/build/pdf"]:g=require$$0,f.exports=g},(f,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.NullL10n=void 0,g.fixupLangCode=M,g.getL10nFallback=o;const T={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function o(d,a){switch(d){case"find_match_count":d=`find_match_count[${a.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${a.limit===1?"one":"other"}]`;break}return T[d]||""}const m={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function M(d){return m[d==null?void 0:d.toLowerCase()]||d}function C(d,a){return a?d.replace(/\{\{\s*(\w+)\s*\}\}/g,(_,E)=>E in a?a[E]:"{{"+E+"}}"):d}const y={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,a=null,_=o(d,a)){return C(_,a)},async translate(d){}};g.NullL10n=y},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationLayerBuilder=void 0;var o=T(3),m=T(4);class M{constructor({pageDiv:y,pdfPage:d,linkService:a,downloadManager:_,annotationStorage:E=null,imageResourcesPath:P="",renderForms:b=!0,l10n:p=m.NullL10n,enableScripting:c=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:s=null,mouseState:x=null,annotationCanvasMap:R=null,accessibilityManager:O=null}){this.pageDiv=y,this.pdfPage=d,this.linkService=a,this.downloadManager=_,this.imageResourcesPath=P,this.renderForms=b,this.l10n=p,this.annotationStorage=E,this.enableScripting=c,this._hasJSActionsPromise=l,this._fieldObjectsPromise=s,this._mouseState=x,this._annotationCanvasMap=R,this._accessibilityManager=O,this.div=null,this._cancelled=!1}async render(y,d="display"){const[a,_=!1,E=null]=await Promise.all([this.pdfPage.getAnnotations({intent:d}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||a.length===0)return;const P={viewport:y.clone({dontFlip:!0}),div:this.div,annotations:a,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:_,fieldObjects:E,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager};this.div?o.AnnotationLayer.update(P):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div),P.div=this.div,o.AnnotationLayer.render(P),this.l10n.translate(this.div))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}g.AnnotationLayerBuilder=M},(f,g,T)=>{var a,_,Dt,P,ui;Object.defineProperty(g,"__esModule",{value:!0}),g.SimpleLinkService=g.PDFLinkService=g.LinkTarget=void 0;var o=T(7);const m="noopener noreferrer nofollow",M={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};g.LinkTarget=M;function C(c,{url:l,target:s,rel:x,enabled:R=!0}={}){if(!l||typeof l!="string")throw new Error('A valid "url" parameter must provided.');const O=(0,o.removeNullCharacters)(l);R?c.href=c.title=O:(c.href="",c.title=`Disabled: ${O}`,c.onclick=()=>!1);let B="";switch(s){case M.NONE:break;case M.SELF:B="_self";break;case M.BLANK:B="_blank";break;case M.PARENT:B="_parent";break;case M.TOP:B="_top";break}c.target=B,c.rel=typeof x=="string"?x:m}const p=class p{constructor({eventBus:l,externalLinkTarget:s=null,externalLinkRel:x=null,ignoreDestinationZoom:R=!1}={}){pe(this,_);pe(this,a,new Map);this.eventBus=l,this.externalLinkTarget=s,this.externalLinkRel=x,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=R,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(l,s=null){this.baseUrl=s,this.pdfDocument=l,N(this,a).clear()}setViewer(l){this.pdfViewer=l}setHistory(l){this.pdfHistory=l}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(l){this.pdfViewer.currentPageNumber=l}get rotation(){return this.pdfViewer.pagesRotation}set rotation(l){this.pdfViewer.pagesRotation=l}async goToDestination(l){if(!this.pdfDocument)return;let s,x;if(typeof l=="string"?(s=l,x=await this.pdfDocument.getDestination(l)):(s=null,x=await l),!Array.isArray(x)){console.error(`PDFLinkService.goToDestination: "${x}" is not a valid destination array, for dest="${l}".`);return}ce(this,_,Dt).call(this,l,s,x)}goToPage(l){if(!this.pdfDocument)return;const s=typeof l=="string"&&this.pdfViewer.pageLabelToPageNumber(l)||l|0;if(!(Number.isInteger(s)&&s>0&&s<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${l}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(s)),this.pdfViewer.scrollPageIntoView({pageNumber:s})}addLinkAttributes(l,s,x=!1){C(l,{url:s,target:x?M.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(l){if(typeof l=="string"){if(l.length>0)return this.getAnchorUrl("#"+escape(l))}else if(Array.isArray(l)){const s=JSON.stringify(l);if(s.length>0)return this.getAnchorUrl("#"+escape(s))}return this.getAnchorUrl("")}getAnchorUrl(l){return(this.baseUrl||"")+l}setHash(l){var R;if(!this.pdfDocument)return;let s,x;if(l.includes("=")){const O=(0,o.parseQueryString)(l);if(O.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:O.get("search").replace(/"/g,""),phraseSearch:O.get("phrase")==="true"}),O.has("page")&&(s=O.get("page")|0||1),O.has("zoom")){const B=O.get("zoom").split(","),ne=B[0],he=parseFloat(ne);ne.includes("Fit")?ne==="Fit"||ne==="FitB"?x=[null,{name:ne}]:ne==="FitH"||ne==="FitBH"||ne==="FitV"||ne==="FitBV"?x=[null,{name:ne},B.length>1?B[1]|0:null]:ne==="FitR"?B.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):x=[null,{name:ne},B[1]|0,B[2]|0,B[3]|0,B[4]|0]:console.error(`PDFLinkService.setHash: "${ne}" is not a valid zoom value.`):x=[null,{name:"XYZ"},B.length>1?B[1]|0:null,B.length>2?B[2]|0:null,he?he/100:ne]}x?this.pdfViewer.scrollPageIntoView({pageNumber:s||this.page,destArray:x,allowNegativeOffset:!0}):s&&(this.page=s),O.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:O.get("pagemode")}),O.has("nameddest")&&this.goToDestination(O.get("nameddest"))}else{x=unescape(l);try{x=JSON.parse(x),Array.isArray(x)||(x=x.toString())}catch{}if(typeof x=="string"||ce(R=p,P,ui).call(R,x)){this.goToDestination(x);return}console.error(`PDFLinkService.setHash: "${unescape(l)}" is not a valid destination.`)}}executeNamedAction(l){var s,x;switch(l){case"GoBack":(s=this.pdfHistory)==null||s.back();break;case"GoForward":(x=this.pdfHistory)==null||x.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:l})}cachePageRef(l,s){if(!s)return;const x=s.gen===0?`${s.num}R`:`${s.num}R${s.gen}`;N(this,a).set(x,l)}_cachedPageNumber(l){if(!l)return null;const s=l.gen===0?`${l.num}R`:`${l.num}R${l.gen}`;return N(this,a).get(s)||null}isPageVisible(l){return this.pdfViewer.isPageVisible(l)}isPageCached(l){return this.pdfViewer.isPageCached(l)}};a=new WeakMap,_=new WeakSet,Dt=function(l,s=null,x){const R=x[0];let O;if(typeof R=="object"&&R!==null){if(O=this._cachedPageNumber(R),!O){this.pdfDocument.getPageIndex(R).then(B=>{this.cachePageRef(B+1,R),ce(this,_,Dt).call(this,l,s,x)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${R}" is not a valid page reference, for dest="${l}".`)});return}}else if(Number.isInteger(R))O=R+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${R}" is not a valid destination reference, for dest="${l}".`);return}if(!O||O<1||O>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${O}" is not a valid page number, for dest="${l}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:s,explicitDest:x,pageNumber:O})),this.pdfViewer.scrollPageIntoView({pageNumber:O,destArray:x,ignoreDestinationZoom:this._ignoreDestinationZoom})},P=new WeakSet,ui=function(l){if(!Array.isArray(l))return!1;const s=l.length;if(s<2)return!1;const x=l[0];if(!(typeof x=="object"&&Number.isInteger(x.num)&&Number.isInteger(x.gen))&&!(Number.isInteger(x)&&x>=0))return!1;const R=l[1];if(!(typeof R=="object"&&typeof R.name=="string"))return!1;let O=!0;switch(R.name){case"XYZ":if(s!==5)return!1;break;case"Fit":case"FitB":return s===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s!==3)return!1;break;case"FitR":if(s!==6)return!1;O=!1;break;default:return!1}for(let B=2;B<s;B++){const ne=l[B];if(!(typeof ne=="number"||O&&ne===null))return!1}return!0},pe(p,P);let y=p;g.PDFLinkService=y;class d{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(l){}get rotation(){return 0}set rotation(l){}async goToDestination(l){}goToPage(l){}addLinkAttributes(l,s,x=!1){C(l,{url:s,enabled:this.externalLinkEnabled})}getDestinationHash(l){return"#"}getAnchorUrl(l){return"#"}setHash(l){}executeNamedAction(l){}cachePageRef(l,s){}isPageVisible(l){return!0}isPageCached(l){return!0}}g.SimpleLinkService=d},(f,g)=>{var A,D,j;Object.defineProperty(g,"__esModule",{value:!0}),g.animationStarted=g.VERTICAL_PADDING=g.UNKNOWN_SCALE=g.TextLayerMode=g.SpreadMode=g.SidebarView=g.ScrollMode=g.SCROLLBAR_PADDING=g.RenderingStates=g.RendererType=g.ProgressBar=g.PresentationModeState=g.OutputScale=g.MIN_SCALE=g.MAX_SCALE=g.MAX_AUTO_SCALE=g.DEFAULT_SCALE_VALUE=g.DEFAULT_SCALE_DELTA=g.DEFAULT_SCALE=g.AutoPrintRegExp=void 0,g.apiPageLayoutToViewerModes=Q,g.apiPageModeToSidebarView=S,g.approximateFraction=q,g.backtrackBeforeAllVisibleElements=ue,g.binarySearchFirstItem=G,g.docStyle=void 0,g.getActiveOrFocusedElement=$,g.getPageSizeInches=oe,g.getVisibleElements=ie,g.isPortraitOrientation=te,g.isValidRotation=X,g.isValidScrollMode=J,g.isValidSpreadMode=ee,g.noContextMenuHandler=Y,g.normalizeWheelEventDelta=L,g.normalizeWheelEventDirection=I,g.parseQueryString=ne,g.removeNullCharacters=U,g.roundToDivide=W,g.scrollIntoView=O,g.watchScroll=B;const T="auto";g.DEFAULT_SCALE_VALUE=T;const o=1;g.DEFAULT_SCALE=o;const m=1.1;g.DEFAULT_SCALE_DELTA=m;const M=.1;g.MIN_SCALE=M;const C=10;g.MAX_SCALE=C;const y=0;g.UNKNOWN_SCALE=y;const d=1.25;g.MAX_AUTO_SCALE=d;const a=40;g.SCROLLBAR_PADDING=a;const _=5;g.VERTICAL_PADDING=_;const E={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};g.RenderingStates=E;const P={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};g.PresentationModeState=P;const b={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};g.SidebarView=b;const p={CANVAS:"canvas",SVG:"svg"};g.RendererType=p;const c={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};g.TextLayerMode=c;const l={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};g.ScrollMode=l;const s={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};g.SpreadMode=s;const x=/\bprint\s*\(/;g.AutoPrintRegExp=x;class R{constructor(){const V=window.devicePixelRatio||1;this.sx=V,this.sy=V}get scaled(){return this.sx!==1||this.sy!==1}}g.OutputScale=R;function O(k,V,Z=!1){let K=k.offsetParent;if(!K){console.error("offsetParent is not set -- cannot scroll");return}let de=k.offsetTop+k.clientTop,se=k.offsetLeft+k.clientLeft;for(;K.clientHeight===K.scrollHeight&&K.clientWidth===K.scrollWidth||Z&&(K.classList.contains("markedContent")||getComputedStyle(K).overflow==="hidden");)if(de+=K.offsetTop,se+=K.offsetLeft,K=K.offsetParent,!K)return;V&&(V.top!==void 0&&(de+=V.top),V.left!==void 0&&(se+=V.left,K.scrollLeft=se)),K.scrollTop=de}function B(k,V){const Z=function(se){de||(de=window.requestAnimationFrame(function(){de=null;const be=k.scrollLeft,me=K.lastX;be!==me&&(K.right=be>me),K.lastX=be;const ye=k.scrollTop,Ee=K.lastY;ye!==Ee&&(K.down=ye>Ee),K.lastY=ye,V(K)}))},K={right:!0,down:!0,lastX:k.scrollLeft,lastY:k.scrollTop,_eventHandler:Z};let de=null;return k.addEventListener("scroll",Z,!0),K}function ne(k){const V=new Map;for(const[Z,K]of new URLSearchParams(k))V.set(Z.toLowerCase(),K);return V}const he=/\x00/g,ae=/[\x01-\x1F]/g;function U(k,V=!1){return typeof k!="string"?(console.error("The argument must be a string."),k):(V&&(k=k.replace(ae," ")),k.replace(he,""))}function G(k,V,Z=0){let K=Z,de=k.length-1;if(de<0||!V(k[de]))return k.length;if(V(k[K]))return K;for(;K<de;){const se=K+de>>1,_e=k[se];V(_e)?de=se:K=se+1}return K}function q(k){if(Math.floor(k)===k)return[k,1];const V=1/k,Z=8;if(V>Z)return[1,Z];if(Math.floor(V)===V)return[1,V];const K=k>1?V:k;let de=0,se=1,_e=1,be=1;for(;;){const ye=de+_e,Ee=se+be;if(Ee>Z)break;K<=ye/Ee?(_e=ye,be=Ee):(de=ye,se=Ee)}let me;return K-de/se<_e/be-K?me=K===k?[de,se]:[se,de]:me=K===k?[_e,be]:[be,_e],me}function W(k,V){const Z=k%V;return Z===0?k:Math.round(k-Z+V)}function oe({view:k,userUnit:V,rotate:Z}){const[K,de,se,_e]=k,be=Z%180!==0,me=(se-K)/72*V,ye=(_e-de)/72*V;return{width:be?ye:me,height:be?me:ye}}function ue(k,V,Z){if(k<2)return k;let K=V[k].div,de=K.offsetTop+K.clientTop;de>=Z&&(K=V[k-1].div,de=K.offsetTop+K.clientTop);for(let se=k-2;se>=0&&(K=V[se].div,!(K.offsetTop+K.clientTop+K.clientHeight<=de));--se)k=se;return k}function ie({scrollEl:k,views:V,sortByVisibility:Z=!1,horizontal:K=!1,rtl:de=!1}){const se=k.scrollTop,_e=se+k.clientHeight,be=k.scrollLeft,me=be+k.clientWidth;function ye(Me){const fe=Me.div;return fe.offsetTop+fe.clientTop+fe.clientHeight>se}function Ee(Me){const fe=Me.div,re=fe.offsetLeft+fe.clientLeft,le=re+fe.clientWidth;return de?re<me:le>be}const Ae=[],we=new Set,Ce=V.length;let xe=G(V,K?Ee:ye);xe>0&&xe<Ce&&!K&&(xe=ue(xe,V,se));let Se=K?me:-1;for(let Me=xe;Me<Ce;Me++){const fe=V[Me],re=fe.div,le=re.offsetLeft+re.clientLeft,ve=re.offsetTop+re.clientTop,Te=re.clientWidth,Re=re.clientHeight,Le=le+Te,Oe=ve+Re;if(Se===-1)Oe>=_e&&(Se=Oe);else if((K?le:ve)>Se)break;if(Oe<=se||ve>=_e||Le<=be||le>=me)continue;const $e=Math.max(0,se-ve)+Math.max(0,Oe-_e),Ve=Math.max(0,be-le)+Math.max(0,Le-me),De=(Re-$e)/Re,ze=(Te-Ve)/Te,Ue=De*ze*100|0;Ae.push({id:fe.id,x:le,y:ve,view:fe,percent:Ue,widthPercent:ze*100|0}),we.add(fe.id)}const Pe=Ae[0],Fe=Ae.at(-1);return Z&&Ae.sort(function(Me,fe){const re=Me.percent-fe.percent;return Math.abs(re)>.001?-re:Me.id-fe.id}),{first:Pe,last:Fe,views:Ae,ids:we}}function Y(k){k.preventDefault()}function I(k){let V=Math.hypot(k.deltaX,k.deltaY);const Z=Math.atan2(k.deltaY,k.deltaX);return-.25*Math.PI<Z&&Z<.75*Math.PI&&(V=-V),V}function L(k){let V=I(k);const Z=0,K=1,de=30,se=30;return k.deltaMode===Z?V/=de*se:k.deltaMode===K&&(V/=se),V}function X(k){return Number.isInteger(k)&&k%90===0}function J(k){return Number.isInteger(k)&&Object.values(l).includes(k)&&k!==l.UNKNOWN}function ee(k){return Number.isInteger(k)&&Object.values(s).includes(k)&&k!==s.UNKNOWN}function te(k){return k.width<=k.height}const w=new Promise(function(k){window.requestAnimationFrame(k)});g.animationStarted=w;const F=document.documentElement.style;g.docStyle=F;function z(k,V,Z){return Math.min(Math.max(k,V),Z)}class H{constructor(V){pe(this,A,null);pe(this,D,0);pe(this,j,!0);if(arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const Z=document.getElementById(V);ge(this,A,Z.classList)}get percent(){return N(this,D)}set percent(V){if(ge(this,D,z(V,0,100)),isNaN(V)){N(this,A).add("indeterminate");return}N(this,A).remove("indeterminate"),F.setProperty("--progressBar-percent",`${N(this,D)}%`)}setWidth(V){if(!V)return;const K=V.parentNode.offsetWidth-V.offsetWidth;K>0&&F.setProperty("--progressBar-end-offset",`${K}px`)}hide(){N(this,j)&&(ge(this,j,!1),N(this,A).add("hidden"))}show(){N(this,j)||(ge(this,j,!0),N(this,A).remove("hidden"))}}A=new WeakMap,D=new WeakMap,j=new WeakMap,g.ProgressBar=H;function $(){let k=document,V=k.activeElement||k.querySelector(":focus");for(;V!=null&&V.shadowRoot;)k=V.shadowRoot,V=k.activeElement||k.querySelector(":focus");return V}function Q(k){let V=l.VERTICAL,Z=s.NONE;switch(k){case"SinglePage":V=l.PAGE;break;case"OneColumn":break;case"TwoPageLeft":V=l.PAGE;case"TwoColumnLeft":Z=s.ODD;break;case"TwoPageRight":V=l.PAGE;case"TwoColumnRight":Z=s.EVEN;break}return{scrollMode:V,spreadMode:Z}}function S(k){switch(k){case"UseNone":return b.NONE;case"UseThumbs":return b.THUMBS;case"UseOutlines":return b.OUTLINE;case"UseAttachments":return b.ATTACHMENTS;case"UseOC":return b.LAYERS}return b.NONE}},(f,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.StructTreeLayerBuilder=void 0;const T={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},o=/^H(\d+)$/;class m{constructor({pdfPage:C}){this.pdfPage=C}render(C){return this._walk(C)}_setAttributes(C,y){C.alt!==void 0&&y.setAttribute("aria-label",C.alt),C.id!==void 0&&y.setAttribute("aria-owns",C.id),C.lang!==void 0&&y.setAttribute("lang",C.lang)}_walk(C){if(!C)return null;const y=document.createElement("span");if("role"in C){const{role:d}=C,a=d.match(o);a?(y.setAttribute("role","heading"),y.setAttribute("aria-level",a[1])):T[d]&&y.setAttribute("role",T[d])}if(this._setAttributes(C,y),C.children)if(C.children.length===1&&"id"in C.children[0])this._setAttributes(C.children[0],y);else for(const d of C.children)y.append(this._walk(d));return y}}g.StructTreeLayerBuilder=m},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextLayerBuilder=void 0;var o=T(3);const m=300;class M{constructor({textLayerDiv:y,eventBus:d,pageIndex:a,viewport:_,highlighter:E=null,enhanceTextSelection:P=!1,accessibilityManager:b=null}){this.textLayerDiv=y,this.eventBus=d,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=a+1,this.viewport=_,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=E,this.enhanceTextSelection=P,this.accessibilityManager=b,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const y=document.createElement("div");y.className="endOfContent",this.textLayerDiv.append(y)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(y=0){var a,_;if(!(this.textContent||this.textContentStream)||this.renderingDone)return;this.cancel(),this.textDivs.length=0,(a=this.highlighter)==null||a.setTextMapping(this.textDivs,this.textContentItemsStr),(_=this.accessibilityManager)==null||_.setTextMapping(this.textDivs);const d=document.createDocumentFragment();this.textLayerRenderTask=(0,o.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:d,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:y,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var E,P;this.textLayerDiv.append(d),this._finishRendering(),(E=this.highlighter)==null||E.enable(),(P=this.accessibilityManager)==null||P.enable()},function(E){})}cancel(){var y,d;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(y=this.highlighter)==null||y.disable(),(d=this.accessibilityManager)==null||d.disable()}setTextContentStream(y){this.cancel(),this.textContentStream=y}setTextContent(y){this.cancel(),this.textContent=y}_bindMouse(){const y=this.textLayerDiv;let d=null;y.addEventListener("mousedown",a=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(!0),d&&(clearTimeout(d),d=null);return}const _=y.querySelector(".endOfContent");if(!_)return;let E=a.target!==y;if(E=E&&window.getComputedStyle(_).getPropertyValue("-moz-user-select")!=="none",E){const P=y.getBoundingClientRect(),b=Math.max(0,(a.pageY-P.top)/P.height);_.style.top=(b*100).toFixed(2)+"%"}_.classList.add("active")}),y.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){d=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),d=null},m);return}const a=y.querySelector(".endOfContent");a&&(a.style.top="",a.classList.remove("active"))})}}g.TextLayerBuilder=M},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaLayerBuilder=void 0;var o=T(3);class m{constructor({pageDiv:C,pdfPage:y,annotationStorage:d=null,linkService:a,xfaHtml:_=null}){this.pageDiv=C,this.pdfPage=y,this.annotationStorage=d,this.linkService=a,this.xfaHtml=_,this.div=null,this._cancelled=!1}render(C,y="display"){if(y==="print"){const d={viewport:C.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:y},a=document.createElement("div");this.pageDiv.append(a),d.div=a;const _=o.XfaLayer.render(d);return Promise.resolve(_)}return this.pdfPage.getXfa().then(d=>{if(this._cancelled||!d)return{textDivs:[]};const a={viewport:C.clone({dontFlip:!0}),div:this.div,xfaHtml:d,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:y};return this.div?o.XfaLayer.update(a):(this.div=document.createElement("div"),this.pageDiv.append(this.div),a.div=this.div,o.XfaLayer.render(a))}).catch(d=>{console.error(d)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}g.XfaLayerBuilder=m},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFViewer=g.PDFSinglePageViewer=void 0;var o=T(7),m=T(12);class M extends m.BaseViewer{}g.PDFViewer=M;class C extends m.BaseViewer{_resetView(){super._resetView(),this._scrollMode=o.ScrollMode.PAGE,this._spreadMode=o.SpreadMode.NONE}set scrollMode(d){}_updateScrollMode(){}set spreadMode(d){}_updateSpreadMode(){}}g.PDFSinglePageViewer=C},(f,g,T)=>{var B,ne,he,Ft,U,G,q,W,oe,ue,ie,Y,I,di,fi,Ke,lt,pi,Ot,gi,_i,mi;Object.defineProperty(g,"__esModule",{value:!0}),g.PagesCountLimit=g.PDFPageViewBuffer=g.BaseViewer=void 0;var o=T(3),m=T(7),M=T(2),C=T(5),y=T(4),d=T(13),a=T(16),_=T(6),E=T(8),P=T(17),b=T(9),p=T(10);const c=10,l="enablePermissions",s={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};g.PagesCountLimit=s;function x(Q){return Object.values(o.AnnotationEditorType).includes(Q)&&Q!==o.AnnotationEditorType.DISABLE}class R{constructor(S){pe(this,he);pe(this,B,new Set);pe(this,ne,0);ge(this,ne,S)}push(S){const A=N(this,B);A.has(S)&&A.delete(S),A.add(S),A.size>N(this,ne)&&ce(this,he,Ft).call(this)}resize(S,A=null){ge(this,ne,S);const D=N(this,B);if(A){const j=D.size;let k=1;for(const V of D)if(A.has(V.id)&&(D.delete(V),D.add(V)),++k>j)break}for(;D.size>N(this,ne);)ce(this,he,Ft).call(this)}has(S){return N(this,B).has(S)}[Symbol.iterator](){return N(this,B).keys()}}B=new WeakMap,ne=new WeakMap,he=new WeakSet,Ft=function(){const S=N(this,B).keys().next().value;S==null||S.destroy(),N(this,B).delete(S)},g.PDFPageViewBuffer=R;const $=class ${constructor(S){pe(this,I);pe(this,U,null);pe(this,G,o.AnnotationEditorType.DISABLE);pe(this,q,null);pe(this,W,o.AnnotationMode.ENABLE_FORMS);pe(this,oe,!1);pe(this,ue,0);pe(this,ie,null);pe(this,Y,null);var D,j;if(this.constructor===$)throw new Error("Cannot initialize BaseViewer.");const A="2.16.105";if(o.version!==A)throw new Error(`The API version "${o.version}" does not match the Viewer version "${A}".`);if(this.container=S.container,this.viewer=S.viewer||S.container.firstElementChild,!(((D=this.container)==null?void 0:D.tagName.toUpperCase())==="DIV"&&((j=this.viewer)==null?void 0:j.tagName.toUpperCase())==="DIV"))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.eventBus=S.eventBus,this.linkService=S.linkService||new _.SimpleLinkService,this.downloadManager=S.downloadManager||null,this.findController=S.findController||null,this._scriptingManager=S.scriptingManager||null,this.removePageBorders=S.removePageBorders||!1,this.textLayerMode=S.textLayerMode??m.TextLayerMode.ENABLE,ge(this,W,S.annotationMode??o.AnnotationMode.ENABLE_FORMS),ge(this,G,S.annotationEditorMode??o.AnnotationEditorType.DISABLE),this.imageResourcesPath=S.imageResourcesPath||"",this.enablePrintAutoRotate=S.enablePrintAutoRotate||!1,this.renderer=S.renderer||m.RendererType.CANVAS,this.useOnlyCssZoom=S.useOnlyCssZoom||!1,this.maxCanvasPixels=S.maxCanvasPixels,this.l10n=S.l10n||y.NullL10n,ge(this,oe,S.enablePermissions||!1),this.pageColors=S.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!S.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new a.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=S.renderingQueue,this.scroll=(0,m.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=m.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(S){return this._pages[S]}get pageViewsReady(){return this._pagesCapability.settled?this._pages.every(function(S){return S==null?void 0:S.pdfPage}):!1}get renderForms(){return N(this,W)===o.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(S){if(!Number.isInteger(S))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(S,!0)||console.error(`currentPageNumber: "${S}" is not a valid page.`))}_setCurrentPageNumber(S,A=!1){var j;if(this._currentPageNumber===S)return A&&ce(this,I,Ot).call(this),!0;if(!(0<S&&S<=this.pagesCount))return!1;const D=this._currentPageNumber;return this._currentPageNumber=S,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:S,pageLabel:((j=this._pageLabels)==null?void 0:j[S-1])??null,previous:D}),A&&ce(this,I,Ot).call(this),!0}get currentPageLabel(){var S;return((S=this._pageLabels)==null?void 0:S[this._currentPageNumber-1])??null}set currentPageLabel(S){if(!this.pdfDocument)return;let A=S|0;if(this._pageLabels){const D=this._pageLabels.indexOf(S);D>=0&&(A=D+1)}this._setCurrentPageNumber(A,!0)||console.error(`currentPageLabel: "${S}" is not a valid page.`)}get currentScale(){return this._currentScale!==m.UNKNOWN_SCALE?this._currentScale:m.DEFAULT_SCALE}set currentScale(S){if(isNaN(S))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(S,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(S){this.pdfDocument&&this._setScale(S,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(S){if(!(0,m.isValidRotation)(S))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(S%=360,S<0&&(S+=360),this._pagesRotation===S))return;this._pagesRotation=S;const A=this._currentPageNumber,D={rotation:S};for(const j of this._pages)j.update(D);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:S,pageNumber:A}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(S){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),N(this,q)&&(N(this,q).destroy(),ge(this,q,null))),this.pdfDocument=S,!S)return;const A=S.isPureXfa,D=S.numPages,j=S.getPage(1),k=S.getOptionalContentConfig(),V=N(this,oe)?S.getPermissions():Promise.resolve();if(D>s.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const Z=this._scrollMode=m.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:Z})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:D})},()=>{}),this._onBeforeDraw=Z=>{const K=this._pages[Z.pageNumber-1];K&&N(this,U).push(K)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=Z=>{Z.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:Z.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,N(this,Y)&&(document.removeEventListener("visibilitychange",N(this,Y)),ge(this,Y,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([j,V]).then(([Z,K])=>{if(S!==this.pdfDocument)return;this._firstPageCapability.resolve(Z),this._optionalContentConfigPromise=k;const{annotationEditorMode:de,annotationMode:se,textLayerMode:_e}=ce(this,I,di).call(this,K);if(de!==o.AnnotationEditorType.DISABLE){const Se=de;A?console.warn("Warning: XFA-editing is not implemented."):x(Se)?(ge(this,q,new o.AnnotationEditorUIManager(this.container,this.eventBus)),Se!==o.AnnotationEditorType.NONE&&N(this,q).updateMode(Se)):console.error(`Invalid AnnotationEditor mode: ${Se}`)}const be=this._scrollMode===m.ScrollMode.PAGE?null:this.viewer,me=this.currentScale,ye=Z.getViewport({scale:me*o.PixelsPerInch.PDF_TO_CSS_UNITS}),Ee=_e!==m.TextLayerMode.DISABLE&&!A?this:null,Ae=se!==o.AnnotationMode.DISABLE?this:null,we=A?this:null,Ce=N(this,q)?this:null;for(let Se=1;Se<=D;++Se){const Pe=new d.PDFPageView({container:be,eventBus:this.eventBus,id:Se,scale:me,defaultViewport:ye.clone(),optionalContentConfigPromise:k,renderingQueue:this.renderingQueue,textLayerFactory:Ee,textLayerMode:_e,annotationLayerFactory:Ae,annotationMode:se,xfaLayerFactory:we,annotationEditorLayerFactory:Ce,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Pe)}const xe=this._pages[0];xe&&(xe.setPdfPage(Z),this.linkService.cachePageRef(1,Z.ref)),this._scrollMode===m.ScrollMode.PAGE?ce(this,I,Ke).call(this):this._spreadMode!==m.SpreadMode.NONE&&this._updateSpreadMode(),ce(this,I,fi).call(this).then(async()=>{if(this.findController&&this.findController.setDocument(S),this._scriptingManager&&this._scriptingManager.setDocument(S),N(this,q)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:N(this,G)}),S.loadingParams.disableAutoFetch||D>s.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let Se=D-1;if(Se<=0){this._pagesCapability.resolve();return}for(let Pe=2;Pe<=D;++Pe){const Fe=S.getPage(Pe).then(Me=>{const fe=this._pages[Pe-1];fe.pdfPage||fe.setPdfPage(Me),this.linkService.cachePageRef(Pe,Me.ref),--Se===0&&this._pagesCapability.resolve()},Me=>{console.error(`Unable to get page ${Pe} to initialize viewer`,Me),--Se===0&&this._pagesCapability.resolve()});Pe%s.PAUSE_EAGER_PAGE_INIT===0&&await Fe}}),this.eventBus.dispatch("pagesinit",{source:this}),S.getMetadata().then(({info:Se})=>{S===this.pdfDocument&&Se.Language&&(this.viewer.lang=Se.Language)}),this.defaultRenderingQueue&&this.update()}).catch(Z=>{console.error("Unable to initialize viewer",Z),this._pagesCapability.reject(Z)})}setPageLabels(S){var A;if(this.pdfDocument){S?Array.isArray(S)&&this.pdfDocument.numPages===S.length?this._pageLabels=S:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let D=0,j=this._pages.length;D<j;D++)this._pages[D].setPageLabel(((A=this._pageLabels)==null?void 0:A[D])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=m.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,ge(this,U,new R(c)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,o.createPromiseCapability)(),this._onePageRenderedCapability=(0,o.createPromiseCapability)(),this._pagesCapability=(0,o.createPromiseCapability)(),this._scrollMode=m.ScrollMode.VERTICAL,this._previousScrollMode=m.ScrollMode.UNKNOWN,this._spreadMode=m.SpreadMode.NONE,ge(this,ie,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),N(this,Y)&&(document.removeEventListener("visibilitychange",N(this,Y)),ge(this,Y,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(l)}_scrollUpdate(){this.pagesCount!==0&&this.update()}_setScaleUpdatePages(S,A,D=!1,j=!1){if(this._currentScaleValue=A.toString(),ce(this,I,pi).call(this,S)){j&&this.eventBus.dispatch("scalechanging",{source:this,scale:S,presetValue:A});return}m.docStyle.setProperty("--scale-factor",S*o.PixelsPerInch.PDF_TO_CSS_UNITS);const k={scale:S};for(const V of this._pages)V.update(k);if(this._currentScale=S,!D){let V=this._currentPageNumber,Z;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(V=this._location.pageNumber,Z=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:V,destArray:Z,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:S,presetValue:j?A:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==m.SpreadMode.NONE&&this._scrollMode!==m.ScrollMode.HORIZONTAL?2:1}_setScale(S,A=!1){let D=parseFloat(S);if(D>0)this._setScaleUpdatePages(D,S,A,!1);else{const j=this._pages[this._currentPageNumber-1];if(!j)return;let k=m.SCROLLBAR_PADDING,V=m.VERTICAL_PADDING;this.isInPresentationMode?k=V=4:this.removePageBorders?k=V=0:this._scrollMode===m.ScrollMode.HORIZONTAL&&([k,V]=[V,k]);const Z=(this.container.clientWidth-k)/j.width*j.scale/this._pageWidthScaleFactor,K=(this.container.clientHeight-V)/j.height*j.scale;switch(S){case"page-actual":D=1;break;case"page-width":D=Z;break;case"page-height":D=K;break;case"page-fit":D=Math.min(Z,K);break;case"auto":const de=(0,m.isPortraitOrientation)(j)?Z:Math.min(K,Z);D=Math.min(m.MAX_AUTO_SCALE,de);break;default:console.error(`_setScale: "${S}" is an unknown zoom value.`);return}this._setScaleUpdatePages(D,S,A,!0)}}pageLabelToPageNumber(S){if(!this._pageLabels)return null;const A=this._pageLabels.indexOf(S);return A<0?null:A+1}scrollPageIntoView({pageNumber:S,destArray:A=null,allowNegativeOffset:D=!1,ignoreDestinationZoom:j=!1}){if(!this.pdfDocument)return;const k=Number.isInteger(S)&&this._pages[S-1];if(!k){console.error(`scrollPageIntoView: "${S}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!A){this._setCurrentPageNumber(S,!0);return}let V=0,Z=0,K=0,de=0,se,_e;const be=k.rotation%180!==0,me=(be?k.height:k.width)/k.scale/o.PixelsPerInch.PDF_TO_CSS_UNITS,ye=(be?k.width:k.height)/k.scale/o.PixelsPerInch.PDF_TO_CSS_UNITS;let Ee=0;switch(A[1].name){case"XYZ":V=A[2],Z=A[3],Ee=A[4],V=V!==null?V:0,Z=Z!==null?Z:ye;break;case"Fit":case"FitB":Ee="page-fit";break;case"FitH":case"FitBH":Z=A[2],Ee="page-width",Z===null&&this._location?(V=this._location.left,Z=this._location.top):(typeof Z!="number"||Z<0)&&(Z=ye);break;case"FitV":case"FitBV":V=A[2],K=me,de=ye,Ee="page-height";break;case"FitR":V=A[2],Z=A[3],K=A[4]-V,de=A[5]-Z;const xe=this.removePageBorders?0:m.SCROLLBAR_PADDING,Se=this.removePageBorders?0:m.VERTICAL_PADDING;se=(this.container.clientWidth-xe)/K/o.PixelsPerInch.PDF_TO_CSS_UNITS,_e=(this.container.clientHeight-Se)/de/o.PixelsPerInch.PDF_TO_CSS_UNITS,Ee=Math.min(Math.abs(se),Math.abs(_e));break;default:console.error(`scrollPageIntoView: "${A[1].name}" is not a valid destination type.`);return}if(j||(Ee&&Ee!==this._currentScale?this.currentScaleValue=Ee:this._currentScale===m.UNKNOWN_SCALE&&(this.currentScaleValue=m.DEFAULT_SCALE_VALUE)),Ee==="page-fit"&&!A[4]){ce(this,I,lt).call(this,k);return}const Ae=[k.viewport.convertToViewportPoint(V,Z),k.viewport.convertToViewportPoint(V+K,Z+de)];let we=Math.min(Ae[0][0],Ae[1][0]),Ce=Math.min(Ae[0][1],Ae[1][1]);D||(we=Math.max(we,0),Ce=Math.max(Ce,0)),ce(this,I,lt).call(this,k,{left:we,top:Ce})}_updateLocation(S){const A=this._currentScale,D=this._currentScaleValue,j=parseFloat(D)===A?Math.round(A*1e4)/100:D,k=S.id,V=this._pages[k-1],Z=this.container,K=V.getPagePoint(Z.scrollLeft-S.x,Z.scrollTop-S.y),de=Math.round(K[0]),se=Math.round(K[1]);let _e=`#page=${k}`;this.isInPresentationMode||(_e+=`&zoom=${j},${de},${se}`),this._location={pageNumber:k,scale:j,top:se,left:de,rotation:this._pagesRotation,pdfOpenParams:_e}}update(){const S=this._getVisiblePages(),A=S.views,D=A.length;if(D===0)return;const j=Math.max(c,2*D+1);N(this,U).resize(j,S.ids),this.renderingQueue.renderHighestPriority(S);const k=this._spreadMode===m.SpreadMode.NONE&&(this._scrollMode===m.ScrollMode.PAGE||this._scrollMode===m.ScrollMode.VERTICAL),V=this._currentPageNumber;let Z=!1;for(const K of A){if(K.percent<100)break;if(K.id===V&&k){Z=!0;break}}this._setCurrentPageNumber(Z?V:A[0].id),this._updateLocation(S.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(S){return this.container.contains(S)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===m.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===m.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const S=this._scrollMode===m.ScrollMode.PAGE?N(this,ie).pages:this._pages,A=this._scrollMode===m.ScrollMode.HORIZONTAL,D=A&&this._isContainerRtl;return(0,m.getVisibleElements)({scrollEl:this.container,views:S,sortByVisibility:!0,horizontal:A,rtl:D})}isPageVisible(S){return this.pdfDocument?Number.isInteger(S)&&S>0&&S<=this.pagesCount?this._getVisiblePages().ids.has(S):(console.error(`isPageVisible: "${S}" is not a valid page.`),!1):!1}isPageCached(S){if(!this.pdfDocument)return!1;if(!(Number.isInteger(S)&&S>0&&S<=this.pagesCount))return console.error(`isPageCached: "${S}" is not a valid page.`),!1;const A=this._pages[S-1];return N(this,U).has(A)}cleanup(){for(const S of this._pages)S.renderingState!==m.RenderingStates.FINISHED&&S.reset()}_cancelRendering(){for(const S of this._pages)S.cancelRendering()}forceRendering(S){const A=S||this._getVisiblePages(),D=ce(this,I,_i).call(this,A),j=this._spreadMode!==m.SpreadMode.NONE&&this._scrollMode!==m.ScrollMode.HORIZONTAL,k=this.renderingQueue.getHighestPriority(A,this._pages,D,j);return ce(this,I,mi).call(this,A.ids),k?(ce(this,I,gi).call(this,k).then(()=>{this.renderingQueue.renderView(k)}),!0):!1}createTextLayerBuilder({textLayerDiv:S,pageIndex:A,viewport:D,enhanceTextSelection:j=!1,eventBus:k,highlighter:V,accessibilityManager:Z=null}){return new b.TextLayerBuilder({textLayerDiv:S,eventBus:k,pageIndex:A,viewport:D,enhanceTextSelection:this.isInPresentationMode?!1:j,highlighter:V,accessibilityManager:Z})}createTextHighlighter({pageIndex:S,eventBus:A}){return new P.TextHighlighter({eventBus:A,pageIndex:S,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:S,pdfPage:A,annotationStorage:D=(me=>(me=this.pdfDocument)==null?void 0:me.annotationStorage)(),imageResourcesPath:j="",renderForms:k=!0,l10n:V=y.NullL10n,enableScripting:Z=this.enableScripting,hasJSActionsPromise:K=(ye=>(ye=this.pdfDocument)==null?void 0:ye.hasJSActions())(),mouseState:de=(Ee=>(Ee=this._scriptingManager)==null?void 0:Ee.mouseState)(),fieldObjectsPromise:se=(Ae=>(Ae=this.pdfDocument)==null?void 0:Ae.getFieldObjects())(),annotationCanvasMap:_e=null,accessibilityManager:be=null}){return new C.AnnotationLayerBuilder({pageDiv:S,pdfPage:A,annotationStorage:D,imageResourcesPath:j,renderForms:k,linkService:this.linkService,downloadManager:this.downloadManager,l10n:V,enableScripting:Z,hasJSActionsPromise:K,mouseState:de,fieldObjectsPromise:se,annotationCanvasMap:_e,accessibilityManager:be})}createAnnotationEditorLayerBuilder({uiManager:S=N(this,q),pageDiv:A,pdfPage:D,accessibilityManager:j=null,l10n:k,annotationStorage:V=(Z=>(Z=this.pdfDocument)==null?void 0:Z.annotationStorage)()}){return new M.AnnotationEditorLayerBuilder({uiManager:S,pageDiv:A,pdfPage:D,annotationStorage:V,accessibilityManager:j,l10n:k})}createXfaLayerBuilder({pageDiv:S,pdfPage:A,annotationStorage:D=(j=>(j=this.pdfDocument)==null?void 0:j.annotationStorage)()}){return new p.XfaLayerBuilder({pageDiv:S,pdfPage:A,annotationStorage:D,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:S}){return new E.StructTreeLayerBuilder({pdfPage:S})}get hasEqualPageSizes(){const S=this._pages[0];for(let A=1,D=this._pages.length;A<D;++A){const j=this._pages[A];if(j.width!==S.width||j.height!==S.height)return!1}return!0}getPagesOverview(){return this._pages.map(S=>{const A=S.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,m.isPortraitOrientation)(A)?{width:A.width,height:A.height,rotation:A.rotation}:{width:A.height,height:A.width,rotation:(A.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(S){if(!(S instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${S}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=S;const A={optionalContentConfigPromise:S};for(const D of this._pages)D.update(A);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:S})}get scrollMode(){return this._scrollMode}set scrollMode(S){if(this._scrollMode!==S){if(!(0,m.isValidScrollMode)(S))throw new Error(`Invalid scroll mode: ${S}`);this.pagesCount>s.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=S,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:S}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(S=null){const A=this._scrollMode,D=this.viewer;D.classList.toggle("scrollHorizontal",A===m.ScrollMode.HORIZONTAL),D.classList.toggle("scrollWrapped",A===m.ScrollMode.WRAPPED),!(!this.pdfDocument||!S)&&(A===m.ScrollMode.PAGE?ce(this,I,Ke).call(this):this._previousScrollMode===m.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(S,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(S){if(this._spreadMode!==S){if(!(0,m.isValidSpreadMode)(S))throw new Error(`Invalid spread mode: ${S}`);this._spreadMode=S,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:S}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(S=null){if(!this.pdfDocument)return;const A=this.viewer,D=this._pages;if(this._scrollMode===m.ScrollMode.PAGE)ce(this,I,Ke).call(this);else if(A.textContent="",this._spreadMode===m.SpreadMode.NONE)for(const j of this._pages)A.append(j.div);else{const j=this._spreadMode-1;let k=null;for(let V=0,Z=D.length;V<Z;++V)k===null?(k=document.createElement("div"),k.className="spread",A.append(k)):V%2===j&&(k=k.cloneNode(!1),A.append(k)),k.append(D[V].div)}S&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(S,!0),this.update())}_getPageAdvance(S,A=!1){switch(this._scrollMode){case m.ScrollMode.WRAPPED:{const{views:D}=this._getVisiblePages(),j=new Map;for(const{id:k,y:V,percent:Z,widthPercent:K}of D){if(Z===0||K<100)continue;let de=j.get(V);de||j.set(V,de||(de=[])),de.push(k)}for(const k of j.values()){const V=k.indexOf(S);if(V===-1)continue;const Z=k.length;if(Z===1)break;if(A)for(let K=V-1,de=0;K>=de;K--){const se=k[K],_e=k[K+1]-1;if(se<_e)return S-_e}else for(let K=V+1,de=Z;K<de;K++){const se=k[K],_e=k[K-1]+1;if(se>_e)return _e-S}if(A){const K=k[0];if(K<S)return S-K+1}else{const K=k[Z-1];if(K>S)return K-S+1}break}break}case m.ScrollMode.HORIZONTAL:break;case m.ScrollMode.PAGE:case m.ScrollMode.VERTICAL:{if(this._spreadMode===m.SpreadMode.NONE)break;const D=this._spreadMode-1;if(A&&S%2!==D)break;if(!A&&S%2===D)break;const{views:j}=this._getVisiblePages(),k=A?S-1:S+1;for(const{id:V,percent:Z,widthPercent:K}of j)if(V===k){if(Z>0&&K===100)return 2;break}break}}return 1}nextPage(){const S=this._currentPageNumber,A=this.pagesCount;if(S>=A)return!1;const D=this._getPageAdvance(S,!1)||1;return this.currentPageNumber=Math.min(S+D,A),!0}previousPage(){const S=this._currentPageNumber;if(S<=1)return!1;const A=this._getPageAdvance(S,!0)||1;return this.currentPageNumber=Math.max(S-A,1),!0}increaseScale(S=1){let A=this._currentScale;do A=(A*m.DEFAULT_SCALE_DELTA).toFixed(2),A=Math.ceil(A*10)/10,A=Math.min(m.MAX_SCALE,A);while(--S>0&&A<m.MAX_SCALE);this.currentScaleValue=A}decreaseScale(S=1){let A=this._currentScale;do A=(A/m.DEFAULT_SCALE_DELTA).toFixed(2),A=Math.floor(A*10)/10,A=Math.max(m.MIN_SCALE,A);while(--S>0&&A>m.MIN_SCALE);this.currentScaleValue=A}updateContainerHeightCss(){const S=this.container.clientHeight;S!==N(this,ue)&&(ge(this,ue,S),m.docStyle.setProperty("--viewer-container-height",`${S}px`))}get annotationEditorMode(){return N(this,q)?N(this,G):o.AnnotationEditorType.DISABLE}set annotationEditorMode(S){if(!N(this,q))throw new Error("The AnnotationEditor is not enabled.");if(N(this,G)!==S){if(!x(S))throw new Error(`Invalid AnnotationEditor mode: ${S}`);this.pdfDocument&&(ge(this,G,S),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:S}),N(this,q).updateMode(S))}}set annotationEditorParams({type:S,value:A}){if(!N(this,q))throw new Error("The AnnotationEditor is not enabled.");N(this,q).updateParams(S,A)}refresh(){if(!this.pdfDocument)return;const S={};for(const A of this._pages)A.update(S);this.update()}};U=new WeakMap,G=new WeakMap,q=new WeakMap,W=new WeakMap,oe=new WeakMap,ue=new WeakMap,ie=new WeakMap,Y=new WeakMap,I=new WeakSet,di=function(S){const A={annotationEditorMode:N(this,G),annotationMode:N(this,W),textLayerMode:this.textLayerMode};return S&&(S.includes(o.PermissionFlag.COPY)||this.viewer.classList.add(l),S.includes(o.PermissionFlag.MODIFY_CONTENTS)||(A.annotationEditorMode=o.AnnotationEditorType.DISABLE),!S.includes(o.PermissionFlag.MODIFY_ANNOTATIONS)&&!S.includes(o.PermissionFlag.FILL_INTERACTIVE_FORMS)&&N(this,W)===o.AnnotationMode.ENABLE_FORMS&&(A.annotationMode=o.AnnotationMode.ENABLE)),A},fi=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const S=new Promise(A=>{ge(this,Y,()=>{document.visibilityState==="hidden"&&(A(),document.removeEventListener("visibilitychange",N(this,Y)),ge(this,Y,null))}),document.addEventListener("visibilitychange",N(this,Y))});return Promise.race([this._onePageRenderedCapability.promise,S])},Ke=function(){if(this._scrollMode!==m.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const S=this._currentPageNumber,A=N(this,ie),D=this.viewer;if(D.textContent="",A.pages.length=0,this._spreadMode===m.SpreadMode.NONE&&!this.isInPresentationMode){const j=this._pages[S-1];D.append(j.div),A.pages.push(j)}else{const j=new Set,k=this._spreadMode-1;k===-1?j.add(S-1):S%2!==k?(j.add(S-1),j.add(S)):(j.add(S-2),j.add(S-1));const V=document.createElement("div");if(V.className="spread",this.isInPresentationMode){const Z=document.createElement("div");Z.className="dummyPage",V.append(Z)}for(const Z of j){const K=this._pages[Z];K&&(V.append(K.div),A.pages.push(K))}D.append(V)}A.scrollDown=S>=A.previousPageNumber,A.previousPageNumber=S},lt=function(S,A=null){const{div:D,id:j}=S;if(this._scrollMode===m.ScrollMode.PAGE&&(this._setCurrentPageNumber(j),ce(this,I,Ke).call(this),this.update()),!A&&!this.isInPresentationMode){const k=D.offsetLeft+D.clientLeft,V=k+D.clientWidth,{scrollLeft:Z,clientWidth:K}=this.container;(this._scrollMode===m.ScrollMode.HORIZONTAL||k<Z||V>Z+K)&&(A={left:0,top:0})}(0,m.scrollIntoView)(D,A)},pi=function(S){return S===this._currentScale||Math.abs(S-this._currentScale)<1e-15},Ot=function(){const S=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),ce(this,I,lt).call(this,S)},gi=async function(S){var A,D;if(S.pdfPage)return S.pdfPage;try{const j=await this.pdfDocument.getPage(S.id);return S.pdfPage||S.setPdfPage(j),(D=(A=this.linkService)._cachedPageNumber)!=null&&D.call(A,j.ref)||this.linkService.cachePageRef(S.id,j.ref),j}catch(j){return console.error("Unable to get page for page view",j),null}},_i=function(S){var A,D;if(((A=S.first)==null?void 0:A.id)===1)return!0;if(((D=S.last)==null?void 0:D.id)===this.pagesCount)return!1;switch(this._scrollMode){case m.ScrollMode.PAGE:return N(this,ie).scrollDown;case m.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},mi=function(S){for(const A of S){const D=this._pages[A-1];D==null||D.toggleLoadingIconSpinner(!0)}for(const A of N(this,U))S.has(A.id)||A.toggleLoadingIconSpinner(!1)};let O=$;g.BaseViewer=O},(f,g,T)=>{var _,E;Object.defineProperty(g,"__esModule",{value:!0}),g.PDFPageView=void 0;var o=T(3),m=T(7),M=T(14),C=T(4),y=T(15);const d=M.compatibilityParams.maxCanvasPixels||16777216;class a{constructor(b){pe(this,_,o.AnnotationMode.ENABLE_FORMS);pe(this,E,{initialOptionalContent:!0,regularAnnotations:!0});var s,x;const p=b.container,c=b.defaultViewport;this.id=b.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=b.scale||m.DEFAULT_SCALE,this.viewport=c,this.pdfPageRotate=c.rotation,this._optionalContentConfigPromise=b.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=b.textLayerMode??m.TextLayerMode.ENABLE,ge(this,_,b.annotationMode??o.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=b.imageResourcesPath||"",this.useOnlyCssZoom=b.useOnlyCssZoom||!1,this.maxCanvasPixels=b.maxCanvasPixels||d,this.pageColors=b.pageColors||null,this.eventBus=b.eventBus,this.renderingQueue=b.renderingQueue,this.textLayerFactory=b.textLayerFactory,this.annotationLayerFactory=b.annotationLayerFactory,this.annotationEditorLayerFactory=b.annotationEditorLayerFactory,this.xfaLayerFactory=b.xfaLayerFactory,this.textHighlighter=(s=b.textHighlighterFactory)==null?void 0:s.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=b.structTreeLayerFactory,this.renderer=b.renderer||m.RendererType.CANVAS,this.l10n=b.l10n||C.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=m.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!((x=this.renderingQueue)!=null&&x.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const l=document.createElement("div");if(l.className="page",l.style.width=Math.floor(this.viewport.width)+"px",l.style.height=Math.floor(this.viewport.height)+"px",l.setAttribute("data-page-number",this.id),l.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(R=>{l.setAttribute("aria-label",R)}),this.div=l,p==null||p.append(l),this._isStandalone){const{optionalContentConfigPromise:R}=b;R&&R.then(O=>{R===this._optionalContentConfigPromise&&(N(this,E).initialOptionalContent=O.hasInitialVisibility)})}}setPdfPage(b){this.pdfPage=b,this.pdfPageRotate=b.rotate;const p=(this.rotation+this.pdfPageRotate)%360;this.viewport=b.getViewport({scale:this.scale*o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:p}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let b=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(p){console.error(`_renderAnnotationLayer: "${p}".`),b=p}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:b})}}async _renderAnnotationEditorLayer(){let b=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(p){console.error(`_renderAnnotationEditorLayer: "${p}".`),b=p}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:b})}}async _renderXfaLayer(){let b=null;try{const p=await this.xfaLayer.render(this.viewport,"display");this.textHighlighter&&this._buildXfaTextContentItems(p.textDivs)}catch(p){console.error(`_renderXfaLayer: "${p}".`),b=p}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:b})}}async _buildXfaTextContentItems(b){const p=await this.pdfPage.getTextContent(),c=[];for(const l of p.items)c.push(l.str);this.textHighlighter.setTextMapping(b,c),this.textHighlighter.enable()}_resetZoomLayer(b=!1){if(!this.zoomLayer)return;const p=this.zoomLayer.firstChild;this.paintedViewportMap.delete(p),p.width=0,p.height=0,b&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:b=!1,keepAnnotationLayer:p=!1,keepAnnotationEditorLayer:c=!1,keepXfaLayer:l=!1}={}){var he,ae,U,G;this.cancelRendering({keepAnnotationLayer:p,keepAnnotationEditorLayer:c,keepXfaLayer:l}),this.renderingState=m.RenderingStates.INITIAL;const s=this.div;s.style.width=Math.floor(this.viewport.width)+"px",s.style.height=Math.floor(this.viewport.height)+"px";const x=s.childNodes,R=b&&this.zoomLayer||null,O=p&&((he=this.annotationLayer)==null?void 0:he.div)||null,B=c&&((ae=this.annotationEditorLayer)==null?void 0:ae.div)||null,ne=l&&((U=this.xfaLayer)==null?void 0:U.div)||null;for(let q=x.length-1;q>=0;q--){const W=x[q];switch(W){case R:case O:case B:case ne:continue}W.remove()}s.removeAttribute("data-loaded"),O&&this.annotationLayer.hide(),B?this.annotationEditorLayer.hide():(G=this.annotationEditorLayer)==null||G.destroy(),ne&&this.xfaLayer.hide(),R||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(q=>{var W;(W=this.loadingIconDiv)==null||W.setAttribute("aria-label",q)}),s.append(this.loadingIconDiv)}update({scale:b=0,rotation:p=null,optionalContentConfigPromise:c=null}){this.scale=b||this.scale,typeof p=="number"&&(this.rotation=p),c instanceof Promise&&(this._optionalContentConfigPromise=c,c.then(x=>{c===this._optionalContentConfigPromise&&(N(this,E).initialOptionalContent=x.hasInitialVisibility)}));const l=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:l}),this._isStandalone&&m.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}let s=!1;if(this.canvas&&this.maxCanvasPixels>0){const x=this.outputScale;(Math.floor(this.viewport.width)*x.sx|0)*(Math.floor(this.viewport.height)*x.sy|0)>this.maxCanvasPixels&&(s=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&s){this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:b=!1,keepAnnotationEditorLayer:p=!1,keepXfaLayer:c=!1}={}){var l;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!b||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!p||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!c||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(l=this.textHighlighter)==null||l.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:b,redrawAnnotationLayer:p=!1,redrawAnnotationEditorLayer:c=!1,redrawXfaLayer:l=!1}){const s=this.viewport.width,x=this.viewport.height,R=this.div;b.style.width=b.parentNode.style.width=R.style.width=Math.floor(s)+"px",b.style.height=b.parentNode.style.height=R.style.height=Math.floor(x)+"px";const O=this.viewport.rotation-this.paintedViewportMap.get(b).rotation,B=Math.abs(O);let ne=1,he=1;if((B===90||B===270)&&(ne=x/s,he=s/x),b.style.transform=`rotate(${O}deg) scale(${ne}, ${he})`,this.textLayer){const ae=this.textLayer.viewport,U=this.viewport.rotation-ae.rotation,G=Math.abs(U);let q=s/ae.width;(G===90||G===270)&&(q=s/ae.height);const W=this.textLayer.textLayerDiv;let oe,ue;switch(G){case 0:oe=ue=0;break;case 90:oe=0,ue="-"+W.style.height;break;case 180:oe="-"+W.style.width,ue="-"+W.style.height;break;case 270:oe="-"+W.style.width,ue=0;break;default:console.error("Bad rotation value.");break}W.style.transform=`rotate(${G}deg) scale(${q}) translate(${oe}, ${ue})`,W.style.transformOrigin="0% 0%"}p&&this.annotationLayer&&this._renderAnnotationLayer(),c&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),l&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(b,p){return this.viewport.convertToPdfPoint(b,p)}toggleLoadingIconSpinner(b=!1){var p;(p=this.loadingIconDiv)==null||p.classList.toggle("notVisible",!b)}draw(){var ne,he,ae;this.renderingState!==m.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:b,pdfPage:p}=this;if(!p)return this.renderingState=m.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=m.RenderingStates.RUNNING;const c=document.createElement("div");c.style.width=b.style.width,c.style.height=b.style.height,c.classList.add("canvasWrapper");const l=((ne=this.annotationLayer)==null?void 0:ne.div)||((he=this.annotationEditorLayer)==null?void 0:he.div);l?l.before(c):b.append(c);let s=null;if(this.textLayerMode!==m.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||(this._accessibilityManager=new y.TextAccessibilityManager);const U=document.createElement("div");U.className="textLayer",U.style.width=c.style.width,U.style.height=c.style.height,l?l.before(U):b.append(U),s=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:U,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===m.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=s,N(this,_)!==o.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:b,pdfPage:p,imageResourcesPath:this.imageResourcesPath,renderForms:N(this,_)===o.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}))),(ae=this.xfaLayer)!=null&&ae.div&&b.append(this.xfaLayer.div);let x=null;this.renderingQueue&&(x=U=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=m.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=m.RenderingStates.RUNNING,U()};return}U()});const R=async(U=null)=>{if(O===this.paintTask&&(this.paintTask=null),U instanceof o.RenderingCancelledException){this._renderError=null;return}if(this._renderError=U,this.renderingState=m.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),this._resetZoomLayer(!0),N(this,E).regularAnnotations=!O.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),U)throw U},O=this.renderer===m.RendererType.SVG?this.paintOnSvg(c):this.paintOnCanvas(c);O.onRenderContinue=x,this.paintTask=O;const B=O.promise.then(()=>R(null).then(()=>{if(s){const U=p.streamTextContent({includeMarkedContent:!0});s.setTextContentStream(U),s.render()}this.annotationLayer&&this._renderAnnotationLayer().then(()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||(this.annotationEditorLayer=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:b,pdfPage:p,l10n:this.l10n,accessibilityManager:this._accessibilityManager})),this._renderAnnotationEditorLayer())})}),function(U){return R(U)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:b,pdfPage:p})),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=U=>{U.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(G=>{if(!G||!this.canvas)return;const q=this.structTreeLayer.render(G);q.classList.add("structTree"),this.canvas.append(q)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:p})),b.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),B}paintOnCanvas(b){const p=(0,o.createPromiseCapability)(),c={promise:p.promise,onRenderContinue(q){q()},cancel(){G.cancel()},get separateAnnots(){return G.separateAnnots}},l=this.viewport,s=document.createElement("canvas");s.setAttribute("role","presentation"),s.hidden=!0;let x=!0;const R=function(){x&&(s.hidden=!1,x=!1)};b.append(s),this.canvas=s;const O=s.getContext("2d",{alpha:!1}),B=this.outputScale=new m.OutputScale;if(this.useOnlyCssZoom){const q=l.clone({scale:o.PixelsPerInch.PDF_TO_CSS_UNITS});B.sx*=q.width/l.width,B.sy*=q.height/l.height}if(this.maxCanvasPixels>0){const q=l.width*l.height,W=Math.sqrt(this.maxCanvasPixels/q);B.sx>W||B.sy>W?(B.sx=W,B.sy=W,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const ne=(0,m.approximateFraction)(B.sx),he=(0,m.approximateFraction)(B.sy);s.width=(0,m.roundToDivide)(l.width*B.sx,ne[0]),s.height=(0,m.roundToDivide)(l.height*B.sy,he[0]),s.style.width=(0,m.roundToDivide)(l.width,ne[1])+"px",s.style.height=(0,m.roundToDivide)(l.height,he[1])+"px",this.paintedViewportMap.set(s,l);const ae=B.scaled?[B.sx,0,0,B.sy,0,0]:null,U={canvasContext:O,transform:ae,viewport:this.viewport,annotationMode:N(this,_),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},G=this.pdfPage.render(U);return G.onContinue=function(q){R(),c.onRenderContinue?c.onRenderContinue(q):q()},G.promise.then(function(){R(),p.resolve()},function(q){R(),p.reject(q)}),c}paintOnSvg(b){let p=!1;const c=()=>{if(p)throw new o.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},l=this.pdfPage,s=this.viewport.clone({scale:o.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:l.getOperatorList({annotationMode:N(this,_)}).then(R=>(c(),new o.SVGGraphics(l.commonObjs,l.objs).getSVG(R,s).then(B=>{c(),this.svg=B,this.paintedViewportMap.set(B,s),B.style.width=b.style.width,B.style.height=b.style.height,this.renderingState=m.RenderingStates.FINISHED,b.append(B)}))),onRenderContinue(R){R()},cancel(){p=!0},get separateAnnots(){return!1}}}setPageLabel(b){this.pageLabel=typeof b=="string"?b:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:b,regularAnnotations:p}=N(this,E);return b&&p?this.canvas:null}}_=new WeakMap,E=new WeakMap,g.PDFPageView=a},(f,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.compatibilityParams=g.OptionKind=g.AppOptions=void 0;const T=Object.create(null);g.compatibilityParams=T;{const y=navigator.userAgent||"",d=navigator.platform||"",a=navigator.maxTouchPoints||1,_=/Android/.test(y),E=/\b(iPad|iPhone|iPod)(?=;)/.test(y)||d==="MacIntel"&&a>1;(function(){(E||_)&&(T.maxCanvasPixels=5242880)})()}const o={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};g.OptionKind=o;const m={annotationEditorMode:{value:-1,kind:o.VIEWER+o.PREFERENCE},annotationMode:{value:2,kind:o.VIEWER+o.PREFERENCE},cursorToolOnLoad:{value:0,kind:o.VIEWER+o.PREFERENCE},defaultZoomValue:{value:"",kind:o.VIEWER+o.PREFERENCE},disableHistory:{value:!1,kind:o.VIEWER},disablePageLabels:{value:!1,kind:o.VIEWER+o.PREFERENCE},enablePermissions:{value:!1,kind:o.VIEWER+o.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:o.VIEWER+o.PREFERENCE},enableScripting:{value:!0,kind:o.VIEWER+o.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:o.VIEWER},externalLinkTarget:{value:0,kind:o.VIEWER+o.PREFERENCE},historyUpdateUrl:{value:!1,kind:o.VIEWER+o.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:o.VIEWER+o.PREFERENCE},imageResourcesPath:{value:"./images/",kind:o.VIEWER},maxCanvasPixels:{value:16777216,kind:o.VIEWER},forcePageColors:{value:!1,kind:o.VIEWER+o.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:o.VIEWER+o.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:o.VIEWER+o.PREFERENCE},pdfBugEnabled:{value:!1,kind:o.VIEWER+o.PREFERENCE},printResolution:{value:150,kind:o.VIEWER},sidebarViewOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},scrollModeOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},spreadModeOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},textLayerMode:{value:1,kind:o.VIEWER+o.PREFERENCE},useOnlyCssZoom:{value:!1,kind:o.VIEWER+o.PREFERENCE},viewerCssTheme:{value:0,kind:o.VIEWER+o.PREFERENCE},viewOnLoad:{value:0,kind:o.VIEWER+o.PREFERENCE},cMapPacked:{value:!0,kind:o.API},cMapUrl:{value:"../web/cmaps/",kind:o.API},disableAutoFetch:{value:!1,kind:o.API+o.PREFERENCE},disableFontFace:{value:!1,kind:o.API+o.PREFERENCE},disableRange:{value:!1,kind:o.API+o.PREFERENCE},disableStream:{value:!1,kind:o.API+o.PREFERENCE},docBaseUrl:{value:"",kind:o.API},enableXfa:{value:!0,kind:o.API+o.PREFERENCE},fontExtraProperties:{value:!1,kind:o.API},isEvalSupported:{value:!0,kind:o.API},maxImageSize:{value:-1,kind:o.API},pdfBug:{value:!1,kind:o.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:o.API},verbosity:{value:1,kind:o.API},workerPort:{value:null,kind:o.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:o.WORKER}};m.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:o.VIEWER},m.disablePreferences={value:!1,kind:o.VIEWER},m.locale={value:navigator.language||"en-US",kind:o.VIEWER},m.renderer={value:"canvas",kind:o.VIEWER+o.PREFERENCE},m.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:o.VIEWER};const M=Object.create(null);class C{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(d){const a=M[d];if(a!==void 0)return a;const _=m[d];if(_!==void 0)return T[d]??_.value}static getAll(d=null){const a=Object.create(null);for(const _ in m){const E=m[_];if(d){if(!(d&E.kind))continue;if(d===o.PREFERENCE){const b=E.value,p=typeof b;if(p==="boolean"||p==="string"||p==="number"&&Number.isInteger(b)){a[_]=b;continue}throw new Error(`Invalid type for preference: ${_}`)}}const P=M[_];a[_]=P!==void 0?P:T[_]??E.value}return a}static set(d,a){M[d]=a}static setAll(d){for(const a in d)M[a]=d[a]}static remove(d){delete M[d]}static _hasUserOptions(){return Object.keys(M).length>0}}g.AppOptions=C},(f,g,T)=>{var M,C,y,d,a,ct,E,Nt;Object.defineProperty(g,"__esModule",{value:!0}),g.TextAccessibilityManager=void 0;var o=T(7);const b=class b{constructor(){pe(this,E);pe(this,M,!1);pe(this,C,null);pe(this,y,new Map);pe(this,d,new Map)}setTextMapping(c){ge(this,C,c)}enable(){if(N(this,M))throw new Error("TextAccessibilityManager is already enabled.");if(!N(this,C))throw new Error("Text divs and strings have not been set.");if(ge(this,M,!0),ge(this,C,N(this,C).slice()),N(this,C).sort(ce(b,a,ct)),N(this,y).size>0){const c=N(this,C);for(const[l,s]of N(this,y)){if(!document.getElementById(l)){N(this,y).delete(l);continue}ce(this,E,Nt).call(this,l,c[s])}}for(const[c,l]of N(this,d))this.addPointerInTextLayer(c,l);N(this,d).clear()}disable(){N(this,M)&&(N(this,d).clear(),ge(this,C,null),ge(this,M,!1))}removePointerInTextLayer(c){if(!N(this,M)){N(this,d).delete(c);return}const l=N(this,C);if(!l||l.length===0)return;const{id:s}=c,x=N(this,y).get(s);if(x===void 0)return;const R=l[x];N(this,y).delete(s);let O=R.getAttribute("aria-owns");O!=null&&O.includes(s)&&(O=O.split(" ").filter(B=>B!==s).join(" "),O?R.setAttribute("aria-owns",O):(R.removeAttribute("aria-owns"),R.setAttribute("role","presentation")))}addPointerInTextLayer(c,l){const{id:s}=c;if(!s)return;if(!N(this,M)){N(this,d).set(c,l);return}l&&this.removePointerInTextLayer(c);const x=N(this,C);if(!x||x.length===0)return;const R=(0,o.binarySearchFirstItem)(x,B=>{var ne;return ce(ne=b,a,ct).call(ne,c,B)<0}),O=Math.max(0,R-1);ce(this,E,Nt).call(this,s,x[O]),N(this,y).set(s,O)}moveElementInDOM(c,l,s,x){if(this.addPointerInTextLayer(s,x),!c.hasChildNodes()){c.append(l);return}const R=Array.from(c.childNodes).filter(ne=>ne!==l);if(R.length===0)return;const O=s||l,B=(0,o.binarySearchFirstItem)(R,ne=>{var he;return ce(he=b,a,ct).call(he,O,ne)<0});B===0?R[0].before(l):R[B-1].after(l)}};M=new WeakMap,C=new WeakMap,y=new WeakMap,d=new WeakMap,a=new WeakSet,ct=function(c,l){const s=c.getBoundingClientRect(),x=l.getBoundingClientRect();if(s.width===0&&s.height===0)return 1;if(x.width===0&&x.height===0)return-1;const R=s.y,O=s.y+s.height,B=s.y+s.height/2,ne=x.y,he=x.y+x.height,ae=x.y+x.height/2;if(B<=ne&&ae>=O)return-1;if(ae<=R&&B>=he)return 1;const U=s.x+s.width/2,G=x.x+x.width/2;return U-G},E=new WeakSet,Nt=function(c,l){const s=l.getAttribute("aria-owns");s!=null&&s.includes(c)||l.setAttribute("aria-owns",s?`${s} ${c}`:c),l.removeAttribute("role")},pe(b,a);let m=b;g.TextAccessibilityManager=m},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFRenderingQueue=void 0;var o=T(3),m=T(7);const M=3e4;class C{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(d){this.pdfViewer=d}setThumbnailViewer(d){this.pdfThumbnailViewer=d}isHighestPriority(d){return this.highestPriorityPage===d.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(d){var a;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(d)&&(this.isThumbnailViewEnabled&&((a=this.pdfThumbnailViewer)!=null&&a.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),M)))}getHighestPriority(d,a,_,E=!1){const P=d.views,b=P.length;if(b===0)return null;for(let x=0;x<b;x++){const R=P[x].view;if(!this.isViewFinished(R))return R}const p=d.first.id,c=d.last.id;if(c-p+1>b){const x=d.ids;for(let R=1,O=c-p;R<O;R++){const B=_?p+R:c-R;if(x.has(B))continue;const ne=a[B-1];if(!this.isViewFinished(ne))return ne}}let l=_?c:p-2,s=a[l];return s&&!this.isViewFinished(s)||E&&(l+=_?1:-1,s=a[l],s&&!this.isViewFinished(s))?s:null}isViewFinished(d){return d.renderingState===m.RenderingStates.FINISHED}renderView(d){switch(d.renderingState){case m.RenderingStates.FINISHED:return!1;case m.RenderingStates.PAUSED:this.highestPriorityPage=d.renderingId,d.resume();break;case m.RenderingStates.RUNNING:this.highestPriorityPage=d.renderingId;break;case m.RenderingStates.INITIAL:this.highestPriorityPage=d.renderingId,d.draw().finally(()=>{this.renderHighestPriority()}).catch(a=>{a instanceof o.RenderingCancelledException||console.error(`renderView: "${a}"`)});break}return!0}}g.PDFRenderingQueue=C},(f,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextHighlighter=void 0;class T{constructor({findController:m,eventBus:M,pageIndex:C}){this.findController=m,this.matches=[],this.eventBus=M,this.pageIdx=C,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(m,M){this.textDivs=m,this.textContentItemsStr=M}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=m=>{(m.pageIndex===this.pageIdx||m.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(m,M){if(!m)return[];const{textContentItemsStr:C}=this;let y=0,d=0;const a=C.length-1,_=[];for(let E=0,P=m.length;E<P;E++){let b=m[E];for(;y!==a&&b>=d+C[y].length;)d+=C[y].length,y++;y===C.length&&console.error("Could not find a matching mapping");const p={begin:{divIdx:y,offset:b-d}};for(b+=M[E];y!==a&&b>d+C[y].length;)d+=C[y].length,y++;p.end={divIdx:y,offset:b-d},_.push(p)}return _}_renderMatches(m){if(m.length===0)return;const{findController:M,pageIdx:C}=this,{textContentItemsStr:y,textDivs:d}=this,a=C===M.selected.pageIdx,_=M.selected.matchIdx,E=M.state.highlightAll;let P=null;const b={divIdx:-1,offset:void 0};function p(x,R){const O=x.divIdx;return d[O].textContent="",c(O,0,x.offset,R)}function c(x,R,O,B){let ne=d[x];if(ne.nodeType===Node.TEXT_NODE){const U=document.createElement("span");ne.before(U),U.append(ne),d[x]=U,ne=U}const he=y[x].substring(R,O),ae=document.createTextNode(he);if(B){const U=document.createElement("span");return U.className=`${B} appended`,U.append(ae),ne.append(U),B.includes("selected")?U.offsetLeft:0}return ne.append(ae),0}let l=_,s=l+1;if(E)l=0,s=m.length;else if(!a)return;for(let x=l;x<s;x++){const R=m[x],O=R.begin,B=R.end,ne=a&&x===_,he=ne?" selected":"";let ae=0;if(!P||O.divIdx!==P.divIdx?(P!==null&&c(P.divIdx,P.offset,b.offset),p(O)):c(P.divIdx,P.offset,O.offset),O.divIdx===B.divIdx)ae=c(O.divIdx,O.offset,B.offset,"highlight"+he);else{ae=c(O.divIdx,O.offset,b.offset,"highlight begin"+he);for(let U=O.divIdx+1,G=B.divIdx;U<G;U++)d[U].className="highlight middle"+he;p(B,"highlight end"+he)}P=B,ne&&M.scrollMatchIntoView({element:d[O.divIdx],selectedLeft:ae,pageIndex:C,matchIndex:_})}P&&c(P.divIdx,P.offset,b.offset)}_updateMatches(){if(!this.enabled)return;const{findController:m,matches:M,pageIdx:C}=this,{textContentItemsStr:y,textDivs:d}=this;let a=-1;for(let P=0,b=M.length;P<b;P++){const p=M[P],c=Math.max(a,p.begin.divIdx);for(let l=c,s=p.end.divIdx;l<=s;l++){const x=d[l];x.textContent=y[l],x.className=""}a=p.end.divIdx+1}if(!(m!=null&&m.highlightMatches))return;const _=m.pageMatches[C]||null,E=m.pageMatchesLength[C]||null;this.matches=this._convertMatches(_,E),this._renderMatches(this.matches)}}g.TextHighlighter=T},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DownloadManager=void 0;var o=T(3);function m(C,y){const d=document.createElement("a");if(!d.click)throw new Error('DownloadManager: "a.click()" is not supported.');d.href=C,d.target="_parent","download"in d&&(d.download=y),(document.body||document.documentElement).append(d),d.click(),d.remove()}class M{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(y,d){if(!(0,o.createValidAbsoluteUrl)(y,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${y}`);return}m(y+"#pdfjs.action=download",d)}downloadData(y,d,a){const _=URL.createObjectURL(new Blob([y],{type:a}));m(_,d)}openOrDownloadData(y,d,a){const _=(0,o.isPdfFile)(a),E=_?"application/pdf":"";if(_){let P=this._openBlobUrls.get(y);P||(P=URL.createObjectURL(new Blob([d],{type:E})),this._openBlobUrls.set(y,P));let b;b="?file="+encodeURIComponent(P+"#"+a);try{return window.open(b),!0}catch(p){console.error(`openOrDownloadData: ${p}`),URL.revokeObjectURL(P),this._openBlobUrls.delete(y)}}return this.downloadData(d,a,E),!1}download(y,d,a){const _=URL.createObjectURL(y);m(_,a)}}g.DownloadManager=M},(f,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WaitOnType=g.EventBus=g.AutomationEventBus=void 0,g.waitOnEventOrTimeout=o;const T={EVENT:"event",TIMEOUT:"timeout"};g.WaitOnType=T;function o({target:C,name:y,delay:d=0}){return new Promise(function(a,_){if(typeof C!="object"||!(y&&typeof y=="string")||!(Number.isInteger(d)&&d>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function E(c){C instanceof m?C._off(y,P):C.removeEventListener(y,P),p&&clearTimeout(p),a(c)}const P=E.bind(null,T.EVENT);C instanceof m?C._on(y,P):C.addEventListener(y,P);const b=E.bind(null,T.TIMEOUT),p=setTimeout(b,d)})}class m{constructor(){this._listeners=Object.create(null)}on(y,d,a=null){this._on(y,d,{external:!0,once:a==null?void 0:a.once})}off(y,d,a=null){this._off(y,d,{external:!0,once:a==null?void 0:a.once})}dispatch(y,d){const a=this._listeners[y];if(!a||a.length===0)return;let _;for(const{listener:E,external:P,once:b}of a.slice(0)){if(b&&this._off(y,E),P){(_||(_=[])).push(E);continue}E(d)}if(_){for(const E of _)E(d);_=null}}_on(y,d,a=null){var E;((E=this._listeners)[y]||(E[y]=[])).push({listener:d,external:(a==null?void 0:a.external)===!0,once:(a==null?void 0:a.once)===!0})}_off(y,d,a=null){const _=this._listeners[y];if(_){for(let E=0,P=_.length;E<P;E++)if(_[E].listener===d){_.splice(E,1);return}}}}g.EventBus=m;class M extends m{dispatch(y,d){throw new Error("Not implemented: AutomationEventBus.dispatch")}}g.AutomationEventBus=M},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericL10n=void 0,T(21);var o=T(4);const m=document.webL10n;class M{constructor(y){this._lang=y,this._ready=new Promise((d,a)=>{m.setLanguage((0,o.fixupLangCode)(y),()=>{d(m)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(y,d=null,a=(0,o.getL10nFallback)(y,d)){return(await this._ready).get(y,d,a)}async translate(y){return(await this._ready).translate(y)}}g.GenericL10n=M},()=>{document.webL10n=function(f,g,T){var o={},m="",M="textContent",C="",y={},d="loading",a=!0;function _(){return g.querySelectorAll('link[type="application/l10n"]')}function E(){var U=g.querySelector('script[type="application/l10n"]');return U?JSON.parse(U.innerHTML):null}function P(U){return U?U.querySelectorAll("*[data-l10n-id]"):[]}function b(U){if(!U)return{};var G=U.getAttribute("data-l10n-id"),q=U.getAttribute("data-l10n-args"),W={};if(q)try{W=JSON.parse(q)}catch{console.warn("could not parse arguments for #"+G)}return{id:G,args:W}}function p(U,G,q){G=G||function(ue){},q=q||function(){};var W=new XMLHttpRequest;W.open("GET",U,a),W.overrideMimeType&&W.overrideMimeType("text/plain; charset=utf-8"),W.onreadystatechange=function(){W.readyState==4&&(W.status==200||W.status===0?G(W.responseText):q())},W.onerror=q,W.ontimeout=q;try{W.send(null)}catch{q()}}function c(U,G,q,W){var oe=U.replace(/[^\/]*$/,"")||"./";function ue(Y){return Y.lastIndexOf("\\")<0?Y:Y.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function ie(Y,I){var L={},X=/^\s*|\s*$/,J=/^\s*#|^\s*$/,ee=/^\s*\[(.*)\]\s*$/,te=/^\s*@import\s+url\((.*)\)\s*$/i,w=/^([^=\s]*)\s*=\s*(.+)$/;function F(H,$,Q){var S=H.replace(X,"").split(/[\r\n]+/),A="*",D=G.split("-",1)[0],j=!1,k="";function V(){for(;;){if(!S.length){Q();return}var Z=S.shift();if(!J.test(Z)){if($){if(k=ee.exec(Z),k){A=k[1].toLowerCase(),j=A!=="*"&&A!==G&&A!==D;continue}else if(j)continue;if(k=te.exec(Z),k){z(oe+k[1],V);return}}var K=Z.match(w);K&&K.length==3&&(L[K[1]]=ue(K[2]))}}}V()}function z(H,$){p(H,function(Q){F(Q,!1,$)},function(){console.warn(H+" not found."),$()})}F(Y,!0,function(){I(L)})}p(U,function(Y){m+=Y,ie(Y,function(I){for(var L in I){var X,J,ee=L.lastIndexOf(".");ee>0?(X=L.substring(0,ee),J=L.substring(ee+1)):(X=L,J=M),o[X]||(o[X]={}),o[X][J]=I[L]}q&&q()})},W)}function l(U,G){U&&(U=U.toLowerCase()),G=G||function(){},s(),C=U;var q=_(),W=q.length;if(W===0){var oe=E();if(oe&&oe.locales&&oe.default_locale){if(console.log("using the embedded JSON directory, early way out"),o=oe.locales[U],!o){var ue=oe.default_locale.toLowerCase();for(var ie in oe.locales)if(ie=ie.toLowerCase(),ie===U){o=oe.locales[U];break}else ie===ue&&(o=oe.locales[ue])}G()}else console.log("no resource to load, early way out");d="complete";return}var Y=null,I=0;Y=function(){I++,I>=W&&(G(),d="complete")};function L(ee){var te=ee.href;this.load=function(w,F){c(te,w,F,function(){console.warn(te+" not found."),console.warn('"'+w+'" resource not found'),C="",F()})}}for(var X=0;X<W;X++){var J=new L(q[X]);J.load(U,Y)}}function s(){o={},m="",C=""}function x(U){var G={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function q(ie,Y){return Y.indexOf(ie)!==-1}function W(ie,Y,I){return Y<=ie&&ie<=I}var oe={0:function(ie){return"other"},1:function(ie){return W(ie%100,3,10)?"few":ie===0?"zero":W(ie%100,11,99)?"many":ie==2?"two":ie==1?"one":"other"},2:function(ie){return ie!==0&&ie%10===0?"many":ie==2?"two":ie==1?"one":"other"},3:function(ie){return ie==1?"one":"other"},4:function(ie){return W(ie,0,1)?"one":"other"},5:function(ie){return W(ie,0,2)&&ie!=2?"one":"other"},6:function(ie){return ie===0?"zero":ie%10==1&&ie%100!=11?"one":"other"},7:function(ie){return ie==2?"two":ie==1?"one":"other"},8:function(ie){return W(ie,3,6)?"few":W(ie,7,10)?"many":ie==2?"two":ie==1?"one":"other"},9:function(ie){return ie===0||ie!=1&&W(ie%100,1,19)?"few":ie==1?"one":"other"},10:function(ie){return W(ie%10,2,9)&&!W(ie%100,11,19)?"few":ie%10==1&&!W(ie%100,11,19)?"one":"other"},11:function(ie){return W(ie%10,2,4)&&!W(ie%100,12,14)?"few":ie%10===0||W(ie%10,5,9)||W(ie%100,11,14)?"many":ie%10==1&&ie%100!=11?"one":"other"},12:function(ie){return W(ie,2,4)?"few":ie==1?"one":"other"},13:function(ie){return W(ie%10,2,4)&&!W(ie%100,12,14)?"few":ie!=1&&W(ie%10,0,1)||W(ie%10,5,9)||W(ie%100,12,14)?"many":ie==1?"one":"other"},14:function(ie){return W(ie%100,3,4)?"few":ie%100==2?"two":ie%100==1?"one":"other"},15:function(ie){return ie===0||W(ie%100,2,10)?"few":W(ie%100,11,19)?"many":ie==1?"one":"other"},16:function(ie){return ie%10==1&&ie!=11?"one":"other"},17:function(ie){return ie==3?"few":ie===0?"zero":ie==6?"many":ie==2?"two":ie==1?"one":"other"},18:function(ie){return ie===0?"zero":W(ie,0,2)&&ie!==0&&ie!=2?"one":"other"},19:function(ie){return W(ie,2,10)?"few":W(ie,0,1)?"one":"other"},20:function(ie){return(W(ie%10,3,4)||ie%10==9)&&!(W(ie%100,10,19)||W(ie%100,70,79)||W(ie%100,90,99))?"few":ie%1e6===0&&ie!==0?"many":ie%10==2&&!q(ie%100,[12,72,92])?"two":ie%10==1&&!q(ie%100,[11,71,91])?"one":"other"},21:function(ie){return ie===0?"zero":ie==1?"one":"other"},22:function(ie){return W(ie,0,1)||W(ie,11,99)?"one":"other"},23:function(ie){return W(ie%10,1,2)||ie%20===0?"one":"other"},24:function(ie){return W(ie,3,10)||W(ie,13,19)?"few":q(ie,[2,12])?"two":q(ie,[1,11])?"one":"other"}},ue=G[U.replace(/-.*$/,"")];return ue in oe?oe[ue]:(console.warn("plural form unknown for ["+U+"]"),function(){return"other"})}y.plural=function(U,G,q,W){var oe=parseFloat(G);if(isNaN(oe)||W!=M)return U;y._pluralRules||(y._pluralRules=x(C));var ue="["+y._pluralRules(oe)+"]";return oe===0&&q+"[zero]"in o?U=o[q+"[zero]"][W]:oe==1&&q+"[one]"in o?U=o[q+"[one]"][W]:oe==2&&q+"[two]"in o?U=o[q+"[two]"][W]:q+ue in o?U=o[q+ue][W]:q+"[other]"in o&&(U=o[q+"[other]"][W]),U};function R(U,G,q){var W=o[U];if(!W){if(console.warn("#"+U+" is undefined."),!q)return null;W=q}var oe={};for(var ue in W){var ie=W[ue];ie=O(ie,G,U,ue),ie=B(ie,G,U),oe[ue]=ie}return oe}function O(U,G,q,W){var oe=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,ue=oe.exec(U);if(!ue||!ue.length)return U;var ie=ue[1],Y=ue[2],I;if(G&&Y in G?I=G[Y]:Y in o&&(I=o[Y]),ie in y){var L=y[ie];U=L(U,I,q,W)}return U}function B(U,G,q){var W=/\{\{\s*(.+?)\s*\}\}/g;return U.replace(W,function(oe,ue){return G&&ue in G?G[ue]:ue in o?o[ue]:(console.log("argument {{"+ue+"}} for #"+q+" is undefined."),oe)})}function ne(U){var G=b(U);if(G.id){var q=R(G.id,G.args);if(!q){console.warn("#"+G.id+" is undefined.");return}if(q[M]){if(he(U)===0)U[M]=q[M];else{for(var W=U.childNodes,oe=!1,ue=0,ie=W.length;ue<ie;ue++)W[ue].nodeType===3&&/\S/.test(W[ue].nodeValue)&&(oe?W[ue].nodeValue="":(W[ue].nodeValue=q[M],oe=!0));if(!oe){var Y=g.createTextNode(q[M]);U.prepend(Y)}}delete q[M]}for(var I in q)U[I]=q[I]}}function he(U){if(U.children)return U.children.length;if(typeof U.childElementCount<"u")return U.childElementCount;for(var G=0,q=0;q<U.childNodes.length;q++)G+=U.nodeType===1?1:0;return G}function ae(U){U=U||g.documentElement;for(var G=P(U),q=G.length,W=0;W<q;W++)ne(G[W]);ne(U)}return{get:function(U,G,q){var W=U.lastIndexOf("."),oe=M;W>0&&(oe=U.substring(W+1),U=U.substring(0,W));var ue;q&&(ue={},ue[oe]=q);var ie=R(U,G,ue);return ie&&oe in ie?ie[oe]:"{{"+U+"}}"},getData:function(){return o},getText:function(){return m},getLanguage:function(){return C},setLanguage:function(U,G){l(U,function(){G&&G()})},getDirection:function(){var U=["ar","he","fa","ps","ur"],G=C.split("-",1)[0];return U.indexOf(G)>=0?"rtl":"ltr"},translate:ae,getReadyState:function(){return d},ready:function(U){if(U)d=="complete"||d=="interactive"?f.setTimeout(function(){U()}):g.addEventListener&&g.addEventListener("localized",function G(){g.removeEventListener("localized",G),U()});else return}}}(window,document)},(f,g,T)=>{var U,bi,Bt,Ut,vi,yi,Ei,Ht,Ai,Si,ht,Qe,Ge,wi,Vt,zt,ut,Ti,$t,xi,Je;Object.defineProperty(g,"__esModule",{value:!0}),g.PDFFindController=g.FindState=void 0;var o=T(7),m=T(3),M=T(23);const C={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};g.FindState=C;const y=250,d=-50,a=-400,_={"":"-","":"'","":"'","":"'","":"'","":'"',"":'"',"":'"',"":'"',"":"1/4","":"1/2","":"3/4"},E=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),P=[...E.values()].map(A=>String.fromCharCode(A)).join(""),b=new RegExp("\\p{M}+","gu"),p=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),c=new RegExp("([^\\p{M}])\\p{M}*$","u"),l=new RegExp("^\\p{M}*([^\\p{M}])","u"),s=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,x=new Map,R="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]";let O=null,B=null;function ne(A){const D=[];let j;for(;(j=s.exec(A))!==null;){let{index:Ee}=j;for(const Ae of j[0]){let we=x.get(Ae);we||(we=Ae.normalize("NFD").length,x.set(Ae,we)),D.push([we,Ee++])}}let k;if(D.length===0&&O)k=O;else if(D.length>0&&B)k=B;else{const Ae=`([${Object.keys(_).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;D.length===0?k=O=new RegExp(Ae+"|(\\u0000)","gum"):k=B=new RegExp(Ae+`|(${R})`,"gum")}const V=[];for(;(j=b.exec(A))!==null;)V.push([j[0].length,j.index]);let Z=A.normalize("NFD");const K=[[0,0]];let de=0,se=0,_e=0,be=0,me=0,ye=!1;return Z=Z.replace(k,(Ee,Ae,we,Ce,xe,Se,Pe)=>{var Fe,Me;if(Pe-=be,Ae){const fe=_[Ee],re=fe.length;for(let le=1;le<re;le++)K.push([Pe-_e+le,_e-le]);return _e-=re-1,fe}if(we){const fe=we.endsWith(`
`),re=fe?we.length-2:we.length;ye=!0;let le=re;Pe+me===((Fe=V[de])==null?void 0:Fe[1])&&(le-=V[de][0],++de);for(let ve=1;ve<=le;ve++)K.push([Pe-1-_e+ve,_e-ve]);return _e-=le,be+=le,fe?(Pe+=re-1,K.push([Pe-_e+1,1+_e]),_e+=1,be+=1,me+=1,we.slice(0,re)):we}if(Ce)return K.push([Pe-_e+1,1+_e]),_e+=1,be+=1,me+=1,Ce.charAt(0);if(xe)return K.push([Pe-_e+1,_e-1]),_e-=1,be+=1,me+=1," ";if(Pe+me===((Me=D[se])==null?void 0:Me[1])){const fe=D[se][0]-1;++se;for(let re=1;re<=fe;re++)K.push([Pe-(_e-re),_e-re]);_e-=fe,be+=fe}return Se}),K.push([Z.length,_e]),[Z,K,ye]}function he(A,D,j){if(!A)return[D,j];const k=D,V=D+j;let Z=(0,o.binarySearchFirstItem)(A,de=>de[0]>=k);A[Z][0]>k&&--Z;let K=(0,o.binarySearchFirstItem)(A,de=>de[0]>=V,Z);return A[K][0]>V&&--K,[k+A[Z][1],j+A[K][1]-A[Z][1]]}class ae{constructor({linkService:D,eventBus:j}){pe(this,U);this._linkService=D,this._eventBus=j,ce(this,U,Bt).call(this),j._on("find",ce(this,U,bi).bind(this)),j._on("findbarclose",ce(this,U,Ti).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(D){this._pdfDocument&&ce(this,U,Bt).call(this),D&&(this._pdfDocument=D,this._firstPageCapability.resolve())}scrollMatchIntoView({element:D=null,selectedLeft:j=0,pageIndex:k=-1,matchIndex:V=-1}){if(!this._scrollMatches||!D)return;if(V===-1||V!==this._selected.matchIdx)return;if(k===-1||k!==this._selected.pageIdx)return;this._scrollMatches=!1;const Z={top:d,left:j+a};(0,o.scrollIntoView)(D,Z,!0)}}U=new WeakSet,bi=function(D){if(!D)return;const j=this._pdfDocument,{type:k}=D;(this._state===null||ce(this,U,vi).call(this,D))&&(this._dirtyMatch=!0),this._state=D,k!=="highlightallchange"&&ce(this,U,Je).call(this,C.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||j&&this._pdfDocument!==j)return;ce(this,U,Si).call(this);const V=!this._highlightMatches,Z=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),k?this._dirtyMatch?ce(this,U,Ge).call(this):k==="again"?(ce(this,U,Ge).call(this),V&&this._state.highlightAll&&ce(this,U,Qe).call(this)):k==="highlightallchange"?(Z?ce(this,U,Ge).call(this):this._highlightMatches=!0,ce(this,U,Qe).call(this)):ce(this,U,Ge).call(this):this._findTimeout=setTimeout(()=>{ce(this,U,Ge).call(this),this._findTimeout=null},y)})},Bt=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,m.createPromiseCapability)()},Ut=function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=ne(this._state.query)),this._normalizedQuery},vi=function(D){if(D.query!==this._state.query)return!0;switch(D.type){case"again":const j=this._selected.pageIdx+1,k=this._linkService;return j>=1&&j<=k.pagesCount&&j!==k.page&&!k.isPageVisible(j);case"highlightallchange":return!1}return!0},yi=function(D,j,k){let V=D.slice(0,j).match(c);if(V){const Z=D.charCodeAt(j),K=V[1].charCodeAt(0);if((0,M.getCharacterType)(Z)===(0,M.getCharacterType)(K))return!1}if(V=D.slice(j+k).match(l),V){const Z=D.charCodeAt(j+k-1),K=V[1].charCodeAt(0);if((0,M.getCharacterType)(Z)===(0,M.getCharacterType)(K))return!1}return!0},Ei=function(D,j,k,V){const Z=[],K=[],de=this._pageDiffs[k];let se;for(;(se=D.exec(V))!==null;){if(j&&!ce(this,U,yi).call(this,V,se.index,se[0].length))continue;const[_e,be]=he(de,se.index,se[0].length);be&&(Z.push(_e),K.push(be))}this._pageMatches[k]=Z,this._pageMatchesLength[k]=K},Ht=function(D,j){const{matchDiacritics:k}=this._state;let V=!1;D=D.replace(p,(K,de,se,_e,be,me)=>de?`[ ]*\\${de}[ ]*`:se?`[ ]*${se}[ ]*`:_e?"[ ]+":k?be||me:be?E.has(be.charCodeAt(0))?be:"":j?(V=!0,`${me}\\p{M}*`):me);const Z="[ ]*";return D.endsWith(Z)&&(D=D.slice(0,D.length-Z.length)),k&&j&&(V=!0,D=`${D}(?=[${P}]|[^\\p{M}]|$)`),[V,D]},Ai=function(D){let j=N(this,U,Ut);if(j.length===0)return;const{caseSensitive:k,entireWord:V,phraseSearch:Z}=this._state,K=this._pageContents[D],de=this._hasDiacritics[D];let se=!1;if(Z)[se,j]=ce(this,U,Ht).call(this,j,de);else{const me=j.match(/\S+/g);me&&(j=me.sort().reverse().map(ye=>{const[Ee,Ae]=ce(this,U,Ht).call(this,ye,de);return se||(se=Ee),`(${Ae})`}).join("|"))}const _e=`g${se?"u":""}${k?"":"i"}`;j=new RegExp(j,_e),ce(this,U,Ei).call(this,j,V,D,K),this._state.highlightAll&&ce(this,U,ht).call(this,D),this._resumePageIdx===D&&(this._resumePageIdx=null,ce(this,U,Vt).call(this));const be=this._pageMatches[D].length;be>0&&(this._matchesCountTotal+=be,ce(this,U,xi).call(this))},Si=function(){if(this._extractTextPromises.length>0)return;let D=Promise.resolve();for(let j=0,k=this._linkService.pagesCount;j<k;j++){const V=(0,m.createPromiseCapability)();this._extractTextPromises[j]=V.promise,D=D.then(()=>this._pdfDocument.getPage(j+1).then(Z=>Z.getTextContent()).then(Z=>{const K=[];for(const de of Z.items)K.push(de.str),de.hasEOL&&K.push(`
`);[this._pageContents[j],this._pageDiffs[j],this._hasDiacritics[j]]=ne(K.join("")),V.resolve()},Z=>{console.error(`Unable to get text content for page ${j+1}`,Z),this._pageContents[j]="",this._pageDiffs[j]=null,this._hasDiacritics[j]=!1,V.resolve()}))}},ht=function(D){this._scrollMatches&&this._selected.pageIdx===D&&(this._linkService.page=D+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:D})},Qe=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Ge=function(){const D=this._state.findPrevious,j=this._linkService.page-1,k=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=j,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,ce(this,U,Qe).call(this);for(let Z=0;Z<k;Z++)this._pendingFindMatches.has(Z)||(this._pendingFindMatches.add(Z),this._extractTextPromises[Z].then(()=>{this._pendingFindMatches.delete(Z),ce(this,U,Ai).call(this,Z)}))}if(N(this,U,Ut)===""){ce(this,U,Je).call(this,C.FOUND);return}if(this._resumePageIdx)return;const V=this._offset;if(this._pagesToSearch=k,V.matchIdx!==null){const Z=this._pageMatches[V.pageIdx].length;if(!D&&V.matchIdx+1<Z||D&&V.matchIdx>0){V.matchIdx=D?V.matchIdx-1:V.matchIdx+1,ce(this,U,ut).call(this,!0);return}ce(this,U,zt).call(this,D)}ce(this,U,Vt).call(this)},wi=function(D){const j=this._offset,k=D.length,V=this._state.findPrevious;return k?(j.matchIdx=V?k-1:0,ce(this,U,ut).call(this,!0),!0):(ce(this,U,zt).call(this,V),j.wrapped&&(j.matchIdx=null,this._pagesToSearch<0)?(ce(this,U,ut).call(this,!1),!0):!1)},Vt=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let D=null;do{const j=this._offset.pageIdx;if(D=this._pageMatches[j],!D){this._resumePageIdx=j;break}}while(!ce(this,U,wi).call(this,D))},zt=function(D){const j=this._offset,k=this._linkService.pagesCount;j.pageIdx=D?j.pageIdx-1:j.pageIdx+1,j.matchIdx=null,this._pagesToSearch--,(j.pageIdx>=k||j.pageIdx<0)&&(j.pageIdx=D?k-1:0,j.wrapped=!0)},ut=function(D=!1){let j=C.NOT_FOUND;const k=this._offset.wrapped;if(this._offset.wrapped=!1,D){const V=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,j=k?C.WRAPPED:C.FOUND,V!==-1&&V!==this._selected.pageIdx&&ce(this,U,ht).call(this,V)}ce(this,U,Je).call(this,j,this._state.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,ce(this,U,ht).call(this,this._selected.pageIdx))},Ti=function(D){const j=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||j&&this._pdfDocument!==j||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),ce(this,U,Je).call(this,C.FOUND),this._highlightMatches=!1,ce(this,U,Qe).call(this))})},$t=function(){var Z;const{pageIdx:D,matchIdx:j}=this._selected;let k=0,V=this._matchesCountTotal;if(j!==-1){for(let K=0;K<D;K++)k+=((Z=this._pageMatches[K])==null?void 0:Z.length)||0;k+=j+1}return(k<1||k>V)&&(k=V=0),{current:k,total:V}},xi=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:ce(this,U,$t).call(this)})},Je=function(D,j=!1){var k;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:D,previous:j,matchesCount:ce(this,U,$t).call(this),rawQuery:((k=this._state)==null?void 0:k.query)??null})},g.PDFFindController=ae},(f,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CharacterType=void 0,g.getCharacterType=b;const T={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};g.CharacterType=T;function o(p){return p<11904}function m(p){return(p&65408)===0}function M(p){return p>=97&&p<=122||p>=65&&p<=90}function C(p){return p>=48&&p<=57}function y(p){return p===32||p===9||p===13||p===10}function d(p){return p>=13312&&p<=40959||p>=63744&&p<=64255}function a(p){return p>=12448&&p<=12543}function _(p){return p>=12352&&p<=12447}function E(p){return p>=65376&&p<=65439}function P(p){return(p&65408)===3584}function b(p){return o(p)?m(p)?y(p)?T.SPACE:M(p)||C(p)||p===95?T.ALPHA_LETTER:T.PUNCT:P(p)?T.THAI_LETTER:p===160?T.SPACE:T.ALPHA_LETTER:d(p)?T.HAN_LETTER:a(p)?T.KATAKANA_LETTER:_(p)?T.HIRAGANA_LETTER:E(p)?T.HALFWIDTH_KATAKANA_LETTER:T.ALPHA_LETTER}},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFHistory=void 0,g.isDestArraysEqual=E,g.isDestHashesEqual=_;var o=T(7),m=T(19);const M=1e3,C=50,y=1e3;function d(){return document.location.hash}class a{constructor({linkService:b,eventBus:p}){this.linkService=b,this.eventBus=p,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",c=>{this._isPagesLoaded=!!c.pagesCount},{once:!0})})}initialize({fingerprint:b,resetHistory:p=!1,updateUrl:c=!1}){if(!b||typeof b!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const l=this._fingerprint!==""&&this._fingerprint!==b;this._fingerprint=b,this._updateUrl=c===!0,this._initialized=!0,this._bindEvents();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=d(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(s,!0)||p){const{hash:R,page:O,rotation:B}=this._parseCurrentHash(!0);if(!R||l||p){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:R,page:O,rotation:B},!0);return}const x=s.destination;this._updateInternalState(x,s.uid,!0),x.rotation!==void 0&&(this._initialRotation=x.rotation),x.dest?(this._initialBookmark=JSON.stringify(x.dest),this._destination.page=null):x.hash?this._initialBookmark=x.hash:x.page&&(this._initialBookmark=`page=${x.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:b=null,explicitDest:p,pageNumber:c}){if(!this._initialized)return;if(b&&typeof b!="string"){console.error(`PDFHistory.push: "${b}" is not a valid namedDest parameter.`);return}else if(Array.isArray(p)){if(!this._isValidPage(c)&&(c!==null||this._destination)){console.error(`PDFHistory.push: "${c}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${p}" is not a valid explicitDest parameter.`);return}const l=b||JSON.stringify(p);if(!l)return;let s=!1;if(this._destination&&(_(this._destination.hash,l)||E(this._destination.dest,p))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this._pushOrReplaceState({dest:p,hash:l,page:c,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(b){var p;if(this._initialized){if(!this._isValidPage(b)){console.error(`PDFHistory.pushPage: "${b}" is not a valid page number.`);return}((p=this._destination)==null?void 0:p.page)!==b&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${b}`,page:b,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(b,p=!1){const c=p||!this._destination,l={fingerprint:this._fingerprint,uid:c?this._uid:this._uid+1,destination:b};this._updateInternalState(b,l.uid);let s;if(this._updateUrl&&(b!=null&&b.hash)){const x=document.location.href.split("#")[0];x.startsWith("file://")||(s=`${x}#${b.hash}`)}c?window.history.replaceState(l,"",s):window.history.pushState(l,"",s)}_tryPushCurrentPosition(b=!1){if(!this._position)return;let p=this._position;if(b&&(p=Object.assign(Object.create(null),this._position),p.temporary=!0),!this._destination){this._pushOrReplaceState(p);return}if(this._destination.temporary){this._pushOrReplaceState(p,!0);return}if(this._destination.hash===p.hash||!this._destination.page&&this._numPositionUpdates<=C)return;let c=!1;if(this._destination.page>=p.first&&this._destination.page<=p.page){if(this._destination.dest!==void 0||!this._destination.first)return;c=!0}this._pushOrReplaceState(p,c)}_isValidPage(b){return Number.isInteger(b)&&b>0&&b<=this.linkService.pagesCount}_isValidState(b,p=!1){if(!b)return!1;if(b.fingerprint!==this._fingerprint)if(p){if(typeof b.fingerprint!="string"||b.fingerprint.length!==this._fingerprint.length)return!1;const[c]=performance.getEntriesByType("navigation");if((c==null?void 0:c.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(b.uid)||b.uid<0||b.destination===null||typeof b.destination!="object")}_updateInternalState(b,p,c=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),c&&(b!=null&&b.temporary)&&delete b.temporary,this._destination=b,this._uid=p,this._maxUid=Math.max(this._maxUid,p),this._numPositionUpdates=0}_parseCurrentHash(b=!1){const p=unescape(d()).substring(1),c=(0,o.parseQueryString)(p),l=c.get("nameddest")||"";let s=c.get("page")|0;return(!this._isValidPage(s)||b&&l.length>0)&&(s=null),{hash:p,page:s,rotation:this.linkService.rotation}}_updateViewarea({location:b}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:b.pdfOpenParams.substring(1),page:this.linkService.page,first:b.pageNumber,rotation:b.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},y))}_popState({state:b}){const p=d(),c=this._currentHash!==p;if(this._currentHash=p,!b){this._uid++;const{hash:s,page:x,rotation:R}=this._parseCurrentHash();this._pushOrReplaceState({hash:s,page:x,rotation:R},!0);return}if(!this._isValidState(b))return;this._popStateInProgress=!0,c&&(this._blockHashChange++,(0,m.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:M}).then(()=>{this._blockHashChange--}));const l=b.destination;this._updateInternalState(l,b.uid,!0),(0,o.isValidRotation)(l.rotation)&&(this.linkService.rotation=l.rotation),l.dest?this.linkService.goToDestination(l.dest):l.hash?this.linkService.setHash(l.hash):l.page&&(this.linkService.page=l.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}g.PDFHistory=a;function _(P,b){return typeof P!="string"||typeof b!="string"?!1:P===b||(0,o.parseQueryString)(P).get("nameddest")===b}function E(P,b){function p(c,l){if(typeof c!=typeof l||Array.isArray(c)||Array.isArray(l))return!1;if(c!==null&&typeof c=="object"&&l!==null){if(Object.keys(c).length!==Object.keys(l).length)return!1;for(const s in c)if(!p(c[s],l[s]))return!1;return!0}return c===l||Number.isNaN(c)&&Number.isNaN(l)}if(!(Array.isArray(P)&&Array.isArray(b))||P.length!==b.length)return!1;for(let c=0,l=P.length;c<l;c++)if(!p(P[c],b[c]))return!1;return!0}},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFScriptingManager=void 0;var o=T(7),m=T(3);class M{constructor({eventBus:y,sandboxBundleSrc:d=null,scriptingFactory:a=null,docPropertiesLookup:_=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=y,this._sandboxBundleSrc=d,this._scriptingFactory=a,this._docPropertiesLookup=_,this._scriptingFactory||window.addEventListener("updatefromsandbox",E=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:E.detail})})}setViewer(y){this._pdfViewer=y}async setDocument(y){var E;if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=y,!y)return;const[d,a,_]=await Promise.all([y.getFieldObjects(),y.getCalculationOrderIds(),y.getJSActions()]);if(!d&&!_){await this._destroyScripting();return}if(y===this._pdfDocument){try{this._scripting=this._createScripting()}catch(P){console.error(`PDFScriptingManager.setDocument: "${P==null?void 0:P.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",P=>{(P==null?void 0:P.source)===window&&this._updateFromSandbox(P.detail)}),this._internalEvents.set("dispatcheventinsandbox",P=>{var b;(b=this._scripting)==null||b.dispatchEventInSandbox(P.detail)}),this._internalEvents.set("pagechanging",({pageNumber:P,previous:b})=>{P!==b&&(this._dispatchPageClose(b),this._dispatchPageOpen(P))}),this._internalEvents.set("pagerendered",({pageNumber:P})=>{this._pageOpenPending.has(P)&&P===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(P)}),this._internalEvents.set("pagesdestroy",async P=>{var b,p;await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await((b=this._scripting)==null?void 0:b.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(p=this._closeCapability)==null||p.resolve()}),this._domEvents.set("mousedown",P=>{this._mouseState.isDown=!0}),this._domEvents.set("mouseup",P=>{this._mouseState.isDown=!1});for(const[P,b]of this._internalEvents)this._eventBus._on(P,b);for(const[P,b]of this._domEvents)window.addEventListener(P,b,!0);try{const P=await this._getDocProperties();if(y!==this._pdfDocument)return;await this._scripting.createSandbox({objects:d,calculationOrder:a,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...P,actions:_}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(P){console.error(`PDFScriptingManager.setDocument: "${P==null?void 0:P.message}".`),await this._destroyScripting();return}await((E=this._scripting)==null?void 0:E.dispatchEventInSandbox({id:"doc",name:"Open"})),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{y===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(y){var d;return(d=this._scripting)==null?void 0:d.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(y){var d;return(d=this._scripting)==null?void 0:d.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(y){var d;return(d=this._scripting)==null?void 0:d.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(y){var d;return(d=this._scripting)==null?void 0:d.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){var y;return((y=this._destroyCapability)==null?void 0:y.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,m.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,m.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,m.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,m.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(y){var p;const d=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:a,siblings:_,command:E,value:P}=y;if(!a){switch(E){case"clear":console.clear();break;case"error":console.error(P);break;case"layout":if(d)return;const c=(0,o.apiPageLayoutToViewerModes)(P);this._pdfViewer.spreadMode=c.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=P+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(P);break;case"zoom":if(d)return;this._pdfViewer.currentScaleValue=P;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(d)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(d)return;this._pdfViewer.decreaseScale();break}return}if(d&&y.focus)return;delete y.id,delete y.siblings;const b=_?[a,..._]:[a];for(const c of b){const l=document.querySelector(`[data-element-id="${c}"]`);l?l.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:y})):(p=this._pdfDocument)==null||p.annotationStorage.setValue(c,y)}}async _dispatchPageOpen(y,d=!1){const a=this._pdfDocument,_=this._visitedPages;if(d&&(this._closeCapability=(0,m.createPromiseCapability)()),!this._closeCapability)return;const E=this._pdfViewer.getPageView(y-1);if((E==null?void 0:E.renderingState)!==o.RenderingStates.FINISHED){this._pageOpenPending.add(y);return}this._pageOpenPending.delete(y);const P=(async()=>{var p,c;const b=await(_.has(y)?null:(p=E.pdfPage)==null?void 0:p.getJSActions());a===this._pdfDocument&&await((c=this._scripting)==null?void 0:c.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:y,actions:b}))})();_.set(y,P)}async _dispatchPageClose(y){var E;const d=this._pdfDocument,a=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(y))return;const _=a.get(y);_&&(a.set(y,null),await _,d===this._pdfDocument&&await((E=this._scripting)==null?void 0:E.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:y})))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:y}=T(26);return y(this._pdfDocument)}_createScripting(){if(this._destroyCapability=(0,m.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:y}=T(26);return new y(this._sandboxBundleSrc)}async _destroyScripting(){var y,d;if(!this._scripting){this._pdfDocument=null,(y=this._destroyCapability)==null||y.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(a=>{setTimeout(a,1e3)})]).catch(a=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(const[a,_]of this._internalEvents)this._eventBus._off(a,_);this._internalEvents.clear();for(const[a,_]of this._domEvents)window.removeEventListener(a,_,!0);this._domEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,delete this._mouseState.isDown,this._ready=!1,(d=this._destroyCapability)==null||d.resolve()}}g.PDFScriptingManager=M},(f,g,T)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericScripting=void 0,g.docPropertiesLookup=m;var o=T(3);async function m(C){const y="",d=y.split("#")[0];let{info:a,metadata:_,contentDispositionFilename:E,contentLength:P}=await C.getMetadata();if(!P){const{length:b}=await C.getDownloadInfo();P=b}return{...a,baseURL:d,filesize:P,filename:E||(0,o.getPdfFilenameFromUrl)(y),metadata:_==null?void 0:_.getRaw(),authors:_==null?void 0:_.get("dc:creator"),numPages:C.numPages,URL:y}}class M{constructor(y){this._ready=(0,o.loadScript)(y,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(y){(await this._ready).create(y)}async dispatchEventInSandbox(y){const d=await this._ready;setTimeout(()=>d.dispatchEvent(y),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}g.GenericScripting=M}],n={};function r(f){var g=n[f];if(g!==void 0)return g.exports;var T=n[f]={exports:{}};return i[f](T,T.exports,r),T.exports}var u={};return(()=>{var f=u;Object.defineProperty(f,"__esModule",{value:!0}),Object.defineProperty(f,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return M.AnnotationLayerBuilder}}),Object.defineProperty(f,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return g.DefaultAnnotationLayerFactory}}),Object.defineProperty(f,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return g.DefaultStructTreeLayerFactory}}),Object.defineProperty(f,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return g.DefaultTextLayerFactory}}),Object.defineProperty(f,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return g.DefaultXfaLayerFactory}}),Object.defineProperty(f,"DownloadManager",{enumerable:!0,get:function(){return C.DownloadManager}}),Object.defineProperty(f,"EventBus",{enumerable:!0,get:function(){return y.EventBus}}),Object.defineProperty(f,"GenericL10n",{enumerable:!0,get:function(){return d.GenericL10n}}),Object.defineProperty(f,"LinkTarget",{enumerable:!0,get:function(){return T.LinkTarget}}),Object.defineProperty(f,"NullL10n",{enumerable:!0,get:function(){return a.NullL10n}}),Object.defineProperty(f,"PDFFindController",{enumerable:!0,get:function(){return _.PDFFindController}}),Object.defineProperty(f,"PDFHistory",{enumerable:!0,get:function(){return E.PDFHistory}}),Object.defineProperty(f,"PDFLinkService",{enumerable:!0,get:function(){return T.PDFLinkService}}),Object.defineProperty(f,"PDFPageView",{enumerable:!0,get:function(){return P.PDFPageView}}),Object.defineProperty(f,"PDFScriptingManager",{enumerable:!0,get:function(){return b.PDFScriptingManager}}),Object.defineProperty(f,"PDFSinglePageViewer",{enumerable:!0,get:function(){return m.PDFSinglePageViewer}}),Object.defineProperty(f,"PDFViewer",{enumerable:!0,get:function(){return m.PDFViewer}}),Object.defineProperty(f,"ProgressBar",{enumerable:!0,get:function(){return o.ProgressBar}}),Object.defineProperty(f,"RenderingStates",{enumerable:!0,get:function(){return o.RenderingStates}}),Object.defineProperty(f,"ScrollMode",{enumerable:!0,get:function(){return o.ScrollMode}}),Object.defineProperty(f,"SimpleLinkService",{enumerable:!0,get:function(){return T.SimpleLinkService}}),Object.defineProperty(f,"SpreadMode",{enumerable:!0,get:function(){return o.SpreadMode}}),Object.defineProperty(f,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return p.StructTreeLayerBuilder}}),Object.defineProperty(f,"TextLayerBuilder",{enumerable:!0,get:function(){return c.TextLayerBuilder}}),Object.defineProperty(f,"XfaLayerBuilder",{enumerable:!0,get:function(){return l.XfaLayerBuilder}}),Object.defineProperty(f,"parseQueryString",{enumerable:!0,get:function(){return o.parseQueryString}});var g=r(1),T=r(6),o=r(7),m=r(11),M=r(5),C=r(18),y=r(19),d=r(20),a=r(4),_=r(22),E=r(24),P=r(13),b=r(25),p=r(8),c=r(9),l=r(10)})(),u})())})(pdf_viewer);const viewer=pdf_viewer.exports;var module=viewer,pendingOperation=Promise.resolve();function pdfjsWrapper(e){function t(u){e.GlobalWorkerOptions.workerSrc=u}function i(u){return typeof u=="object"&&u!==null&&u.__PDFDocumentLoadingTask===!0}function n(u,f){var g;if(typeof u=="string")g={url:u};else if(u instanceof Uint8Array)g={data:u};else if(typeof u=="object"&&u!==null)g=Object.assign({},u);else throw new TypeError("invalid src type");f&&f.withCredentials&&(g.withCredentials=f.withCredentials);var T=e.getDocument(g);return T.__PDFDocumentLoadingTask=!0,f&&f.onPassword&&(T.onPassword=f.onPassword),f&&f.onProgress&&(T.onProgress=f.onProgress),T}function r(u,f,g,T,o){var m=null,M=null,C=null,y=!1;u.getContext("2d").save();function d(){u.getContext("2d").clearRect(0,0,u.width,u.height)}function a(){for(;f.firstChild;)f.removeChild(f.firstChild)}this.destroy=function(){m!==null&&(pendingOperation=m.destroy(),m=null)},this.getResolutionScale=function(){return u.offsetWidth/u.width},this.printPage=function(E,P){if(M===null)return;var b=E===void 0?150:E,p=b/72,c=96/72,l=document.createElement("iframe");function s(){l.parentNode.removeChild(l)}new Promise(function(x,R){l.frameBorder="0",l.scrolling="no",l.width="0px;",l.height="0px;",l.style.cssText="position: absolute; top: 0; left: 0",l.onload=function(){x(this.contentWindow)},window.document.body.appendChild(l)}).then(function(x){return x.document.title="",m.getPage(1).then(function(R){var O=R.getViewport({scale:1});return x.document.head.appendChild(x.document.createElement("style")).textContent="@supports ((size:A4) and (size:1pt 1pt)) {@page { margin: 1pt; size: "+O.width*p/c+"pt "+O.height*p/c+"pt; }}@media print {body { margin: 0 }canvas { page-break-before: avoid; page-break-after: always; page-break-inside: avoid }}@media screen {body { margin: 0 }}",x})}).then(function(x){for(var R=[],O=1;O<=m.numPages;++O)P!==void 0&&P.indexOf(O)===-1||R.push(m.getPage(O).then(function(B){var ne=B.getViewport({scale:1}),he=x.document.body.appendChild(x.document.createElement("canvas"));return he.width=ne.width*p,he.height=ne.height*p,B.render({canvasContext:he.getContext("2d"),transform:[p,0,0,p,0,0],viewport:ne,intent:"print"}).promise}));Promise.all(R).then(function(){x.focus(),x.document.queryCommandSupported("print")?x.document.execCommand("print",!1,null):x.print(),s()}).catch(function(B){s(),g("error",B)})})},this.renderPage=function(E){if(C!==null){if(y)return;y=!0;return}if(M!==null){var P=(M.rotate===void 0?0:M.rotate)+(E===void 0?0:E),b=u.offsetWidth/M.getViewport({scale:1}).width*(window.devicePixelRatio||1),p=M.getViewport({scale:b,rotation:P});u.style.height=u.offsetWidth*(p.height/p.width)+"px",g("pageSize",{width:p.width,height:p.height,scale:b}),u.width=p.width,u.height=p.height,C=M.render({canvasContext:u.getContext("2d"),viewport:p}),f.style.visibility="hidden",a();var c={scrollPageIntoView:function(s){g("linkClicked",s.pageNumber)}},l=new module.PDFLinkService;l.setDocument(m),l.setViewer(c),pendingOperation=pendingOperation.then((function(){var s=M.getAnnotations({intent:"display"}).then(function(R){e.AnnotationLayer.render({viewport:p.clone({dontFlip:!0}),div:f,annotations:R,page:M,linkService:l,renderInteractiveForms:!1})}),x=C.promise.then(function(){f.style.visibility="",y=!1,C=null}).catch((function(R){if(C=null,R instanceof e.RenderingCancelledException){y=!1,this.renderPage(E);return}g("error",R)}).bind(this));return Promise.all([s,x])}).bind(this))}},this.forEachPage=function(E){var P=m.numPages;(function b(p){m.getPage(p).then(E).then(function(){++p<=P&&b(p)})})(1)},this.loadPage=function(E,P){M=null,m!==null&&(pendingOperation=pendingOperation.then(function(){return m.getPage(E)}).then((function(b){M=b,this.renderPage(P),g("pageLoaded",b.pageNumber)}).bind(this)).catch(function(b){d(),a(),g("error",b)}))};let _=()=>this.loadPage(T,o);this.loadDocument=function(E){if(m=null,M=null,g("numPages",void 0),!E){u.removeAttribute("width"),u.removeAttribute("height"),a();return}pendingOperation=pendingOperation.then(function(){var P;if(i(E)){if(E.destroyed){g("error",new Error("loadingTask has been destroyed"));return}P=E}else P=n(E,{onPassword:function(b,p){var c;switch(p){case e.PasswordResponses.NEED_PASSWORD:c="NEED_PASSWORD";break;case e.PasswordResponses.INCORRECT_PASSWORD:c="INCORRECT_PASSWORD";break}g("password",b,c)},onProgress:function(b){var p=b.loaded/b.total;g("progress",Math.min(p,1))}});return P.promise}).then(function(P){m=P,g("numPages",P.numPages),_(),g("loaded")}).catch(function(P){d(),a(),g("error",P)})},f.style.transformOrigin="0 0"}return{setWorkerSrc:t,createLoadingTask:n,PDFJSWrapper:r}}const _sfc_main$2={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var e=this.$el.firstChild,t=this.$el.lastChild;e.scrollLeft=1e5,e.scrollTop=1e5,t.scrollLeft=1e5,t.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(e){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(){var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",t="position: absolute; left: 0; top: 0;";return h("div",{style:e+"animation-name: resizeSensorVisibility;",onAnimationStart:this.update},[h("div",{style:e,onScroll:this.update},[h("div",{style:t+"width: 100000px; height: 100000px;"})]),h("div",{style:e,onScroll:this.update},[h("div",{style:t+"width: 200%; height: 200%;"})])])},beforeUnmount:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(this.initial===!0&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var e=(function(){this.update(),t()}).bind(this),t=(function(){this.$el.detachEvent("onresize",e),this.$off("resizeSensorBeforeDestroy",t)}).bind(this);this.$el.attachEvent("onresize",e),this.$on("resizeSensorBeforeDestroy",t),this.reset()}}};function componentFactory(e){var t=e.createLoadingTask;return{createLoadingTask:t,render(){return h("span",{style:"position: relative; display: block"},[h("canvas",{style:"display: inline-block; width: 100%; height: 100%; vertical-align: top",ref:"canvas"}),h("span",{style:"display: inline-block; width: 100%; height: 100%",class:"annotationLayer",ref:"annotationLayer"}),h(_sfc_main$2,{initial:!0,onResize:this.resize})])},props:{src:{type:[String,Object,Uint8Array],default:""},page:{type:Number,default:1},rotate:{type:Number},workerSrc:{type:String,default:"/pdfjs/pdf.worker.js"}},emits:["password","progress","numPages","loaded","error","pageLoaded","pageSize","linkClicked"],watch:{src:function(){this.pdf.loadDocument(this.src)},page:function(){this.pdf.loadPage(this.page,this.rotate)},rotate:function(){this.pdf.renderPage(this.rotate)}},methods:{resize:function(i){if(!(this.$el.parentNode===null||i.width===0&&i.height===0)){this.$refs.canvas.style.height=this.$refs.canvas.offsetWidth*(this.$refs.canvas.height/this.$refs.canvas.width)+"px";var n=this.pdf.getResolutionScale();(n<.85||n>1.15)&&this.pdf.renderPage(this.rotate)}},print:function(i,n){this.pdf.printPage(i,n)}},mounted(){e.setWorkerSrc(this.workerSrc);const i=e.PDFJSWrapper;this.pdf=new i(this.$refs.canvas,this.$refs.annotationLayer,this.$emit,this.page,this.rotate),this.pdf.loadDocument(this.src)},unmounted(){this.pdf.destroy()}}}var component=componentFactory(pdfjsWrapper(pdf_1));const _sfc_main$1=component,_sfc_main={components:{BreezeAuthenticatedLayout,FileUpload:script,pdf:_sfc_main$1},props:{chart:{type:Object,default:()=>({})}},data(){return{chartData:this.chart,sheetMusic:[],recordings:[],showUploadModal:!1,selectedUpload:!1}},created(){this.sheetMusic=this.chart.uploads.filter(e=>{if(e.upload_type_id===3)return e}),this.recordings=this.chart.uploads.filter(e=>{if(e.upload_type_id===1||e.upload_type_id===2)return e}),this.chartData.public=this.chartData.public===1},methods:{selectUpload(e){this.selectedUpload=e.data,this.showUploadModal=!0},uploadChart(e){this.upload(e,3)},uploadMusic(e){this.upload(e,1)},upload(e,t){this.$inertia.post(this.chartData.id+"/upload",{type_id:t,band_id:this.chartData.band_id,"files[]":e.files}).then(()=>{window.location.reload()})},updateChart(){this.$inertia.post(this.chartData.id,{title:this.chartData.title,composer:this.chartData.composer,public:this.chartData.public,description:this.chartData.description},{onSuccess:()=>{}})},deleteChart(){this.$inertia.delete(this.chartData.id)},updateUpload(){this.$inertia.post(this.chartData.id+"/chartDownload/"+this.selectedUpload.id,{displayName:this.selectedUpload.displayName,notes:this.selectedUpload.notes?this.selectedUpload.notes:""})},deleteUpload(){this.$inertia.delete(this.chartData.id+"/chartDownload/"+this.selectedUpload.id,{onSuccess:()=>{window.location.reload(),this.showUploadModal=!1}})}}},_hoisted_1={class:"font-semibold text-xl text-gray-800 leading-tight"},_hoisted_2=createBaseVNode("div",{class:"p-field"},null,-1),_hoisted_3={class:"p-fluid p-formgrid p-grid"},_hoisted_4={class:"p-field p-col my-4"},_hoisted_5=createBaseVNode("label",{for:"name"},"Upload Name",-1),_hoisted_6={class:"p-field p-col my-4"},_hoisted_7=createBaseVNode("label",{for:"name"},"Preview",-1),_hoisted_8={class:"flex"},_hoisted_9={class:"max-w-md py-4 mx-auto truncate"},_hoisted_10={key:3,controls:""},_hoisted_11=["src"],_hoisted_12={key:4},_hoisted_13={class:"flex"},_hoisted_14={class:"max-w-md py-4 mx-auto"},_hoisted_15=["href"],_hoisted_16=createBaseVNode("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[createBaseVNode("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})],-1),_hoisted_17=createBaseVNode("span",null,"Download",-1),_hoisted_18=[_hoisted_16,_hoisted_17],_hoisted_19={class:"p-field p-col my-4"},_hoisted_20=createBaseVNode("label",{for:"Notes"},"Notes",-1),_hoisted_21={class:"min-w-min md:w-auto py-6 px-4 sm:px-6 lg:px-8"},_hoisted_22={class:"flex flex-col"},_hoisted_23={class:"p-fluid p-formgrid p-grid"},_hoisted_24={class:"p-field p-col my-4"},_hoisted_25=createBaseVNode("label",{for:"firstname"},"Title",-1),_hoisted_26={class:"p-field p-col my-4"},_hoisted_27=createBaseVNode("label",{for:"lastname"},"Composer",-1),_hoisted_28={class:"p-field p-col my-4"},_hoisted_29=createBaseVNode("label",{for:"public"},"Public ",-1),_hoisted_30={class:"p-field p-col my-4"},_hoisted_31=createBaseVNode("label",{for:"description"},"Notes/Description",-1),_hoisted_32={class:"flex flex-row"},_hoisted_33={class:"w-1/4 mx-4 flex-auto border-4 border-light-blue-500 border-opacity-75"},_hoisted_34={class:"w-1/4 mx-4 flex-auto border-4 border-light-blue-500 border-opacity-75"},_hoisted_35=createBaseVNode("p",null,"Drag and drop files to here to upload.",-1),_hoisted_36=createBaseVNode("p",null,"Drag and drop files to here to upload.",-1);function _sfc_render(e,t,i,n,r,u){const f=resolveComponent("Link"),g=resolveComponent("InputText"),T=resolveComponent("Image"),o=resolveComponent("pdf"),m=resolveComponent("av-waveform"),M=resolveComponent("Textarea"),C=resolveComponent("Button"),y=resolveComponent("Dialog"),d=resolveComponent("Checkbox"),a=resolveComponent("Editor"),_=resolveComponent("Divider"),E=resolveComponent("Column"),P=resolveComponent("DataTable"),b=resolveComponent("FileUpload"),p=resolveComponent("AccordionTab"),c=resolveComponent("Accordion"),l=resolveComponent("Panel"),s=resolveComponent("Container"),x=resolveComponent("breeze-authenticated-layout");return openBlock(),createBlock(x,null,{header:withCtx(()=>[createBaseVNode("h2",_hoisted_1,[createVNode(f,{href:"/charts"},{default:withCtx(()=>[createTextVNode(" Edit Chart ")]),_:1}),createTextVNode(" :: "+toDisplayString(r.chartData.title),1)])]),default:withCtx(()=>[createVNode(y,{visible:r.showUploadModal,"onUpdate:visible":t[2]||(t[2]=R=>r.showUploadModal=R),header:r.selectedUpload.displayName,modal:!0,class:"w-full max-w-md m-auto"},{footer:withCtx(()=>[createVNode(C,{label:"Delete",icon:"pi pi-trash",class:"p-button-text",onClick:u.deleteUpload},null,8,["onClick"]),createVNode(C,{label:"Update",icon:"pi pi-save",onClick:u.updateUpload},null,8,["onClick"])]),default:withCtx(()=>[_hoisted_2,createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[_hoisted_5,createVNode(g,{id:"name",modelValue:r.selectedUpload.displayName,"onUpdate:modelValue":t[0]||(t[0]=R=>r.selectedUpload.displayName=R),type:"text"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_6,[_hoisted_7,createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[r.selectedUpload.fileType.indexOf("image")!==-1?(openBlock(),createBlock(T,{key:0,src:r.selectedUpload.chart_id+"/chartDownload/"+r.selectedUpload.name,alt:r.selectedUpload.name,preview:""},null,8,["src","alt"])):r.selectedUpload.fileType.indexOf("pdf")!==-1?(openBlock(),createBlock(o,{key:1,src:r.selectedUpload.chart_id+"/chartDownload/"+r.selectedUpload.name,class:"w-full"},null,8,["src"])):r.selectedUpload.fileType.indexOf("audio")!==-1?(openBlock(),createBlock(m,{key:2,"audio-src":r.selectedUpload.chart_id+"/chartDownload/"+r.selectedUpload.name},null,8,["audio-src"])):r.selectedUpload.fileType.indexOf("video")!==-1?(openBlock(),createElementBlock("video",_hoisted_10,[createBaseVNode("source",{src:r.selectedUpload.chart_id+"/chartDownload/"+r.selectedUpload.name},null,8,_hoisted_11)])):(openBlock(),createElementBlock("div",_hoisted_12," ???? unable to display file "))])])]),createBaseVNode("div",_hoisted_13,[createBaseVNode("div",_hoisted_14,[createBaseVNode("a",{href:r.selectedUpload.chart_id+"/chartDownload/"+r.selectedUpload.name,download:"",class:"bg-grey-light hover:bg-grey text-grey-darkest font-bold py-2 px-4 rounded inline-flex items-center"},_hoisted_18,8,_hoisted_15)])]),createBaseVNode("div",_hoisted_19,[_hoisted_20,createVNode(M,{id:"Notes",modelValue:r.selectedUpload.notes,"onUpdate:modelValue":t[1]||(t[1]=R=>r.selectedUpload.notes=R),rows:"4"},null,8,["modelValue"])])])]),_:1},8,["visible","header"]),createVNode(s,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[createBaseVNode("div",_hoisted_23,[createBaseVNode("div",_hoisted_24,[_hoisted_25,createVNode(g,{id:"firstname",modelValue:r.chartData.title,"onUpdate:modelValue":t[3]||(t[3]=R=>r.chartData.title=R),type:"text"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_26,[_hoisted_27,createVNode(g,{id:"lastname",modelValue:r.chartData.composer,"onUpdate:modelValue":t[4]||(t[4]=R=>r.chartData.composer=R),type:"text"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_28,[_hoisted_29,createVNode(d,{modelValue:r.chartData.public,"onUpdate:modelValue":t[5]||(t[5]=R=>r.chartData.public=R),name:"public",binary:!0},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_30,[_hoisted_31,createVNode(a,{modelValue:r.chartData.description,"onUpdate:modelValue":t[6]||(t[6]=R=>r.chartData.description=R),name:"description","editor-style":"height:320px"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_32,[createBaseVNode("div",_hoisted_33,[createVNode(C,{label:"Delete Chart",icon:"pi pi-trash",class:"p-button-text",onClick:u.deleteChart},null,8,["onClick"])]),createBaseVNode("div",_hoisted_34,[createVNode(C,{label:"Update Chart",icon:"pi pi-save",onClick:u.updateChart},null,8,["onClick"])])])]),createVNode(_,{type:"dashed"}),createVNode(l,{class:"mt-4"},{header:withCtx(()=>[createTextVNode(" Sheet Music ")]),default:withCtx(()=>[createVNode(P,{value:r.sheetMusic,"striped-rows":"","row-hover":"","responsive-layout":"scroll","selection-mode":"single",onRowClick:u.selectUpload},{empty:withCtx(()=>[createTextVNode(" No Sheet Music found. ")]),default:withCtx(()=>[createVNode(E,{field:"displayName",header:"Name"}),createVNode(E,{field:"name",header:"File Name"})]),_:1},8,["value","onRowClick"]),createVNode(c,null,{default:withCtx(()=>[createVNode(p,{header:"upload"},{default:withCtx(()=>[createVNode(b,{name:"sheetMusic[]",multiple:!0,"custom-upload":!0,onUploader:u.uploadChart},{empty:withCtx(()=>[_hoisted_35]),_:1},8,["onUploader"])]),_:1})]),_:1})]),_:1}),createVNode(l,{class:"mt-4"},{header:withCtx(()=>[createTextVNode(" Recordings ")]),default:withCtx(()=>[createVNode(P,{value:r.recordings,"striped-rows":"","row-hover":"","responsive-layout":"scroll","selection-mode":"single",onRowClick:u.selectUpload},{empty:withCtx(()=>[createTextVNode(" No Recordings found. ")]),default:withCtx(()=>[createVNode(E,{field:"displayName",header:"Name"}),createVNode(E,{field:"name",header:"File Name"})]),_:1},8,["value","onRowClick"]),createVNode(c,null,{default:withCtx(()=>[createVNode(p,{header:"upload"},{default:withCtx(()=>[createVNode(b,{name:"recordings[]",url:i.chart.id+"/upload",multiple:!0,"custom-upload":!0,onUploader:u.uploadMusic},{empty:withCtx(()=>[_hoisted_36]),_:1},8,["url","onUploader"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})}const Edit=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{Edit as default};
