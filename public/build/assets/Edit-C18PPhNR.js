import{_ as I,B as S,r as g,o as s,c as L,w as c,e,a as m,f as u,t as f,b as i,k as _,F as p,i as v,v as w,d as h,g as U,T as k,n as D,p as z,m as N}from"./app-BoR-OAMc.js";import{s as O}from"./fileupload.esm-CBPgBplW.js";import{L as T}from"./index-Dz6-ljoR.js";const A={components:{BreezeAuthenticatedLayout:S,FileUpload:O,Link:T},props:["errors","band","members","owners"],data(){return{urlWarn:!1,syncing:!1,showInstructions:!1,activePanel:"Details",inviting:!1,invite:{email:""},members:[],panels:[{name:"Details",icon:'<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" /></svg>'},{name:"Band Members",icon:'<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>'}],form:{name:this.band.name,site_name:this.band.site_name,calendar_id:this.band.calendar_id}}},watch:{form:{deep:!0,handler(){}}},methods:{updateBand(){const l=this.band.id;this.$inertia.patch("/bands/"+l,this.form).then(()=>{this.loading=!1})},filter(){if(this.form.site_name.length>0){let n=this.form.site_name.replace(/[^a-zA-Z0-9\-_]/gm,"");this.urlWarn=n!==this.form.site_name,this.form.site_name=n}},inviteOwner(){this.$inertia.post("/inviteOwner/"+this.band.id,{band_id:this.band.id,email:this.invite.email},{onSuccess:()=>{}})},inviteMember(){this.$inertia.post("/inviteMember/"+this.band.id,{band_id:this.band.id,email:this.invite.email},{onSuccess:()=>{}})},deleteOwner(l){this.$swal.fire({title:"Are you sure you remove "+l.user.name+" as an owner?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.value&&this.$inertia.delete("/deleteOwner/"+this.band.id+"/"+l.user.id)})},deleteInvite(l){this.$swal.fire({title:"Are you sure you want to remove the invite for "+l.email,text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.value&&this.$inertia.delete("/deleteInvite/"+this.band.id+"/"+l.id)})},uploadLogo(l){this.$inertia.post("./uploadLogo",{logo:l.files},{forceFormData:!0,onSuccess:()=>{this.$swal.fire("logo uploaded","(no need to update)","success"),this.$refs.fileUpload.clear()}})},syncCalendar(){this.syncing=!0,this.$inertia.post("./syncCalendar",{},{onSuccess:()=>{this.$swal.fire("Calendar Synced","","success"),this.syncing=!1}})}}},d=l=>(z("data-v-83617af8"),l=l(),N(),l),P={class:"font-semibold text-xl text-gray-800 leading-tight"},V={class:"w-full max-w-lg"},F={class:"mb-4 bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"},H={class:"mb-4 flex text-center"},j=["title","onClick","innerHTML"],Y=["action"],G={class:"mb-4"},W=d(()=>e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Name",-1)),E={class:"mb-4"},R=d(()=>e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Page Name (URL)",-1)),Z={key:0,class:"text-red-700"},q={class:"mb-4"},J=d(()=>e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Logo",-1)),K=["src"],Q={class:"mb-4"},X=d(()=>e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Google Calendar ID",-1)),$=d(()=>e("strong",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})]),u(" How to integrate calendar")],-1)),ee=[$],te={key:0},ne=d(()=>e("span",null," In order to get this set up, you have to give the app permissions to write events to the calendar and then you have to specify the calendar's ID you give permission to write to.",-1)),oe=[ne],se=d(()=>e("hr",null,null,-1)),ie=d(()=>e("ol",{class:"list-decimal px-2 my-4"},[e("li",null,[u("Goto "),e("a",{href:"https://calendar.google.com"},"Google calendar")]),e("li",null,"Under 'my calendars', find the 3 little dots and click 'settings and sharing'"),e("li",null,[u(" Find 'Share with specific people' and add in "),e("strong",null,"ttscalendar@threethirtyseven.iam.gserviceaccount.com")]),e("li",null," Scroll down a little bit to find your Calendar ID under Integrate calendar. It will look like somethingsomethingsomething@whatever.google.com "),e("li",null,"Copy the calendar ID and paste it in above")],-1)),le={key:0,class:"mb-4"},ae=["href"],re=d(()=>e("button",{class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button"}," Setup Stripe ",-1)),de=[re],ue={key:1,class:"mb-4"},ce=d(()=>e("p",{class:"text-green-500"}," Stripe account setup ",-1)),me=[ce],he={class:"flex items-center justify-around"},be={key:1},fe={key:0,class:"px-3"},ge={key:1},_e={key:2,class:"px-3"},pe=["onClick"],ve={key:3},we={key:4,class:"px-3"},ye=["onClick"],xe={key:5},ke={key:6},Ce={key:0,class:"my-4"},Be=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)),Me=[Be];function Ie(l,n,a,Se,o,r){const y=g("Link"),C=g("FileUpload"),x=g("Button"),B=g("breeze-authenticated-layout");return s(),L(B,null,{header:c(()=>[e("h2",P,[m(y,{href:"/bands"},{default:c(()=>[u(" Bands ")]),_:1}),u(" :: "+f(a.band.name),1)])]),default:c(()=>[e("div",V,[e("div",F,[e("div",H,[(s(!0),i(p,null,_(o.panels,t=>(s(),i("div",{key:t.name,class:D([o.activePanel==t.name?"bg-blue-600":"bg-blue-400","cursor-pointer","inline","w-1/2","hover:bg-blue-700","text-white","font-bold","py-2"]),title:t.name,onClick:b=>o.activePanel=t.name,innerHTML:t.icon},null,10,j))),128))]),o.activePanel=="Details"?(s(),i("form",{key:0,action:"/bands/"+a.band.id,method:"PATCH",onSubmit:n[5]||(n[5]=U((...t)=>r.updateBand&&r.updateBand(...t),["prevent"]))},[e("div",G,[W,v(e("input",{id:"name","onUpdate:modelValue":n[0]||(n[0]=t=>o.form.name=t),type:"text",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Band Name"},null,512),[[w,o.form.name]])]),e("div",E,[R,v(e("input",{id:"site_name","onUpdate:modelValue":n[1]||(n[1]=t=>o.form.site_name=t),type:"text",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Band_Name",pattern:"([a-zA-z0-9\\-_]+)",onInput:n[2]||(n[2]=(...t)=>r.filter&&r.filter(...t))},null,544),[[w,o.form.site_name]]),o.urlWarn?(s(),i("span",Z,"Letters, numbers, _, +, and - are the only characters allowed")):h("",!0)]),e("div",q,[J,e("img",{src:a.band.logo},null,8,K),m(C,{ref:"fileUpload",mode:"basic",name:"logo",accept:"image/*",auto:!0,"custom-upload":!0,onUploader:r.uploadLogo},null,8,["onUploader"])]),e("div",Q,[X,v(e("input",{id:"calendarID","onUpdate:modelValue":n[3]||(n[3]=t=>o.form.calendar_id=t),type:"text",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Calendar ID"},null,512),[[w,o.form.calendar_id]]),e("span",{class:"cursor-pointer",onClick:n[4]||(n[4]=t=>o.showInstructions=!o.showInstructions)},ee),o.showInstructions?(s(),i("p",te,oe)):h("",!0),se,ie]),a.band.stripe_accounts?(s(),i("div",ue,me)):(s(),i("div",le,[e("a",{href:"/bands/"+a.band.id+"/setupStripe"},de,8,ae)])),e("div",he,[m(x,{label:"Update",type:"submit"},{default:c(()=>[u(" Update ")]),_:1}),m(x,{disabled:o.syncing,label:o.syncing?"Syncing...":"Sync Calendar",onClick:r.syncCalendar},null,8,["disabled","label","onClick"])])],40,Y)):h("",!0),o.activePanel=="Band Members"?(s(),i("div",be,[u(" Members: "),a.band.members?(s(),i("ul",fe,[(s(!0),i(p,null,_(a.band.members,(t,b)=>(s(),i("li",{key:b,class:"my-2"},[m(y,{href:"/permissions/"+a.band.id+"/"+t.user.id},{default:c(()=>[u(f(t.user.name)+" - "+f(t.user.email),1)]),_:2},1032,["href"])]))),128))])):(s(),i("div",ge," No Members ")),u(" Owners: "),a.band.owners?(s(),i("ul",_e,[(s(!0),i(p,null,_(a.band.owners,(t,b)=>(s(),i("li",{key:b,class:"my-2 cursor-pointer",onClick:M=>r.deleteOwner(t)},f(t.user.name)+" - "+f(t.user.email),9,pe))),128))])):(s(),i("div",ve," No Owners ")),u(" Pending Invites: "),a.band.pending_invites?(s(),i("ul",we,[(s(!0),i(p,null,_(a.band.pending_invites,(t,b)=>(s(),i("li",{key:b,class:"italic text-gray-400 my-2 cursor-pointer",onClick:M=>r.deleteInvite(t)},f(t.email),9,ye))),128))])):(s(),i("div",xe," No Members ")),a.band.members.legth==0?(s(),i("p",ke," Looks like you don't have any members in your band. Invite some! ")):h("",!0),m(k,{name:"slide-down"},{default:c(()=>[o.inviting?(s(),i("div",Ce,[v(e("input",{id:"email","onUpdate:modelValue":n[6]||(n[6]=t=>o.invite.email=t),type:"email",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"user@email.com"},null,512),[[w,o.invite.email]]),e("div",null,[e("button",{class:"mx-3 my-2 px-4 py-2 text-sm font-semibold tracking-wider text-blue-600 rounded hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:n[7]||(n[7]=t=>o.inviting=!o.inviting)}," Cancel "),e("button",{class:"mx-3 my-2 bg-blue-100 px-4 py-2 text-sm font-semibold tracking-wider text-blue-600 rounded hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:n[8]||(n[8]=(...t)=>r.inviteOwner&&r.inviteOwner(...t))}," Add Owner "),e("button",{class:"mx-3 my-2 bg-blue-100 px-4 py-2 text-sm font-semibold tracking-wider text-blue-600 rounded hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:n[9]||(n[9]=(...t)=>r.inviteMember&&r.inviteMember(...t))}," Add Member ")])])):h("",!0)]),_:1}),m(k,{name:"slide-down"},{default:c(()=>[o.inviting?h("",!0):(s(),i("button",{key:0,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",onClick:n[10]||(n[10]=t=>o.inviting=!o.inviting)},Me))]),_:1})])):h("",!0)])])]),_:1})}const ze=I(A,[["render",Ie],["__scopeId","data-v-83617af8"]]);export{ze as default};
