import{_ as B,B as N,S as T,U,r,o as d,c as S,w as i,a as s,e as a,f as I,b as p,d as h,n as f,t as v}from"./app-BoR-OAMc.js";import{s as q}from"./toolbar.esm-BovHdIpx.js";const z={components:{BreezeAuthenticatedLayout:N,Toolbar:q,DataTable:T,Column:U},props:{charts:{type:Array,default:()=>[]}},data(){return{form:{},chartsData:this.charts,chart:{},saving:!1,submitted:!1,chartDialog:!1}},computed:{availableBands(){const c=[];this.$page.props.auth.user.band_owner&&this.$page.props.auth.user.band_owner.forEach(l=>{c.push({id:l.id,name:l.name})}),this.$page.props.auth.user.band_member&&this.$page.props.auth.user.band_member.forEach(l=>{c.push({id:l.id,name:l.name})});function o(l,u){return l.name<u.name?-1:l.name>u.name?1:0}return c.filter((l,u,e)=>e.findIndex(n=>n.id===l.id)===u).sort(o)}},watch:{},created(){},methods:{selectedChart(c){this.$inertia.visit(this.route("charts.edit",c.data.id))},openNew(){this.saving=!1,this.product={},this.submitted=!1,this.chartDialog=!0},saveChart(){this.submitted=!0,this.saving=!0,this.chart.band_id=this.chart.band.id,this.$inertia.post("/charts/new",this.chart)},closeDialog(){this.saving=!1,this.chartDialog=!1}}},E=a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Band Charts ",-1),R={class:"card"},A=["alt"],M={class:"p-field"},L=a("label",{for:"name"},"Name",-1),j={key:0,class:"p-error"},F={class:"p-field"},G=a("label",{for:"name"},"Composer",-1),H={key:0,class:"p-error"},J={class:"p-field"},K=a("label",{for:"description"},"Description",-1),O={class:"p-field"},Q=a("label",{for:"band",class:"p-mb-3"},"Band",-1),W={key:0},X={key:1},Y={class:"p-formgrid p-grid"},Z={class:"p-field p-col"},P=a("label",{for:"price"},"Price",-1);function $(c,o,l,u,e,n){const m=r("Button"),g=r("Toolbar"),_=r("Column"),C=r("DataTable"),b=r("InputText"),w=r("Textarea"),D=r("Dropdown"),V=r("InputNumber"),k=r("Dialog"),x=r("Container"),y=r("breeze-authenticated-layout");return d(),S(y,null,{header:i(()=>[E]),default:i(()=>[s(x,null,{default:i(()=>[a("div",R,[s(g,{class:"p-mb-4"},{left:i(()=>[s(m,{label:"New",icon:"pi pi-plus",class:"p-button-success p-mr-2",onClick:n.openNew},null,8,["onClick"])]),right:i(()=>[]),_:1}),s(C,{value:e.chartsData,"striped-rows":"","row-hover":"","responsive-layout":"scroll","selection-mode":"single",onRowClick:n.selectedChart},{empty:i(()=>[I(" No Records found. Click 'new' to create one. ")]),default:i(()=>[s(_,{field:"title",header:"Title",sortable:!0}),s(_,{field:"composer",header:"Composer",sortable:!0})]),_:1},8,["value","onRowClick"])]),s(k,{visible:e.chartDialog,"onUpdate:visible":o[5]||(o[5]=t=>e.chartDialog=t),style:{width:"450px"},header:"Chart Details",modal:!0,class:"p-fluid"},{footer:i(()=>[s(m,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:n.closeDialog},null,8,["onClick"]),s(m,{label:e.saving?"Saving...":"Save",disabled:e.saving,icon:"pi pi-check",class:"p-button-text",onClick:n.saveChart},null,8,["label","disabled","onClick"])]),default:i(()=>[e.chart.image?(d(),p("img",{key:0,src:"https://www.primefaces.org/wp-content/uploads/2020/05/placeholder.png",alt:e.chart.image,class:"product-image"},null,8,A)):h("",!0),a("div",M,[L,s(b,{id:"name",modelValue:e.chart.name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.chart.name=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:f({"p-invalid":e.submitted&&!e.chart.name})},null,8,["modelValue","class"]),e.submitted&&!e.chart.name?(d(),p("small",j,"Name is required.")):h("",!0)]),a("div",F,[G,s(b,{id:"name",modelValue:e.chart.composer,"onUpdate:modelValue":o[1]||(o[1]=t=>e.chart.composer=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:f({"p-invalid":e.submitted&&!e.chart.composer})},null,8,["modelValue","class"]),e.submitted&&!e.chart.composer?(d(),p("small",H,"Composer is required.")):h("",!0)]),a("div",J,[K,s(w,{id:"description",modelValue:e.chart.description,"onUpdate:modelValue":o[2]||(o[2]=t=>e.chart.description=t),required:"true",rows:"3",cols:"20"},null,8,["modelValue"])]),a("div",O,[Q,s(D,{id:"bandSelection",modelValue:e.chart.band,"onUpdate:modelValue":o[3]||(o[3]=t=>e.chart.band=t),options:n.availableBands,"option-label":"name",placeholder:"Select a Band"},{value:i(t=>[t.value&&t.value.id?(d(),p("div",W,[a("span",null,v(t.value.name),1)])):(d(),p("span",X,v(t.placeholder),1))]),_:1},8,["modelValue","options"])]),a("div",Y,[a("div",Z,[P,s(V,{id:"price",modelValue:e.chart.price,"onUpdate:modelValue":o[4]||(o[4]=t=>e.chart.price=t),mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue"])])])]),_:1},8,["visible"])]),_:1})]),_:1})}const oe=B(z,[["render",$]]);export{oe as default};
