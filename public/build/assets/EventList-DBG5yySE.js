import{_ as w,h as M,a7 as m,r,o as x,c as y,w as d,e as t,a as l,f,t as E}from"./app-BoR-OAMc.js";const C={name:"EventList",props:["events"],data(){return{searchParams:{},dontShowCompleted:!1,filters1:null,band:{}}},computed:{gigs(){let n=this.events.filter(i=>this.$moment(i.event_time,"YYYY-MM-DD").isBetween(this.$moment().subtract(6,"months"),this.$moment(),void 0,"[]"));const e={labels:[],datasets:[{label:"Events For the Month",backgroundColor:"#42A5F5",data:[]}]},a={};n.forEach(i=>{const s=this.$moment(i.event_time);a[s.format("MMMM")]?a[s.format("MMMM")]+=1:a[s.format("MMMM")]=1});for(let i in a)e.labels.push(i),e.datasets[0].data.push(a[i]);return e}},created(){this.initFilters1(),this.searchParams=this.$qs.parse(location.search.slice(1))},methods:{formatTime(n){return M(n.data.event_time).format("YYYY-MM-DD H:mm A")},gotoEvent(n){this.$inertia.visit(this.$route("events.edit",n.data.event_key))},clearFilter1(){this.initFilters1()},initFilters1(){this.filters1={global:{value:null,matchMode:m.CONTAINS},OldEvent:{value:!1,matchMode:m.EQUALS}}}}},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},V={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg pt-4"},S={class:"flex justify-center items-center my-4"},F={class:"card"},N=t("h5",null,"Upcoming Events",-1),T={class:"flex flex-row"},Y={class:"hidden md:flex"},k={class:"p-input-icon-left"},B=t("i",{class:"pi pi-search"},null,-1),I={class:"flex-grow mt-2"},U={class:"flex justify-end content-between"},A=t("label",{for:"switch",class:"mr-2"},"Previous Events",-1);function O(n,e,a,i,s,c){const v=r("Chart"),h=r("Button"),p=r("InputText"),_=r("InputSwitch"),u=r("Column"),b=r("DataTable"),g=r("Container");return x(),y(g,{class:"md:container md:mx-auto"},{default:d(()=>[t("div",D,[t("div",V,[t("div",S,[t("button",{type:"button",class:"self-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline m-10 p-5",onClick:e[0]||(e[0]=o=>n.$inertia.visit(n.$route("events.create")))}," Draft New Event "),t("div",F,[N,l(v,{type:"bar",data:c.gigs},null,8,["data"])])]),l(b,{filters:s.filters1,"onUpdate:filters":e[4]||(e[4]=o=>s.filters1=o),value:a.events,"responsive-layout":"scroll","selection-mode":"single",paginator:!0,rows:10,"rows-per-page-options":[10,20,50],"global-filter-fields":["event_name","event_date","venue_name","event_type"],"filter-display":"menu","sort-field":"event_date","sort-order":!0,onRowSelect:c.gotoEvent},{header:d(()=>[t("div",T,[t("div",Y,[l(h,{class:"p-button-outlined",type:"button",icon:"pi pi-filter-slash",label:"Clear",onClick:e[1]||(e[1]=o=>c.clearFilter1())})]),t("span",k,[B,l(p,{modelValue:s.filters1.global.value,"onUpdate:modelValue":e[2]||(e[2]=o=>s.filters1.global.value=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),t("div",I,[t("div",U,[A,l(_,{id:"switch",modelValue:s.filters1.OldEvent.value,"onUpdate:modelValue":e[3]||(e[3]=o=>s.filters1.OldEvent.value=o),class:"float-right","true-value":!0,"false-value":!1},null,8,["modelValue"])])])])]),empty:d(()=>[f(" No Events. ")]),default:d(()=>[l(u,{field:"event_name","filter-field":"event_name",header:"Name",sortable:!0}),l(u,{field:"venue_name","filter-field":"venue_name",header:"Venue",sortable:!0}),l(u,{field:"event_time","filter-field":"event_time",header:"Performance Date",sortable:!0},{body:d(o=>[f(E(c.formatTime(o)),1)]),_:1})]),_:1},8,["filters","value","onRowSelect"])])])]),_:1})}const $=w(C,[["render",O]]);export{$ as default};
